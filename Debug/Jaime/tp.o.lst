   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"tp.c"
  21              	.Ltext0:
  22              		.file 1 "../Jaime/tp.c"
 2124              		.align	2
 2125              	g_swap_xy:
 2126 0000 00000000 		.space	4
 2127              		.align	2
 2128              	g_kx_fp:
 2129 0004 00000000 		.space	4
 2130              		.align	2
 2131              	g_ky_fp:
 2132 0008 00000000 		.space	4
 2133              		.align	2
 2134              	g_ts_xc:
 2135 000c 00000000 		.space	4
 2136              		.align	2
 2137              	g_ts_yc:
 2138 0010 00000000 		.space	4
 2139              		.align	2
 2140              	g_lcd_xc:
 2141 0014 00000000 		.space	4
 2142              		.align	2
 2143              	g_lcd_yc:
 2144 0018 00000000 		.space	4
 2145              		.align	2
 2146              	g_ts_ready:
 2147 001c 00000000 		.space	4
 2148              		.align	2
 2149              	g_ts_raw_x:
 2150 0020 00000000 		.space	4
 2151              		.align	2
 2152              	g_ts_raw_y:
 2153 0024 00000000 		.space	4
 2154              		.align	2
 2155              	g_last_touch_time:
 2156 0028 00000000 		.space	4
 2157              		.text
 2158              		.align	2
 2159              		.global	TS_Test
 2161              	TS_Test:
 2162              	.LFB0:
   1:../Jaime/tp.c **** /*********************************************************************************************
   2:../Jaime/tp.c **** * File��	tp.c
   3:../Jaime/tp.c **** * Author:	embest	
   4:../Jaime/tp.c **** * Desc��	LCD touch screen control function
   5:../Jaime/tp.c **** * History:	
   6:../Jaime/tp.c **** *********************************************************************************************/
   7:../Jaime/tp.c **** 
   8:../Jaime/tp.c **** /*--- include files ---*/
   9:../Jaime/tp.c **** #include "tp.h"
  10:../Jaime/tp.c **** #include "lcd.h"
  11:../Jaime/tp.c **** #include "timer2.h"
  12:../Jaime/tp.c **** 
  13:../Jaime/tp.c **** void TSInt(void) __attribute__((interrupt("IRQ")));
  14:../Jaime/tp.c **** 
  15:../Jaime/tp.c **** /*===================================================================================
  16:../Jaime/tp.c ****  * VARIABLES GLOBALES DE CALIBRACIÓN (Método 5 puntos)
  17:../Jaime/tp.c ****  *===================================================================================*/
  18:../Jaime/tp.c **** static int g_swap_xy = 0;           // 1 si los ejes están intercambiados
  19:../Jaime/tp.c **** static long g_kx_fp;                // Factor de escala X en formato 16.16 fixed-point
  20:../Jaime/tp.c **** static long g_ky_fp;                // Factor de escala Y en formato 16.16 fixed-point
  21:../Jaime/tp.c **** static int g_ts_xc;                 // Centro X crudo del touch
  22:../Jaime/tp.c **** static int g_ts_yc;                 // Centro Y crudo del touch
  23:../Jaime/tp.c **** static int g_lcd_xc;                // Centro X del LCD
  24:../Jaime/tp.c **** static int g_lcd_yc;                // Centro Y del LCD
  25:../Jaime/tp.c **** static volatile int g_ts_ready = 0; // Flag para indicar que hay datos del touch
  26:../Jaime/tp.c **** static int g_ts_raw_x;              // Última lectura X cruda
  27:../Jaime/tp.c **** static int g_ts_raw_y;              // Última lectura Y cruda
  28:../Jaime/tp.c **** static unsigned int g_last_touch_time = 0;  // Último tiempo de toque válido (microsegundos)
  29:../Jaime/tp.c **** #define TOUCH_DEBOUNCE_TIME 300000  // Tiempo mínimo entre toques: 300ms = 300000us
  30:../Jaime/tp.c **** 
  31:../Jaime/tp.c **** void TS_Test(void)
  32:../Jaime/tp.c **** {
 2163              		.loc 1 32 0
 2164              		.cfi_startproc
 2165              		@ Function supports interworking.
 2166              		@ args = 0, pretend = 0, frame = 0
 2167              		@ frame_needed = 1, uses_anonymous_args = 0
 2168 0000 0DC0A0E1 		mov	ip, sp
 2169              	.LCFI0:
 2170              		.cfi_def_cfa_register 12
 2171 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2172 0008 04B04CE2 		sub	fp, ip, #4
 2173              		.cfi_offset 14, -8
 2174              		.cfi_offset 13, -12
 2175              		.cfi_offset 11, -16
 2176              	.LCFI1:
 2177              		.cfi_def_cfa 11, 4
  33:../Jaime/tp.c **** 		Lcd_TC();
 2178              		.loc 1 33 0
 2179 000c FEFFFFEB 		bl	Lcd_TC
  34:../Jaime/tp.c **** 		TS_init();
 2180              		.loc 1 34 0
 2181 0010 FEFFFFEB 		bl	TS_init
  35:../Jaime/tp.c **** 		Check_Sel();
 2182              		.loc 1 35 0
 2183 0014 FEFFFFEB 		bl	Check_Sel
  36:../Jaime/tp.c **** 			
  37:../Jaime/tp.c **** }
 2184              		.loc 1 37 0
 2185 0018 0CD04BE2 		sub	sp, fp, #12
 2186 001c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2187 0020 1EFF2FE1 		bx	lr
 2188              		.cfi_endproc
 2189              	.LFE0:
 2191              		.global	__aeabi_uidiv
 2192              		.align	2
 2193              		.global	TSInt
 2195              	TSInt:
 2196              	.LFB1:
  38:../Jaime/tp.c **** /*--- function code ---*/
  39:../Jaime/tp.c **** /*********************************************************************************************
  40:../Jaime/tp.c **** * name:		TSInt
  41:../Jaime/tp.c **** * func:		TouchScreen interrupt handler function
  42:../Jaime/tp.c **** * para:		none
  43:../Jaime/tp.c **** * ret:		none
  44:../Jaime/tp.c **** * modify:
  45:../Jaime/tp.c **** * comment:		
  46:../Jaime/tp.c **** ********************************************************************************************/
  47:../Jaime/tp.c **** void TSInt(void)
  48:../Jaime/tp.c **** {
 2197              		.loc 1 48 0
 2198              		.cfi_startproc
 2199              		@ Interrupt Service Routine.
 2200              		@ args = 0, pretend = 0, frame = 64
 2201              		@ frame_needed = 1, uses_anonymous_args = 0
 2202 0024 04C02DE5 		str	ip, [sp, #-4]!
 2203 0028 0DC0A0E1 		mov	ip, sp
 2204              	.LCFI2:
 2205              		.cfi_def_cfa_register 12
 2206 002c 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 2207 0030 04B04CE2 		sub	fp, ip, #4
 2208              		.cfi_offset 14, -8
 2209              		.cfi_offset 13, -12
 2210              		.cfi_offset 11, -16
 2211              		.cfi_offset 3, -20
 2212              		.cfi_offset 2, -24
 2213              		.cfi_offset 1, -28
 2214              		.cfi_offset 0, -32
 2215              	.LCFI3:
 2216              		.cfi_def_cfa 11, 4
 2217 0034 40D04DE2 		sub	sp, sp, #64
  49:../Jaime/tp.c ****     int   i, j;
  50:../Jaime/tp.c ****     ULONG tmp;
  51:../Jaime/tp.c ****     ULONG Pt[11];  /* Aumentado a 11 para almacenar 10 muestras + promedio */
  52:../Jaime/tp.c ****     ULONG swap;    /* Variable para ordenamiento */
  53:../Jaime/tp.c **** 
  54:../Jaime/tp.c **** 	// <X-Position Read>
  55:../Jaime/tp.c **** 	// TSPX(GPE4_Q4(+)) TSPY(GPE5_Q3(-)) TSMY(GPE6_Q2(+)) TSMX(GPE7_Q1(-))
  56:../Jaime/tp.c ****     //       0               1                 1                0
  57:../Jaime/tp.c **** 	rPDATE=0x68;
 2218              		.loc 1 57 0
 2219 0038 7C359FE5 		ldr	r3, .L23
 2220 003c 6820A0E3 		mov	r2, #104
 2221 0040 002083E5 		str	r2, [r3, #0]
  58:../Jaime/tp.c **** 	rADCCON=0x1<<2;			// AIN1
 2222              		.loc 1 58 0
 2223 0044 7537A0E3 		mov	r3, #30670848
 2224 0048 0420A0E3 		mov	r2, #4
 2225 004c 002083E5 		str	r2, [r3, #0]
  59:../Jaime/tp.c **** 	
  60:../Jaime/tp.c **** 	DelayTime(2000);                // delay más largo para mejor estabilización
 2226              		.loc 1 60 0
 2227 0050 7D0EA0E3 		mov	r0, #2000
 2228 0054 FEFFFFEB 		bl	DelayTime
  61:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2229              		.loc 1 61 0
 2230 0058 0030A0E3 		mov	r3, #0
 2231 005c 20300BE5 		str	r3, [fp, #-32]
 2232 0060 210000EA 		b	.L3
 2233              	.L6:
  62:../Jaime/tp.c **** 	{
  63:../Jaime/tp.c **** 		rADCCON |= 0x1;				// Start X-position A/D conversion
 2234              		.loc 1 63 0
 2235 0064 7537A0E3 		mov	r3, #30670848
 2236 0068 7527A0E3 		mov	r2, #30670848
 2237 006c 002092E5 		ldr	r2, [r2, #0]
 2238 0070 012082E3 		orr	r2, r2, #1
 2239 0074 002083E5 		str	r2, [r3, #0]
  64:../Jaime/tp.c **** 	    while( rADCCON & 0x1 );		// Check if Enable_start is low
 2240              		.loc 1 64 0
 2241 0078 0000A0E1 		mov	r0, r0	@ nop
 2242              	.L4:
 2243              		.loc 1 64 0 is_stmt 0 discriminator 1
 2244 007c 7537A0E3 		mov	r3, #30670848
 2245 0080 003093E5 		ldr	r3, [r3, #0]
 2246 0084 013003E2 		and	r3, r3, #1
 2247 0088 FF3003E2 		and	r3, r3, #255
 2248 008c 000053E3 		cmp	r3, #0
 2249 0090 F9FFFF1A 		bne	.L4
  65:../Jaime/tp.c ****     	while( !(rADCCON & 0x40) );	// Check ECFLG
 2250              		.loc 1 65 0 is_stmt 1
 2251 0094 0000A0E1 		mov	r0, r0	@ nop
 2252              	.L5:
 2253              		.loc 1 65 0 is_stmt 0 discriminator 1
 2254 0098 7537A0E3 		mov	r3, #30670848
 2255 009c 003093E5 		ldr	r3, [r3, #0]
 2256 00a0 403003E2 		and	r3, r3, #64
 2257 00a4 000053E3 		cmp	r3, #0
 2258 00a8 FAFFFF0A 		beq	.L5
  66:../Jaime/tp.c **** 	    Pt[i] = (0x3ff&rADCDAT);
 2259              		.loc 1 66 0 is_stmt 1
 2260 00ac 0C359FE5 		ldr	r3, .L23+4
 2261 00b0 003093E5 		ldr	r3, [r3, #0]
 2262 00b4 033BA0E1 		mov	r3, r3, asl #22
 2263 00b8 233BA0E1 		mov	r3, r3, lsr #22
 2264 00bc 20101BE5 		ldr	r1, [fp, #-32]
 2265 00c0 3B20E0E3 		mvn	r2, #59
 2266 00c4 0111A0E1 		mov	r1, r1, asl #2
 2267 00c8 1C004BE2 		sub	r0, fp, #28
 2268 00cc 011080E0 		add	r1, r0, r1
 2269 00d0 022081E0 		add	r2, r1, r2
 2270 00d4 003082E5 		str	r3, [r2, #0]
  67:../Jaime/tp.c **** 	    DelayTime(100);             // Pequeño delay entre lecturas
 2271              		.loc 1 67 0
 2272 00d8 6400A0E3 		mov	r0, #100
 2273 00dc FEFFFFEB 		bl	DelayTime
  61:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2274              		.loc 1 61 0
 2275 00e0 20301BE5 		ldr	r3, [fp, #-32]
 2276 00e4 013083E2 		add	r3, r3, #1
 2277 00e8 20300BE5 		str	r3, [fp, #-32]
 2278              	.L3:
  61:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2279              		.loc 1 61 0 is_stmt 0 discriminator 1
 2280 00ec 20301BE5 		ldr	r3, [fp, #-32]
 2281 00f0 090053E3 		cmp	r3, #9
 2282 00f4 DAFFFFDA 		ble	.L6
  68:../Jaime/tp.c **** 	}
  69:../Jaime/tp.c **** 	
  70:../Jaime/tp.c **** 	// Ordenar muestras para eliminar extremos (bubble sort simple)
  71:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2283              		.loc 1 71 0 is_stmt 1
 2284 00f8 0030A0E3 		mov	r3, #0
 2285 00fc 20300BE5 		str	r3, [fp, #-32]
 2286 0100 3E0000EA 		b	.L7
 2287              	.L11:
  72:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2288              		.loc 1 72 0
 2289 0104 0030A0E3 		mov	r3, #0
 2290 0108 24300BE5 		str	r3, [fp, #-36]
 2291 010c 330000EA 		b	.L8
 2292              	.L10:
  73:../Jaime/tp.c **** 	        if (Pt[j] > Pt[j + 1]) {
 2293              		.loc 1 73 0
 2294 0110 24201BE5 		ldr	r2, [fp, #-36]
 2295 0114 3B30E0E3 		mvn	r3, #59
 2296 0118 0221A0E1 		mov	r2, r2, asl #2
 2297 011c 1C104BE2 		sub	r1, fp, #28
 2298 0120 022081E0 		add	r2, r1, r2
 2299 0124 033082E0 		add	r3, r2, r3
 2300 0128 002093E5 		ldr	r2, [r3, #0]
 2301 012c 24301BE5 		ldr	r3, [fp, #-36]
 2302 0130 011083E2 		add	r1, r3, #1
 2303 0134 3B30E0E3 		mvn	r3, #59
 2304 0138 0111A0E1 		mov	r1, r1, asl #2
 2305 013c 1C004BE2 		sub	r0, fp, #28
 2306 0140 011080E0 		add	r1, r0, r1
 2307 0144 033081E0 		add	r3, r1, r3
 2308 0148 003093E5 		ldr	r3, [r3, #0]
 2309 014c 030052E1 		cmp	r2, r3
 2310 0150 1F00009A 		bls	.L9
  74:../Jaime/tp.c **** 	            swap = Pt[j];
 2311              		.loc 1 74 0
 2312 0154 24201BE5 		ldr	r2, [fp, #-36]
 2313 0158 3B30E0E3 		mvn	r3, #59
 2314 015c 0221A0E1 		mov	r2, r2, asl #2
 2315 0160 1C104BE2 		sub	r1, fp, #28
 2316 0164 022081E0 		add	r2, r1, r2
 2317 0168 033082E0 		add	r3, r2, r3
 2318 016c 003093E5 		ldr	r3, [r3, #0]
 2319 0170 2C300BE5 		str	r3, [fp, #-44]
  75:../Jaime/tp.c **** 	            Pt[j] = Pt[j + 1];
 2320              		.loc 1 75 0
 2321 0174 24301BE5 		ldr	r3, [fp, #-36]
 2322 0178 012083E2 		add	r2, r3, #1
 2323 017c 3B30E0E3 		mvn	r3, #59
 2324 0180 0221A0E1 		mov	r2, r2, asl #2
 2325 0184 1C004BE2 		sub	r0, fp, #28
 2326 0188 022080E0 		add	r2, r0, r2
 2327 018c 033082E0 		add	r3, r2, r3
 2328 0190 002093E5 		ldr	r2, [r3, #0]
 2329 0194 24101BE5 		ldr	r1, [fp, #-36]
 2330 0198 3B30E0E3 		mvn	r3, #59
 2331 019c 0111A0E1 		mov	r1, r1, asl #2
 2332 01a0 1C004BE2 		sub	r0, fp, #28
 2333 01a4 011080E0 		add	r1, r0, r1
 2334 01a8 033081E0 		add	r3, r1, r3
 2335 01ac 002083E5 		str	r2, [r3, #0]
  76:../Jaime/tp.c **** 	            Pt[j + 1] = swap;
 2336              		.loc 1 76 0
 2337 01b0 24301BE5 		ldr	r3, [fp, #-36]
 2338 01b4 012083E2 		add	r2, r3, #1
 2339 01b8 3B30E0E3 		mvn	r3, #59
 2340 01bc 0221A0E1 		mov	r2, r2, asl #2
 2341 01c0 1C104BE2 		sub	r1, fp, #28
 2342 01c4 022081E0 		add	r2, r1, r2
 2343 01c8 033082E0 		add	r3, r2, r3
 2344 01cc 2C201BE5 		ldr	r2, [fp, #-44]
 2345 01d0 002083E5 		str	r2, [r3, #0]
 2346              	.L9:
  72:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2347              		.loc 1 72 0
 2348 01d4 24301BE5 		ldr	r3, [fp, #-36]
 2349 01d8 013083E2 		add	r3, r3, #1
 2350 01dc 24300BE5 		str	r3, [fp, #-36]
 2351              	.L8:
  72:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2352              		.loc 1 72 0 is_stmt 0 discriminator 1
 2353 01e0 20301BE5 		ldr	r3, [fp, #-32]
 2354 01e4 092063E2 		rsb	r2, r3, #9
 2355 01e8 24301BE5 		ldr	r3, [fp, #-36]
 2356 01ec 030052E1 		cmp	r2, r3
 2357 01f0 C6FFFFCA 		bgt	.L10
  71:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2358              		.loc 1 71 0 is_stmt 1
 2359 01f4 20301BE5 		ldr	r3, [fp, #-32]
 2360 01f8 013083E2 		add	r3, r3, #1
 2361 01fc 20300BE5 		str	r3, [fp, #-32]
 2362              	.L7:
  71:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2363              		.loc 1 71 0 is_stmt 0 discriminator 1
 2364 0200 20301BE5 		ldr	r3, [fp, #-32]
 2365 0204 080053E3 		cmp	r3, #8
 2366 0208 BDFFFFDA 		ble	.L11
  77:../Jaime/tp.c **** 	        }
  78:../Jaime/tp.c **** 	    }
  79:../Jaime/tp.c **** 	}
  80:../Jaime/tp.c **** 	// Promedio de las 6 muestras centrales (descartando 2 máximas y 2 mínimas)
  81:../Jaime/tp.c **** 	Pt[10] = (Pt[2] + Pt[3] + Pt[4] + Pt[5] + Pt[6] + Pt[7]) / 6;
 2367              		.loc 1 81 0 is_stmt 1
 2368 020c 50201BE5 		ldr	r2, [fp, #-80]
 2369 0210 4C301BE5 		ldr	r3, [fp, #-76]
 2370 0214 032082E0 		add	r2, r2, r3
 2371 0218 48301BE5 		ldr	r3, [fp, #-72]
 2372 021c 032082E0 		add	r2, r2, r3
 2373 0220 44301BE5 		ldr	r3, [fp, #-68]
 2374 0224 032082E0 		add	r2, r2, r3
 2375 0228 40301BE5 		ldr	r3, [fp, #-64]
 2376 022c 032082E0 		add	r2, r2, r3
 2377 0230 3C301BE5 		ldr	r3, [fp, #-60]
 2378 0234 032082E0 		add	r2, r2, r3
 2379 0238 84339FE5 		ldr	r3, .L23+8
 2380 023c 920383E0 		umull	r0, r3, r2, r3
 2381 0240 2331A0E1 		mov	r3, r3, lsr #2
 2382 0244 30300BE5 		str	r3, [fp, #-48]
  82:../Jaime/tp.c **** 	
  83:../Jaime/tp.c **** 	tmp = Pt[10];	
 2383              		.loc 1 83 0
 2384 0248 30301BE5 		ldr	r3, [fp, #-48]
 2385 024c 28300BE5 		str	r3, [fp, #-40]
  84:../Jaime/tp.c **** 	
  85:../Jaime/tp.c ****     // <Y-Position Read>
  86:../Jaime/tp.c **** 	// TSPX(GPE4_Q4(-)) TSPY(GPE5_Q3(+)) TSMY(GPE6_Q2(-)) TSMX(GPE7_Q1(+))
  87:../Jaime/tp.c ****     //       1               0                 0                1
  88:../Jaime/tp.c **** 	rPDATE=0x98;
 2386              		.loc 1 88 0
 2387 0250 64339FE5 		ldr	r3, .L23
 2388 0254 9820A0E3 		mov	r2, #152
 2389 0258 002083E5 		str	r2, [r3, #0]
  89:../Jaime/tp.c **** 	rADCCON=0x0<<2;		        	// AIN0
 2390              		.loc 1 89 0
 2391 025c 7537A0E3 		mov	r3, #30670848
 2392 0260 0020A0E3 		mov	r2, #0
 2393 0264 002083E5 		str	r2, [r3, #0]
  90:../Jaime/tp.c **** 	
  91:../Jaime/tp.c **** 	DelayTime(2000);                // delay más largo para mejor estabilización
 2394              		.loc 1 91 0
 2395 0268 7D0EA0E3 		mov	r0, #2000
 2396 026c FEFFFFEB 		bl	DelayTime
  92:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2397              		.loc 1 92 0
 2398 0270 0030A0E3 		mov	r3, #0
 2399 0274 20300BE5 		str	r3, [fp, #-32]
 2400 0278 210000EA 		b	.L12
 2401              	.L15:
  93:../Jaime/tp.c **** 	{
  94:../Jaime/tp.c ****     	rADCCON |= 0x1;             // Start Y-position conversion
 2402              		.loc 1 94 0
 2403 027c 7537A0E3 		mov	r3, #30670848
 2404 0280 7527A0E3 		mov	r2, #30670848
 2405 0284 002092E5 		ldr	r2, [r2, #0]
 2406 0288 012082E3 		orr	r2, r2, #1
 2407 028c 002083E5 		str	r2, [r3, #0]
  95:../Jaime/tp.c **** 	    while( rADCCON & 0x1 );     // Check if Enable_start is low
 2408              		.loc 1 95 0
 2409 0290 0000A0E1 		mov	r0, r0	@ nop
 2410              	.L13:
 2411              		.loc 1 95 0 is_stmt 0 discriminator 1
 2412 0294 7537A0E3 		mov	r3, #30670848
 2413 0298 003093E5 		ldr	r3, [r3, #0]
 2414 029c 013003E2 		and	r3, r3, #1
 2415 02a0 FF3003E2 		and	r3, r3, #255
 2416 02a4 000053E3 		cmp	r3, #0
 2417 02a8 F9FFFF1A 		bne	.L13
  96:../Jaime/tp.c ****     	while( !(rADCCON & 0x40) ); // Check ECFLG
 2418              		.loc 1 96 0 is_stmt 1
 2419 02ac 0000A0E1 		mov	r0, r0	@ nop
 2420              	.L14:
 2421              		.loc 1 96 0 is_stmt 0 discriminator 1
 2422 02b0 7537A0E3 		mov	r3, #30670848
 2423 02b4 003093E5 		ldr	r3, [r3, #0]
 2424 02b8 403003E2 		and	r3, r3, #64
 2425 02bc 000053E3 		cmp	r3, #0
 2426 02c0 FAFFFF0A 		beq	.L14
  97:../Jaime/tp.c **** 	    Pt[i] = (0x3ff&rADCDAT);
 2427              		.loc 1 97 0 is_stmt 1
 2428 02c4 F4329FE5 		ldr	r3, .L23+4
 2429 02c8 003093E5 		ldr	r3, [r3, #0]
 2430 02cc 033BA0E1 		mov	r3, r3, asl #22
 2431 02d0 233BA0E1 		mov	r3, r3, lsr #22
 2432 02d4 20101BE5 		ldr	r1, [fp, #-32]
 2433 02d8 3B20E0E3 		mvn	r2, #59
 2434 02dc 0111A0E1 		mov	r1, r1, asl #2
 2435 02e0 1C004BE2 		sub	r0, fp, #28
 2436 02e4 011080E0 		add	r1, r0, r1
 2437 02e8 022081E0 		add	r2, r1, r2
 2438 02ec 003082E5 		str	r3, [r2, #0]
  98:../Jaime/tp.c **** 	    DelayTime(100);             // Pequeño delay entre lecturas
 2439              		.loc 1 98 0
 2440 02f0 6400A0E3 		mov	r0, #100
 2441 02f4 FEFFFFEB 		bl	DelayTime
  92:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2442              		.loc 1 92 0
 2443 02f8 20301BE5 		ldr	r3, [fp, #-32]
 2444 02fc 013083E2 		add	r3, r3, #1
 2445 0300 20300BE5 		str	r3, [fp, #-32]
 2446              	.L12:
  92:../Jaime/tp.c **** 	for( i=0; i<10; i++ )
 2447              		.loc 1 92 0 is_stmt 0 discriminator 1
 2448 0304 20301BE5 		ldr	r3, [fp, #-32]
 2449 0308 090053E3 		cmp	r3, #9
 2450 030c DAFFFFDA 		ble	.L15
  99:../Jaime/tp.c **** 	}
 100:../Jaime/tp.c **** 	
 101:../Jaime/tp.c **** 	// Ordenar muestras para eliminar extremos
 102:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2451              		.loc 1 102 0 is_stmt 1
 2452 0310 0030A0E3 		mov	r3, #0
 2453 0314 20300BE5 		str	r3, [fp, #-32]
 2454 0318 3E0000EA 		b	.L16
 2455              	.L20:
 103:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2456              		.loc 1 103 0
 2457 031c 0030A0E3 		mov	r3, #0
 2458 0320 24300BE5 		str	r3, [fp, #-36]
 2459 0324 330000EA 		b	.L17
 2460              	.L19:
 104:../Jaime/tp.c **** 	        if (Pt[j] > Pt[j + 1]) {
 2461              		.loc 1 104 0
 2462 0328 24201BE5 		ldr	r2, [fp, #-36]
 2463 032c 3B30E0E3 		mvn	r3, #59
 2464 0330 0221A0E1 		mov	r2, r2, asl #2
 2465 0334 1C104BE2 		sub	r1, fp, #28
 2466 0338 022081E0 		add	r2, r1, r2
 2467 033c 033082E0 		add	r3, r2, r3
 2468 0340 002093E5 		ldr	r2, [r3, #0]
 2469 0344 24301BE5 		ldr	r3, [fp, #-36]
 2470 0348 011083E2 		add	r1, r3, #1
 2471 034c 3B30E0E3 		mvn	r3, #59
 2472 0350 0111A0E1 		mov	r1, r1, asl #2
 2473 0354 1C004BE2 		sub	r0, fp, #28
 2474 0358 011080E0 		add	r1, r0, r1
 2475 035c 033081E0 		add	r3, r1, r3
 2476 0360 003093E5 		ldr	r3, [r3, #0]
 2477 0364 030052E1 		cmp	r2, r3
 2478 0368 1F00009A 		bls	.L18
 105:../Jaime/tp.c **** 	            swap = Pt[j];
 2479              		.loc 1 105 0
 2480 036c 24201BE5 		ldr	r2, [fp, #-36]
 2481 0370 3B30E0E3 		mvn	r3, #59
 2482 0374 0221A0E1 		mov	r2, r2, asl #2
 2483 0378 1C104BE2 		sub	r1, fp, #28
 2484 037c 022081E0 		add	r2, r1, r2
 2485 0380 033082E0 		add	r3, r2, r3
 2486 0384 003093E5 		ldr	r3, [r3, #0]
 2487 0388 2C300BE5 		str	r3, [fp, #-44]
 106:../Jaime/tp.c **** 	            Pt[j] = Pt[j + 1];
 2488              		.loc 1 106 0
 2489 038c 24301BE5 		ldr	r3, [fp, #-36]
 2490 0390 012083E2 		add	r2, r3, #1
 2491 0394 3B30E0E3 		mvn	r3, #59
 2492 0398 0221A0E1 		mov	r2, r2, asl #2
 2493 039c 1C004BE2 		sub	r0, fp, #28
 2494 03a0 022080E0 		add	r2, r0, r2
 2495 03a4 033082E0 		add	r3, r2, r3
 2496 03a8 002093E5 		ldr	r2, [r3, #0]
 2497 03ac 24101BE5 		ldr	r1, [fp, #-36]
 2498 03b0 3B30E0E3 		mvn	r3, #59
 2499 03b4 0111A0E1 		mov	r1, r1, asl #2
 2500 03b8 1C004BE2 		sub	r0, fp, #28
 2501 03bc 011080E0 		add	r1, r0, r1
 2502 03c0 033081E0 		add	r3, r1, r3
 2503 03c4 002083E5 		str	r2, [r3, #0]
 107:../Jaime/tp.c **** 	            Pt[j + 1] = swap;
 2504              		.loc 1 107 0
 2505 03c8 24301BE5 		ldr	r3, [fp, #-36]
 2506 03cc 012083E2 		add	r2, r3, #1
 2507 03d0 3B30E0E3 		mvn	r3, #59
 2508 03d4 0221A0E1 		mov	r2, r2, asl #2
 2509 03d8 1C104BE2 		sub	r1, fp, #28
 2510 03dc 022081E0 		add	r2, r1, r2
 2511 03e0 033082E0 		add	r3, r2, r3
 2512 03e4 2C201BE5 		ldr	r2, [fp, #-44]
 2513 03e8 002083E5 		str	r2, [r3, #0]
 2514              	.L18:
 103:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2515              		.loc 1 103 0
 2516 03ec 24301BE5 		ldr	r3, [fp, #-36]
 2517 03f0 013083E2 		add	r3, r3, #1
 2518 03f4 24300BE5 		str	r3, [fp, #-36]
 2519              	.L17:
 103:../Jaime/tp.c **** 	    for (j = 0; j < 9 - i; j++) {
 2520              		.loc 1 103 0 is_stmt 0 discriminator 1
 2521 03f8 20301BE5 		ldr	r3, [fp, #-32]
 2522 03fc 092063E2 		rsb	r2, r3, #9
 2523 0400 24301BE5 		ldr	r3, [fp, #-36]
 2524 0404 030052E1 		cmp	r2, r3
 2525 0408 C6FFFFCA 		bgt	.L19
 102:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2526              		.loc 1 102 0 is_stmt 1
 2527 040c 20301BE5 		ldr	r3, [fp, #-32]
 2528 0410 013083E2 		add	r3, r3, #1
 2529 0414 20300BE5 		str	r3, [fp, #-32]
 2530              	.L16:
 102:../Jaime/tp.c **** 	for (i = 0; i < 9; i++) {
 2531              		.loc 1 102 0 is_stmt 0 discriminator 1
 2532 0418 20301BE5 		ldr	r3, [fp, #-32]
 2533 041c 080053E3 		cmp	r3, #8
 2534 0420 BDFFFFDA 		ble	.L20
 108:../Jaime/tp.c **** 	        }
 109:../Jaime/tp.c **** 	    }
 110:../Jaime/tp.c **** 	}
 111:../Jaime/tp.c **** 	// Promedio de las 6 muestras centrales (descartando 2 máximas y 2 mínimas)
 112:../Jaime/tp.c **** 	Pt[10] = (Pt[2] + Pt[3] + Pt[4] + Pt[5] + Pt[6] + Pt[7]) / 6;
 2535              		.loc 1 112 0 is_stmt 1
 2536 0424 50201BE5 		ldr	r2, [fp, #-80]
 2537 0428 4C301BE5 		ldr	r3, [fp, #-76]
 2538 042c 032082E0 		add	r2, r2, r3
 2539 0430 48301BE5 		ldr	r3, [fp, #-72]
 2540 0434 032082E0 		add	r2, r2, r3
 2541 0438 44301BE5 		ldr	r3, [fp, #-68]
 2542 043c 032082E0 		add	r2, r2, r3
 2543 0440 40301BE5 		ldr	r3, [fp, #-64]
 2544 0444 032082E0 		add	r2, r2, r3
 2545 0448 3C301BE5 		ldr	r3, [fp, #-60]
 2546 044c 032082E0 		add	r2, r2, r3
 2547 0450 6C319FE5 		ldr	r3, .L23+8
 2548 0454 920383E0 		umull	r0, r3, r2, r3
 2549 0458 2331A0E1 		mov	r3, r3, lsr #2
 2550 045c 30300BE5 		str	r3, [fp, #-48]
 113:../Jaime/tp.c **** 	
 114:../Jaime/tp.c **** 	// Reportar coordenadas crudas para calibración
 115:../Jaime/tp.c **** 	report_touch_data(tmp, Pt[10]);
 2551              		.loc 1 115 0
 2552 0460 28201BE5 		ldr	r2, [fp, #-40]
 2553 0464 30301BE5 		ldr	r3, [fp, #-48]
 2554 0468 0200A0E1 		mov	r0, r2
 2555 046c 0310A0E1 		mov	r1, r3
 2556 0470 FEFFFFEB 		bl	report_touch_data
 116:../Jaime/tp.c ****      
 117:../Jaime/tp.c **** 	if(!(CheckTSP || (tmp < Xmin) || (tmp > Xmax) || (Pt[10] < Ymin) || (Pt[10] > Ymax)))   // Is vali
 2557              		.loc 1 117 0
 2558 0474 4C319FE5 		ldr	r3, .L23+12
 2559 0478 003093E5 		ldr	r3, [r3, #0]
 2560 047c 000053E3 		cmp	r3, #0
 2561 0480 3900001A 		bne	.L21
 2562              		.loc 1 117 0 is_stmt 0 discriminator 1
 2563 0484 40319FE5 		ldr	r3, .L23+16
 2564 0488 003093E5 		ldr	r3, [r3, #0]
 2565 048c 28201BE5 		ldr	r2, [fp, #-40]
 2566 0490 030052E1 		cmp	r2, r3
 2567 0494 3400003A 		bcc	.L21
 2568 0498 30319FE5 		ldr	r3, .L23+20
 2569 049c 003093E5 		ldr	r3, [r3, #0]
 2570 04a0 28201BE5 		ldr	r2, [fp, #-40]
 2571 04a4 030052E1 		cmp	r2, r3
 2572 04a8 2F00008A 		bhi	.L21
 2573 04ac 30201BE5 		ldr	r2, [fp, #-48]
 2574 04b0 1C319FE5 		ldr	r3, .L23+24
 2575 04b4 003093E5 		ldr	r3, [r3, #0]
 2576 04b8 030052E1 		cmp	r2, r3
 2577 04bc 2A00003A 		bcc	.L21
 2578 04c0 30201BE5 		ldr	r2, [fp, #-48]
 2579 04c4 0C319FE5 		ldr	r3, .L23+28
 2580 04c8 003093E5 		ldr	r3, [r3, #0]
 2581 04cc 030052E1 		cmp	r2, r3
 2582 04d0 2500008A 		bhi	.L21
 118:../Jaime/tp.c **** 	  {
 119:../Jaime/tp.c **** 		tmp = 320*(tmp - Xmin)/(Xmax - Xmin);   // X - position
 2583              		.loc 1 119 0 is_stmt 1
 2584 04d4 F0309FE5 		ldr	r3, .L23+16
 2585 04d8 003093E5 		ldr	r3, [r3, #0]
 2586 04dc 28201BE5 		ldr	r2, [fp, #-40]
 2587 04e0 022063E0 		rsb	r2, r3, r2
 2588 04e4 0230A0E1 		mov	r3, r2
 2589 04e8 0331A0E1 		mov	r3, r3, asl #2
 2590 04ec 023083E0 		add	r3, r3, r2
 2591 04f0 0333A0E1 		mov	r3, r3, asl #6
 2592 04f4 0320A0E1 		mov	r2, r3
 2593 04f8 D0309FE5 		ldr	r3, .L23+20
 2594 04fc 001093E5 		ldr	r1, [r3, #0]
 2595 0500 C4309FE5 		ldr	r3, .L23+16
 2596 0504 003093E5 		ldr	r3, [r3, #0]
 2597 0508 013063E0 		rsb	r3, r3, r1
 2598 050c 0200A0E1 		mov	r0, r2
 2599 0510 0310A0E1 		mov	r1, r3
 2600 0514 FEFFFFEB 		bl	__aeabi_uidiv
 2601 0518 0030A0E1 		mov	r3, r0
 2602 051c 28300BE5 		str	r3, [fp, #-40]
 120:../Jaime/tp.c **** 		Pt[10] = 240*(Pt[10] - Xmin)/(Ymax - Ymin);
 2603              		.loc 1 120 0
 2604 0520 30201BE5 		ldr	r2, [fp, #-48]
 2605 0524 A0309FE5 		ldr	r3, .L23+16
 2606 0528 003093E5 		ldr	r3, [r3, #0]
 2607 052c 022063E0 		rsb	r2, r3, r2
 2608 0530 0230A0E1 		mov	r3, r2
 2609 0534 0332A0E1 		mov	r3, r3, asl #4
 2610 0538 033062E0 		rsb	r3, r2, r3
 2611 053c 0332A0E1 		mov	r3, r3, asl #4
 2612 0540 0320A0E1 		mov	r2, r3
 2613 0544 8C309FE5 		ldr	r3, .L23+28
 2614 0548 001093E5 		ldr	r1, [r3, #0]
 2615 054c 80309FE5 		ldr	r3, .L23+24
 2616 0550 003093E5 		ldr	r3, [r3, #0]
 2617 0554 013063E0 		rsb	r3, r3, r1
 2618 0558 0200A0E1 		mov	r0, r2
 2619 055c 0310A0E1 		mov	r1, r3
 2620 0560 FEFFFFEB 		bl	__aeabi_uidiv
 2621 0564 0030A0E1 		mov	r3, r0
 2622 0568 30300BE5 		str	r3, [fp, #-48]
 2623              	.L21:
 121:../Jaime/tp.c ****       }
 122:../Jaime/tp.c **** 
 123:../Jaime/tp.c ****     if(CheckTSP)
 2624              		.loc 1 123 0
 2625 056c 54309FE5 		ldr	r3, .L23+12
 2626 0570 003093E5 		ldr	r3, [r3, #0]
 2627 0574 000053E3 		cmp	r3, #0
 2628 0578 0300000A 		beq	.L22
 124:../Jaime/tp.c ****  	/*----------- check to ensure Xmax Ymax Xmin Ymin ------------*/
 125:../Jaime/tp.c ****  	    DesignREC(tmp,Pt[5]);
 2629              		.loc 1 125 0
 2630 057c 44301BE5 		ldr	r3, [fp, #-68]
 2631 0580 28001BE5 		ldr	r0, [fp, #-40]
 2632 0584 0310A0E1 		mov	r1, r3
 2633 0588 FEFFFFEB 		bl	DesignREC
 2634              	.L22:
 126:../Jaime/tp.c **** 
 127:../Jaime/tp.c **** 	rPDATE = 0xb8;                  // should be enabled	
 2635              		.loc 1 127 0
 2636 058c 28309FE5 		ldr	r3, .L23
 2637 0590 B820A0E3 		mov	r2, #184
 2638 0594 002083E5 		str	r2, [r3, #0]
 128:../Jaime/tp.c **** 	DelayTime(3000);                // delay to set up the next channel	
 2639              		.loc 1 128 0
 2640 0598 3C009FE5 		ldr	r0, .L23+32
 2641 059c FEFFFFEB 		bl	DelayTime
 129:../Jaime/tp.c **** 
 130:../Jaime/tp.c ****     rI_ISPC = BIT_EINT2;            // clear pending_bit
 2642              		.loc 1 130 0
 2643 05a0 38309FE5 		ldr	r3, .L23+36
 2644 05a4 0225A0E3 		mov	r2, #8388608
 2645 05a8 002083E5 		str	r2, [r3, #0]
 131:../Jaime/tp.c **** }
 2646              		.loc 1 131 0
 2647 05ac 1CD04BE2 		sub	sp, fp, #28
 2648 05b0 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 2649 05b4 04C09DE4 		ldmfd	sp!, {ip}
 2650 05b8 04F05EE2 		subs	pc, lr, #4
 2651              	.L24:
 2652              		.align	2
 2653              	.L23:
 2654 05bc 2C00D201 		.word	30539820
 2655 05c0 0800D401 		.word	30670856
 2656 05c4 ABAAAAAA 		.word	-1431655765
 2657 05c8 00000000 		.word	CheckTSP
 2658 05cc 00000000 		.word	Xmin
 2659 05d0 00000000 		.word	Xmax
 2660 05d4 00000000 		.word	Ymin
 2661 05d8 00000000 		.word	Ymax
 2662 05dc B80B0000 		.word	3000
 2663 05e0 2400E001 		.word	31457316
 2664              		.cfi_endproc
 2665              	.LFE1:
 2667              		.align	2
 2668              		.global	TS_init
 2670              	TS_init:
 2671              	.LFB2:
 132:../Jaime/tp.c **** 			
 133:../Jaime/tp.c **** /*********************************************************************************************
 134:../Jaime/tp.c **** * name:		TS_init
 135:../Jaime/tp.c **** * func:		initialize TouchScreen
 136:../Jaime/tp.c **** * para:		none
 137:../Jaime/tp.c **** * ret:		none
 138:../Jaime/tp.c **** * modify:
 139:../Jaime/tp.c **** * comment:		
 140:../Jaime/tp.c **** *********************************************************************************************/
 141:../Jaime/tp.c **** void TS_init(void)
 142:../Jaime/tp.c **** {
 2672              		.loc 1 142 0
 2673              		.cfi_startproc
 2674              		@ Function supports interworking.
 2675              		@ args = 0, pretend = 0, frame = 0
 2676              		@ frame_needed = 1, uses_anonymous_args = 0
 2677 05e4 0DC0A0E1 		mov	ip, sp
 2678              	.LCFI4:
 2679              		.cfi_def_cfa_register 12
 2680 05e8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2681 05ec 04B04CE2 		sub	fp, ip, #4
 2682              		.cfi_offset 14, -8
 2683              		.cfi_offset 13, -12
 2684              		.cfi_offset 11, -16
 2685              	.LCFI5:
 2686              		.cfi_def_cfa 11, 4
 143:../Jaime/tp.c ****     /* enable interrupt */
 144:../Jaime/tp.c **** 	rINTMOD=0x0;
 2687              		.loc 1 144 0
 2688 05f0 A8309FE5 		ldr	r3, .L26
 2689 05f4 0020A0E3 		mov	r2, #0
 2690 05f8 002083E5 		str	r2, [r3, #0]
 145:../Jaime/tp.c **** 	rINTCON=0x1;
 2691              		.loc 1 145 0
 2692 05fc 1E36A0E3 		mov	r3, #31457280
 2693 0600 0120A0E3 		mov	r2, #1
 2694 0604 002083E5 		str	r2, [r3, #0]
 146:../Jaime/tp.c ****     rI_ISPC |= BIT_EINT2;            // clear pending_bit
 2695              		.loc 1 146 0
 2696 0608 94309FE5 		ldr	r3, .L26+4
 2697 060c 90209FE5 		ldr	r2, .L26+4
 2698 0610 002092E5 		ldr	r2, [r2, #0]
 2699 0614 022582E3 		orr	r2, r2, #8388608
 2700 0618 002083E5 		str	r2, [r3, #0]
 147:../Jaime/tp.c **** 	
 148:../Jaime/tp.c **** 	// TSPX(GPE4_Q4(-)) TSPY(GPE5_Q3(-)) TSMY(GPE6_Q2(-)) TSMX(GPE7_Q1(+)) 
 149:../Jaime/tp.c **** 	//          1               1                0                 1
 150:../Jaime/tp.c ****     rPUPE  = 0x0;	                 // Pull up
 2701              		.loc 1 150 0
 2702 061c 84309FE5 		ldr	r3, .L26+8
 2703 0620 0020A0E3 		mov	r2, #0
 2704 0624 002083E5 		str	r2, [r3, #0]
 151:../Jaime/tp.c ****     rPDATE = 0xb8;                   // should be enabled	
 2705              		.loc 1 151 0
 2706 0628 7C309FE5 		ldr	r3, .L26+12
 2707 062c B820A0E3 		mov	r2, #184
 2708 0630 002083E5 		str	r2, [r3, #0]
 152:../Jaime/tp.c ****     DelayTime(100); 
 2709              		.loc 1 152 0
 2710 0634 6400A0E3 		mov	r0, #100
 2711 0638 FEFFFFEB 		bl	DelayTime
 153:../Jaime/tp.c ****     
 154:../Jaime/tp.c ****     rEXTINT |= 0x200;                // falling edge trigger
 2712              		.loc 1 154 0
 2713 063c 6C309FE5 		ldr	r3, .L26+16
 2714 0640 68209FE5 		ldr	r2, .L26+16
 2715 0644 002092E5 		ldr	r2, [r2, #0]
 2716 0648 022C82E3 		orr	r2, r2, #512
 2717 064c 002083E5 		str	r2, [r3, #0]
 155:../Jaime/tp.c ****     pISR_EINT2=(unsigned)TSInt;       // set interrupt handler
 2718              		.loc 1 155 0
 2719 0650 5C309FE5 		ldr	r3, .L26+20
 2720 0654 5C209FE5 		ldr	r2, .L26+24
 2721 0658 002083E5 		str	r2, [r3, #0]
 156:../Jaime/tp.c ****     
 157:../Jaime/tp.c ****     rCLKCON = 0x7ff8;                // enable clock
 2722              		.loc 1 157 0
 2723 065c 58309FE5 		ldr	r3, .L26+28
 2724 0660 58209FE5 		ldr	r2, .L26+32
 2725 0664 002083E5 		str	r2, [r3, #0]
 158:../Jaime/tp.c ****     rADCPSR = 0x1;//0x4;             // A/D prescaler
 2726              		.loc 1 158 0
 2727 0668 54309FE5 		ldr	r3, .L26+36
 2728 066c 0120A0E3 		mov	r2, #1
 2729 0670 002083E5 		str	r2, [r3, #0]
 159:../Jaime/tp.c ****     rINTMSK &= ~(BIT_EINT2);
 2730              		.loc 1 159 0
 2731 0674 4C309FE5 		ldr	r3, .L26+40
 2732 0678 48209FE5 		ldr	r2, .L26+40
 2733 067c 002092E5 		ldr	r2, [r2, #0]
 2734 0680 0225C2E3 		bic	r2, r2, #8388608
 2735 0684 002083E5 		str	r2, [r3, #0]
 160:../Jaime/tp.c **** 
 161:../Jaime/tp.c ****     oneTouch = 0;
 2736              		.loc 1 161 0
 2737 0688 3C309FE5 		ldr	r3, .L26+44
 2738 068c 0020A0E3 		mov	r2, #0
 2739 0690 002083E5 		str	r2, [r3, #0]
 162:../Jaime/tp.c **** }
 2740              		.loc 1 162 0
 2741 0694 0CD04BE2 		sub	sp, fp, #12
 2742 0698 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2743 069c 1EFF2FE1 		bx	lr
 2744              	.L27:
 2745              		.align	2
 2746              	.L26:
 2747 06a0 0800E001 		.word	31457288
 2748 06a4 2400E001 		.word	31457316
 2749 06a8 3000D201 		.word	30539824
 2750 06ac 2C00D201 		.word	30539820
 2751 06b0 5000D201 		.word	30539856
 2752 06b4 7CFF7F0C 		.word	209715068
 2753 06b8 00000000 		.word	TSInt
 2754 06bc 0400D801 		.word	30932996
 2755 06c0 F87F0000 		.word	32760
 2756 06c4 0400D401 		.word	30670852
 2757 06c8 0C00E001 		.word	31457292
 2758 06cc 00000000 		.word	oneTouch
 2759              		.cfi_endproc
 2760              	.LFE2:
 2762              		.align	2
 2763              		.global	TS_close
 2765              	TS_close:
 2766              	.LFB3:
 163:../Jaime/tp.c **** 
 164:../Jaime/tp.c **** /*********************************************************************************************
 165:../Jaime/tp.c **** * name:		TS_close
 166:../Jaime/tp.c **** * func:		close TouchScreen
 167:../Jaime/tp.c **** * para:		none
 168:../Jaime/tp.c **** * ret:		none
 169:../Jaime/tp.c **** * modify:
 170:../Jaime/tp.c **** * comment:		
 171:../Jaime/tp.c **** *********************************************************************************************/
 172:../Jaime/tp.c **** void TS_close(void)
 173:../Jaime/tp.c **** {
 2767              		.loc 1 173 0
 2768              		.cfi_startproc
 2769              		@ Function supports interworking.
 2770              		@ args = 0, pretend = 0, frame = 0
 2771              		@ frame_needed = 1, uses_anonymous_args = 0
 2772 06d0 0DC0A0E1 		mov	ip, sp
 2773              	.LCFI6:
 2774              		.cfi_def_cfa_register 12
 2775 06d4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2776 06d8 04B04CE2 		sub	fp, ip, #4
 2777              		.cfi_offset 14, -8
 2778              		.cfi_offset 13, -12
 2779              		.cfi_offset 11, -16
 2780              	.LCFI7:
 2781              		.cfi_def_cfa 11, 4
 174:../Jaime/tp.c **** 	/* Mask interrupt */
 175:../Jaime/tp.c **** 	rINTMSK |=BIT_GLOBAL|BIT_EINT2;
 2782              		.loc 1 175 0
 2783 06dc 24309FE5 		ldr	r3, .L29
 2784 06e0 20209FE5 		ldr	r2, .L29
 2785 06e4 002092E5 		ldr	r2, [r2, #0]
 2786 06e8 122582E3 		orr	r2, r2, #75497472
 2787 06ec 002083E5 		str	r2, [r3, #0]
 176:../Jaime/tp.c **** 	pISR_EINT2 = (int)NULL;
 2788              		.loc 1 176 0
 2789 06f0 14309FE5 		ldr	r3, .L29+4
 2790 06f4 0020A0E3 		mov	r2, #0
 2791 06f8 002083E5 		str	r2, [r3, #0]
 177:../Jaime/tp.c **** }
 2792              		.loc 1 177 0
 2793 06fc 0CD04BE2 		sub	sp, fp, #12
 2794 0700 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2795 0704 1EFF2FE1 		bx	lr
 2796              	.L30:
 2797              		.align	2
 2798              	.L29:
 2799 0708 0C00E001 		.word	31457292
 2800 070c 7CFF7F0C 		.word	209715068
 2801              		.cfi_endproc
 2802              	.LFE3:
 2804              		.section	.rodata
 2805              		.align	2
 2806              	.LC0:
 2807 0000 3000     		.ascii	"0\000"
 2808 0002 0000     		.align	2
 2809              	.LC1:
 2810 0004 3100     		.ascii	"1\000"
 2811 0006 0000     		.align	2
 2812              	.LC2:
 2813 0008 3200     		.ascii	"2\000"
 2814 000a 0000     		.align	2
 2815              	.LC3:
 2816 000c 3300     		.ascii	"3\000"
 2817 000e 0000     		.align	2
 2818              	.LC4:
 2819 0010 3400     		.ascii	"4\000"
 2820 0012 0000     		.align	2
 2821              	.LC5:
 2822 0014 3500     		.ascii	"5\000"
 2823 0016 0000     		.align	2
 2824              	.LC6:
 2825 0018 3600     		.ascii	"6\000"
 2826 001a 0000     		.align	2
 2827              	.LC7:
 2828 001c 3700     		.ascii	"7\000"
 2829 001e 0000     		.align	2
 2830              	.LC8:
 2831 0020 3800     		.ascii	"8\000"
 2832 0022 0000     		.align	2
 2833              	.LC9:
 2834 0024 3900     		.ascii	"9\000"
 2835 0026 0000     		.align	2
 2836              	.LC10:
 2837 0028 4100     		.ascii	"A\000"
 2838 002a 0000     		.align	2
 2839              	.LC11:
 2840 002c 4200     		.ascii	"B\000"
 2841 002e 0000     		.align	2
 2842              	.LC12:
 2843 0030 4300     		.ascii	"C\000"
 2844 0032 0000     		.align	2
 2845              	.LC13:
 2846 0034 4400     		.ascii	"D\000"
 2847 0036 0000     		.align	2
 2848              	.LC14:
 2849 0038 4500     		.ascii	"E\000"
 2850 003a 0000     		.align	2
 2851              	.LC15:
 2852 003c 4600     		.ascii	"F\000"
 2853              		.text
 2854              		.align	2
 2855              		.global	Lcd_TC
 2857              	Lcd_TC:
 2858              	.LFB4:
 178:../Jaime/tp.c **** 
 179:../Jaime/tp.c **** void Lcd_TC(void)
 180:../Jaime/tp.c **** {
 2859              		.loc 1 180 0
 2860              		.cfi_startproc
 2861              		@ Function supports interworking.
 2862              		@ args = 0, pretend = 0, frame = 0
 2863              		@ frame_needed = 1, uses_anonymous_args = 0
 2864 0710 0DC0A0E1 		mov	ip, sp
 2865              	.LCFI8:
 2866              		.cfi_def_cfa_register 12
 2867 0714 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2868 0718 04B04CE2 		sub	fp, ip, #4
 2869              		.cfi_offset 14, -8
 2870              		.cfi_offset 13, -12
 2871              		.cfi_offset 11, -16
 2872              	.LCFI9:
 2873              		.cfi_def_cfa 11, 4
 2874 071c 08D04DE2 		sub	sp, sp, #8
 181:../Jaime/tp.c **** 	/* initial LCD controller */
 182:../Jaime/tp.c **** 	Lcd_Init();
 2875              		.loc 1 182 0
 2876 0720 FEFFFFEB 		bl	Lcd_Init
 183:../Jaime/tp.c **** 	/* clear screen */
 184:../Jaime/tp.c **** 	Lcd_Clr();
 2877              		.loc 1 184 0
 2878 0724 FEFFFFEB 		bl	Lcd_Clr
 185:../Jaime/tp.c **** 	Lcd_Active_Clr();
 2879              		.loc 1 185 0
 2880 0728 FEFFFFEB 		bl	Lcd_Active_Clr
 186:../Jaime/tp.c **** 	/* draw rectangle pattern */ 
 187:../Jaime/tp.c **** 	Lcd_Draw_Box(0,0,80,60,15);
 2881              		.loc 1 187 0
 2882 072c 0F30A0E3 		mov	r3, #15
 2883 0730 00308DE5 		str	r3, [sp, #0]
 2884 0734 0000A0E3 		mov	r0, #0
 2885 0738 0010A0E3 		mov	r1, #0
 2886 073c 5020A0E3 		mov	r2, #80
 2887 0740 3C30A0E3 		mov	r3, #60
 2888 0744 FEFFFFEB 		bl	Lcd_Draw_Box
 188:../Jaime/tp.c **** 	Lcd_Draw_Box(80,0,160,60,15);
 2889              		.loc 1 188 0
 2890 0748 0F30A0E3 		mov	r3, #15
 2891 074c 00308DE5 		str	r3, [sp, #0]
 2892 0750 5000A0E3 		mov	r0, #80
 2893 0754 0010A0E3 		mov	r1, #0
 2894 0758 A020A0E3 		mov	r2, #160
 2895 075c 3C30A0E3 		mov	r3, #60
 2896 0760 FEFFFFEB 		bl	Lcd_Draw_Box
 189:../Jaime/tp.c **** 	Lcd_Draw_Box(160,0,240,60,15);
 2897              		.loc 1 189 0
 2898 0764 0F30A0E3 		mov	r3, #15
 2899 0768 00308DE5 		str	r3, [sp, #0]
 2900 076c A000A0E3 		mov	r0, #160
 2901 0770 0010A0E3 		mov	r1, #0
 2902 0774 F020A0E3 		mov	r2, #240
 2903 0778 3C30A0E3 		mov	r3, #60
 2904 077c FEFFFFEB 		bl	Lcd_Draw_Box
 190:../Jaime/tp.c **** 	Lcd_Draw_Box(240,0,320,60,15);
 2905              		.loc 1 190 0
 2906 0780 0F30A0E3 		mov	r3, #15
 2907 0784 00308DE5 		str	r3, [sp, #0]
 2908 0788 F000A0E3 		mov	r0, #240
 2909 078c 0010A0E3 		mov	r1, #0
 2910 0790 052DA0E3 		mov	r2, #320
 2911 0794 3C30A0E3 		mov	r3, #60
 2912 0798 FEFFFFEB 		bl	Lcd_Draw_Box
 191:../Jaime/tp.c **** 	Lcd_Draw_Box(0,60,80,120,15);
 2913              		.loc 1 191 0
 2914 079c 0F30A0E3 		mov	r3, #15
 2915 07a0 00308DE5 		str	r3, [sp, #0]
 2916 07a4 0000A0E3 		mov	r0, #0
 2917 07a8 3C10A0E3 		mov	r1, #60
 2918 07ac 5020A0E3 		mov	r2, #80
 2919 07b0 7830A0E3 		mov	r3, #120
 2920 07b4 FEFFFFEB 		bl	Lcd_Draw_Box
 192:../Jaime/tp.c **** 	Lcd_Draw_Box(80,60,160,120,15);
 2921              		.loc 1 192 0
 2922 07b8 0F30A0E3 		mov	r3, #15
 2923 07bc 00308DE5 		str	r3, [sp, #0]
 2924 07c0 5000A0E3 		mov	r0, #80
 2925 07c4 3C10A0E3 		mov	r1, #60
 2926 07c8 A020A0E3 		mov	r2, #160
 2927 07cc 7830A0E3 		mov	r3, #120
 2928 07d0 FEFFFFEB 		bl	Lcd_Draw_Box
 193:../Jaime/tp.c **** 	Lcd_Draw_Box(160,60,240,120,15);
 2929              		.loc 1 193 0
 2930 07d4 0F30A0E3 		mov	r3, #15
 2931 07d8 00308DE5 		str	r3, [sp, #0]
 2932 07dc A000A0E3 		mov	r0, #160
 2933 07e0 3C10A0E3 		mov	r1, #60
 2934 07e4 F020A0E3 		mov	r2, #240
 2935 07e8 7830A0E3 		mov	r3, #120
 2936 07ec FEFFFFEB 		bl	Lcd_Draw_Box
 194:../Jaime/tp.c **** 	Lcd_Draw_Box(240,60,320,120,15);
 2937              		.loc 1 194 0
 2938 07f0 0F30A0E3 		mov	r3, #15
 2939 07f4 00308DE5 		str	r3, [sp, #0]
 2940 07f8 F000A0E3 		mov	r0, #240
 2941 07fc 3C10A0E3 		mov	r1, #60
 2942 0800 052DA0E3 		mov	r2, #320
 2943 0804 7830A0E3 		mov	r3, #120
 2944 0808 FEFFFFEB 		bl	Lcd_Draw_Box
 195:../Jaime/tp.c **** 	Lcd_Draw_Box(0,120,80,180,15);
 2945              		.loc 1 195 0
 2946 080c 0F30A0E3 		mov	r3, #15
 2947 0810 00308DE5 		str	r3, [sp, #0]
 2948 0814 0000A0E3 		mov	r0, #0
 2949 0818 7810A0E3 		mov	r1, #120
 2950 081c 5020A0E3 		mov	r2, #80
 2951 0820 B430A0E3 		mov	r3, #180
 2952 0824 FEFFFFEB 		bl	Lcd_Draw_Box
 196:../Jaime/tp.c **** 	Lcd_Draw_Box(80,120,160,180,15);
 2953              		.loc 1 196 0
 2954 0828 0F30A0E3 		mov	r3, #15
 2955 082c 00308DE5 		str	r3, [sp, #0]
 2956 0830 5000A0E3 		mov	r0, #80
 2957 0834 7810A0E3 		mov	r1, #120
 2958 0838 A020A0E3 		mov	r2, #160
 2959 083c B430A0E3 		mov	r3, #180
 2960 0840 FEFFFFEB 		bl	Lcd_Draw_Box
 197:../Jaime/tp.c **** 	Lcd_Draw_Box(160,120,240,180,15);
 2961              		.loc 1 197 0
 2962 0844 0F30A0E3 		mov	r3, #15
 2963 0848 00308DE5 		str	r3, [sp, #0]
 2964 084c A000A0E3 		mov	r0, #160
 2965 0850 7810A0E3 		mov	r1, #120
 2966 0854 F020A0E3 		mov	r2, #240
 2967 0858 B430A0E3 		mov	r3, #180
 2968 085c FEFFFFEB 		bl	Lcd_Draw_Box
 198:../Jaime/tp.c **** 	Lcd_Draw_Box(240,120,320,180,15);
 2969              		.loc 1 198 0
 2970 0860 0F30A0E3 		mov	r3, #15
 2971 0864 00308DE5 		str	r3, [sp, #0]
 2972 0868 F000A0E3 		mov	r0, #240
 2973 086c 7810A0E3 		mov	r1, #120
 2974 0870 052DA0E3 		mov	r2, #320
 2975 0874 B430A0E3 		mov	r3, #180
 2976 0878 FEFFFFEB 		bl	Lcd_Draw_Box
 199:../Jaime/tp.c **** 	Lcd_Draw_Box(0,180,80,240,15);
 2977              		.loc 1 199 0
 2978 087c 0F30A0E3 		mov	r3, #15
 2979 0880 00308DE5 		str	r3, [sp, #0]
 2980 0884 0000A0E3 		mov	r0, #0
 2981 0888 B410A0E3 		mov	r1, #180
 2982 088c 5020A0E3 		mov	r2, #80
 2983 0890 F030A0E3 		mov	r3, #240
 2984 0894 FEFFFFEB 		bl	Lcd_Draw_Box
 200:../Jaime/tp.c **** 	Lcd_Draw_Box(80,180,160,240,15);
 2985              		.loc 1 200 0
 2986 0898 0F30A0E3 		mov	r3, #15
 2987 089c 00308DE5 		str	r3, [sp, #0]
 2988 08a0 5000A0E3 		mov	r0, #80
 2989 08a4 B410A0E3 		mov	r1, #180
 2990 08a8 A020A0E3 		mov	r2, #160
 2991 08ac F030A0E3 		mov	r3, #240
 2992 08b0 FEFFFFEB 		bl	Lcd_Draw_Box
 201:../Jaime/tp.c **** 	Lcd_Draw_Box(160,180,240,240,15);
 2993              		.loc 1 201 0
 2994 08b4 0F30A0E3 		mov	r3, #15
 2995 08b8 00308DE5 		str	r3, [sp, #0]
 2996 08bc A000A0E3 		mov	r0, #160
 2997 08c0 B410A0E3 		mov	r1, #180
 2998 08c4 F020A0E3 		mov	r2, #240
 2999 08c8 F030A0E3 		mov	r3, #240
 3000 08cc FEFFFFEB 		bl	Lcd_Draw_Box
 202:../Jaime/tp.c **** 	Lcd_Draw_Box(240,180,320,240,15);
 3001              		.loc 1 202 0
 3002 08d0 0F30A0E3 		mov	r3, #15
 3003 08d4 00308DE5 		str	r3, [sp, #0]
 3004 08d8 F000A0E3 		mov	r0, #240
 3005 08dc B410A0E3 		mov	r1, #180
 3006 08e0 052DA0E3 		mov	r2, #320
 3007 08e4 F030A0E3 		mov	r3, #240
 3008 08e8 FEFFFFEB 		bl	Lcd_Draw_Box
 203:../Jaime/tp.c **** 	/* output ASCII symbol */
 204:../Jaime/tp.c **** 	Lcd_DspAscII6x8(37,26,BLACK,(INT8U*)"0");
 3009              		.loc 1 204 0
 3010 08ec 2500A0E3 		mov	r0, #37
 3011 08f0 1A10A0E3 		mov	r1, #26
 3012 08f4 0F20A0E3 		mov	r2, #15
 3013 08f8 44319FE5 		ldr	r3, .L32
 3014 08fc FEFFFFEB 		bl	Lcd_DspAscII6x8
 205:../Jaime/tp.c **** 	Lcd_DspAscII6x8(117,26,BLACK,(INT8U*)"1");
 3015              		.loc 1 205 0
 3016 0900 7500A0E3 		mov	r0, #117
 3017 0904 1A10A0E3 		mov	r1, #26
 3018 0908 0F20A0E3 		mov	r2, #15
 3019 090c 34319FE5 		ldr	r3, .L32+4
 3020 0910 FEFFFFEB 		bl	Lcd_DspAscII6x8
 206:../Jaime/tp.c **** 	Lcd_DspAscII6x8(197,26,BLACK,(INT8U*)"2");
 3021              		.loc 1 206 0
 3022 0914 C500A0E3 		mov	r0, #197
 3023 0918 1A10A0E3 		mov	r1, #26
 3024 091c 0F20A0E3 		mov	r2, #15
 3025 0920 24319FE5 		ldr	r3, .L32+8
 3026 0924 FEFFFFEB 		bl	Lcd_DspAscII6x8
 207:../Jaime/tp.c **** 	Lcd_DspAscII6x8(277,26,BLACK,(INT8U*)"3");
 3027              		.loc 1 207 0
 3028 0928 20019FE5 		ldr	r0, .L32+12
 3029 092c 1A10A0E3 		mov	r1, #26
 3030 0930 0F20A0E3 		mov	r2, #15
 3031 0934 18319FE5 		ldr	r3, .L32+16
 3032 0938 FEFFFFEB 		bl	Lcd_DspAscII6x8
 208:../Jaime/tp.c **** 	Lcd_DspAscII6x8(37,86,BLACK,(INT8U*)"4");
 3033              		.loc 1 208 0
 3034 093c 2500A0E3 		mov	r0, #37
 3035 0940 5610A0E3 		mov	r1, #86
 3036 0944 0F20A0E3 		mov	r2, #15
 3037 0948 08319FE5 		ldr	r3, .L32+20
 3038 094c FEFFFFEB 		bl	Lcd_DspAscII6x8
 209:../Jaime/tp.c **** 	Lcd_DspAscII6x8(117,86,BLACK,(INT8U*)"5");
 3039              		.loc 1 209 0
 3040 0950 7500A0E3 		mov	r0, #117
 3041 0954 5610A0E3 		mov	r1, #86
 3042 0958 0F20A0E3 		mov	r2, #15
 3043 095c F8309FE5 		ldr	r3, .L32+24
 3044 0960 FEFFFFEB 		bl	Lcd_DspAscII6x8
 210:../Jaime/tp.c **** 	Lcd_DspAscII6x8(197,86,BLACK,(INT8U*)"6");
 3045              		.loc 1 210 0
 3046 0964 C500A0E3 		mov	r0, #197
 3047 0968 5610A0E3 		mov	r1, #86
 3048 096c 0F20A0E3 		mov	r2, #15
 3049 0970 E8309FE5 		ldr	r3, .L32+28
 3050 0974 FEFFFFEB 		bl	Lcd_DspAscII6x8
 211:../Jaime/tp.c **** 	Lcd_DspAscII6x8(277,86,BLACK,(INT8U*)"7");
 3051              		.loc 1 211 0
 3052 0978 D0009FE5 		ldr	r0, .L32+12
 3053 097c 5610A0E3 		mov	r1, #86
 3054 0980 0F20A0E3 		mov	r2, #15
 3055 0984 D8309FE5 		ldr	r3, .L32+32
 3056 0988 FEFFFFEB 		bl	Lcd_DspAscII6x8
 212:../Jaime/tp.c **** 	Lcd_DspAscII6x8(37,146,BLACK,(INT8U*)"8");
 3057              		.loc 1 212 0
 3058 098c 2500A0E3 		mov	r0, #37
 3059 0990 9210A0E3 		mov	r1, #146
 3060 0994 0F20A0E3 		mov	r2, #15
 3061 0998 C8309FE5 		ldr	r3, .L32+36
 3062 099c FEFFFFEB 		bl	Lcd_DspAscII6x8
 213:../Jaime/tp.c **** 	Lcd_DspAscII6x8(117,146,BLACK,(INT8U*)"9");
 3063              		.loc 1 213 0
 3064 09a0 7500A0E3 		mov	r0, #117
 3065 09a4 9210A0E3 		mov	r1, #146
 3066 09a8 0F20A0E3 		mov	r2, #15
 3067 09ac B8309FE5 		ldr	r3, .L32+40
 3068 09b0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 214:../Jaime/tp.c **** 	Lcd_DspAscII6x8(197,146,BLACK,(INT8U*)"A");
 3069              		.loc 1 214 0
 3070 09b4 C500A0E3 		mov	r0, #197
 3071 09b8 9210A0E3 		mov	r1, #146
 3072 09bc 0F20A0E3 		mov	r2, #15
 3073 09c0 A8309FE5 		ldr	r3, .L32+44
 3074 09c4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 215:../Jaime/tp.c **** 	Lcd_DspAscII6x8(277,146,BLACK,(INT8U*)"B");
 3075              		.loc 1 215 0
 3076 09c8 80009FE5 		ldr	r0, .L32+12
 3077 09cc 9210A0E3 		mov	r1, #146
 3078 09d0 0F20A0E3 		mov	r2, #15
 3079 09d4 98309FE5 		ldr	r3, .L32+48
 3080 09d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 216:../Jaime/tp.c **** 	Lcd_DspAscII6x8(37,206,BLACK,(INT8U*)"C");
 3081              		.loc 1 216 0
 3082 09dc 2500A0E3 		mov	r0, #37
 3083 09e0 CE10A0E3 		mov	r1, #206
 3084 09e4 0F20A0E3 		mov	r2, #15
 3085 09e8 88309FE5 		ldr	r3, .L32+52
 3086 09ec FEFFFFEB 		bl	Lcd_DspAscII6x8
 217:../Jaime/tp.c **** 	Lcd_DspAscII6x8(117,206,BLACK,(INT8U*)"D");
 3087              		.loc 1 217 0
 3088 09f0 7500A0E3 		mov	r0, #117
 3089 09f4 CE10A0E3 		mov	r1, #206
 3090 09f8 0F20A0E3 		mov	r2, #15
 3091 09fc 78309FE5 		ldr	r3, .L32+56
 3092 0a00 FEFFFFEB 		bl	Lcd_DspAscII6x8
 218:../Jaime/tp.c **** 	Lcd_DspAscII6x8(197,206,BLACK,(INT8U*)"E");
 3093              		.loc 1 218 0
 3094 0a04 C500A0E3 		mov	r0, #197
 3095 0a08 CE10A0E3 		mov	r1, #206
 3096 0a0c 0F20A0E3 		mov	r2, #15
 3097 0a10 68309FE5 		ldr	r3, .L32+60
 3098 0a14 FEFFFFEB 		bl	Lcd_DspAscII6x8
 219:../Jaime/tp.c **** 	Lcd_DspAscII6x8(277,206,BLACK,(INT8U*)"F");
 3099              		.loc 1 219 0
 3100 0a18 30009FE5 		ldr	r0, .L32+12
 3101 0a1c CE10A0E3 		mov	r1, #206
 3102 0a20 0F20A0E3 		mov	r2, #15
 3103 0a24 58309FE5 		ldr	r3, .L32+64
 3104 0a28 FEFFFFEB 		bl	Lcd_DspAscII6x8
 220:../Jaime/tp.c **** 	Lcd_Dma_Trans();
 3105              		.loc 1 220 0
 3106 0a2c FEFFFFEB 		bl	Lcd_Dma_Trans
 221:../Jaime/tp.c **** 	Delay(100);
 3107              		.loc 1 221 0
 3108 0a30 6400A0E3 		mov	r0, #100
 3109 0a34 FEFFFFEB 		bl	Delay
 222:../Jaime/tp.c **** }
 3110              		.loc 1 222 0
 3111 0a38 0CD04BE2 		sub	sp, fp, #12
 3112 0a3c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3113 0a40 1EFF2FE1 		bx	lr
 3114              	.L33:
 3115              		.align	2
 3116              	.L32:
 3117 0a44 00000000 		.word	.LC0
 3118 0a48 04000000 		.word	.LC1
 3119 0a4c 08000000 		.word	.LC2
 3120 0a50 15010000 		.word	277
 3121 0a54 0C000000 		.word	.LC3
 3122 0a58 10000000 		.word	.LC4
 3123 0a5c 14000000 		.word	.LC5
 3124 0a60 18000000 		.word	.LC6
 3125 0a64 1C000000 		.word	.LC7
 3126 0a68 20000000 		.word	.LC8
 3127 0a6c 24000000 		.word	.LC9
 3128 0a70 28000000 		.word	.LC10
 3129 0a74 2C000000 		.word	.LC11
 3130 0a78 30000000 		.word	.LC12
 3131 0a7c 34000000 		.word	.LC13
 3132 0a80 38000000 		.word	.LC14
 3133 0a84 3C000000 		.word	.LC15
 3134              		.cfi_endproc
 3135              	.LFE4:
 3137              		.align	2
 3138              		.global	DesignREC
 3140              	DesignREC:
 3141              	.LFB5:
 223:../Jaime/tp.c **** 
 224:../Jaime/tp.c **** /*********************************************************************************************
 225:../Jaime/tp.c **** * name:		DesignREC
 226:../Jaime/tp.c **** * func:		confirm the coordinate rang
 227:../Jaime/tp.c **** * para:		none
 228:../Jaime/tp.c **** * ret:		none
 229:../Jaime/tp.c **** * modify:
 230:../Jaime/tp.c **** * comment:		
 231:../Jaime/tp.c **** *********************************************************************************************/
 232:../Jaime/tp.c **** void DesignREC(ULONG tx, ULONG ty)
 233:../Jaime/tp.c **** {
 3142              		.loc 1 233 0
 3143              		.cfi_startproc
 3144              		@ Function supports interworking.
 3145              		@ args = 0, pretend = 0, frame = 16
 3146              		@ frame_needed = 1, uses_anonymous_args = 0
 3147 0a88 0DC0A0E1 		mov	ip, sp
 3148              	.LCFI10:
 3149              		.cfi_def_cfa_register 12
 3150 0a8c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3151 0a90 04B04CE2 		sub	fp, ip, #4
 3152              		.cfi_offset 14, -8
 3153              		.cfi_offset 13, -12
 3154              		.cfi_offset 11, -16
 3155              	.LCFI11:
 3156              		.cfi_def_cfa 11, 4
 3157 0a94 10D04DE2 		sub	sp, sp, #16
 3158 0a98 18000BE5 		str	r0, [fp, #-24]
 3159 0a9c 1C100BE5 		str	r1, [fp, #-28]
 234:../Jaime/tp.c ****     int tm;
 235:../Jaime/tp.c ****     
 236:../Jaime/tp.c **** //  Uart_Printf("\n\r User touch coordinate(X,Y) is :");
 237:../Jaime/tp.c **** //	Uart_Printf("(%04d",tx);	
 238:../Jaime/tp.c **** //	Uart_Printf(",%04d)\n",ty);    
 239:../Jaime/tp.c ****     if(oneTouch == 0)
 3160              		.loc 1 239 0
 3161 0aa0 F4309FE5 		ldr	r3, .L39
 3162 0aa4 003093E5 		ldr	r3, [r3, #0]
 3163 0aa8 000053E3 		cmp	r3, #0
 3164 0aac 0900001A 		bne	.L35
 240:../Jaime/tp.c ****      {
 241:../Jaime/tp.c ****        Vx = tx;                   // Vx as Xmax
 3165              		.loc 1 241 0
 3166 0ab0 E8309FE5 		ldr	r3, .L39+4
 3167 0ab4 18201BE5 		ldr	r2, [fp, #-24]
 3168 0ab8 002083E5 		str	r2, [r3, #0]
 242:../Jaime/tp.c ****        Vy = ty;                   // Vy as Ymax
 3169              		.loc 1 242 0
 3170 0abc E0309FE5 		ldr	r3, .L39+8
 3171 0ac0 1C201BE5 		ldr	r2, [fp, #-28]
 3172 0ac4 002083E5 		str	r2, [r3, #0]
 243:../Jaime/tp.c ****        oneTouch = 1;       		           
 3173              		.loc 1 243 0
 3174 0ac8 CC309FE5 		ldr	r3, .L39
 3175 0acc 0120A0E3 		mov	r2, #1
 3176 0ad0 002083E5 		str	r2, [r3, #0]
 3177 0ad4 2D0000EA 		b	.L34
 3178              	.L35:
 244:../Jaime/tp.c ****     }else{
 245:../Jaime/tp.c ****     
 246:../Jaime/tp.c ****     if(Vx < tx )
 3179              		.loc 1 246 0
 3180 0ad8 C0309FE5 		ldr	r3, .L39+4
 3181 0adc 002093E5 		ldr	r2, [r3, #0]
 3182 0ae0 18301BE5 		ldr	r3, [fp, #-24]
 3183 0ae4 030052E1 		cmp	r2, r3
 3184 0ae8 0700002A 		bcs	.L37
 247:../Jaime/tp.c ****      {
 248:../Jaime/tp.c ****        tm = tx; tx = Vx; Vx = tm; // tx as Xmin
 3185              		.loc 1 248 0
 3186 0aec 18301BE5 		ldr	r3, [fp, #-24]
 3187 0af0 10300BE5 		str	r3, [fp, #-16]
 3188 0af4 A4309FE5 		ldr	r3, .L39+4
 3189 0af8 003093E5 		ldr	r3, [r3, #0]
 3190 0afc 18300BE5 		str	r3, [fp, #-24]
 3191 0b00 10201BE5 		ldr	r2, [fp, #-16]
 3192 0b04 94309FE5 		ldr	r3, .L39+4
 3193 0b08 002083E5 		str	r2, [r3, #0]
 3194              	.L37:
 249:../Jaime/tp.c ****      }
 250:../Jaime/tp.c ****     if(Vy < ty )
 3195              		.loc 1 250 0
 3196 0b0c 90309FE5 		ldr	r3, .L39+8
 3197 0b10 002093E5 		ldr	r2, [r3, #0]
 3198 0b14 1C301BE5 		ldr	r3, [fp, #-28]
 3199 0b18 030052E1 		cmp	r2, r3
 3200 0b1c 0700002A 		bcs	.L38
 251:../Jaime/tp.c ****      { 
 252:../Jaime/tp.c ****        tm = ty; ty = Vy; Vy = tm; // ty as Ymin
 3201              		.loc 1 252 0
 3202 0b20 1C301BE5 		ldr	r3, [fp, #-28]
 3203 0b24 10300BE5 		str	r3, [fp, #-16]
 3204 0b28 74309FE5 		ldr	r3, .L39+8
 3205 0b2c 003093E5 		ldr	r3, [r3, #0]
 3206 0b30 1C300BE5 		str	r3, [fp, #-28]
 3207 0b34 10201BE5 		ldr	r2, [fp, #-16]
 3208 0b38 64309FE5 		ldr	r3, .L39+8
 3209 0b3c 002083E5 		str	r2, [r3, #0]
 3210              	.L38:
 253:../Jaime/tp.c ****      }
 254:../Jaime/tp.c ****      
 255:../Jaime/tp.c ****     Xmax = Vx;    Xmin = tx;
 3211              		.loc 1 255 0
 3212 0b40 58309FE5 		ldr	r3, .L39+4
 3213 0b44 002093E5 		ldr	r2, [r3, #0]
 3214 0b48 58309FE5 		ldr	r3, .L39+12
 3215 0b4c 002083E5 		str	r2, [r3, #0]
 3216 0b50 54309FE5 		ldr	r3, .L39+16
 3217 0b54 18201BE5 		ldr	r2, [fp, #-24]
 3218 0b58 002083E5 		str	r2, [r3, #0]
 256:../Jaime/tp.c ****     Ymax = Vy;    Ymin = ty;
 3219              		.loc 1 256 0
 3220 0b5c 40309FE5 		ldr	r3, .L39+8
 3221 0b60 002093E5 		ldr	r2, [r3, #0]
 3222 0b64 44309FE5 		ldr	r3, .L39+20
 3223 0b68 002083E5 		str	r2, [r3, #0]
 3224 0b6c 40309FE5 		ldr	r3, .L39+24
 3225 0b70 1C201BE5 		ldr	r2, [fp, #-28]
 3226 0b74 002083E5 		str	r2, [r3, #0]
 257:../Jaime/tp.c ****     
 258:../Jaime/tp.c ****     oneTouch = 0;
 3227              		.loc 1 258 0
 3228 0b78 1C309FE5 		ldr	r3, .L39
 3229 0b7c 0020A0E3 		mov	r2, #0
 3230 0b80 002083E5 		str	r2, [r3, #0]
 259:../Jaime/tp.c **** 	CheckTSP = 0;// has checked
 3231              		.loc 1 259 0
 3232 0b84 2C309FE5 		ldr	r3, .L39+28
 3233 0b88 0020A0E3 		mov	r2, #0
 3234 0b8c 002083E5 		str	r2, [r3, #0]
 3235              	.L34:
 260:../Jaime/tp.c **** 	
 261:../Jaime/tp.c **** 	}// end if(oneTouch == 0)
 262:../Jaime/tp.c **** 
 263:../Jaime/tp.c **** }
 3236              		.loc 1 263 0
 3237 0b90 0CD04BE2 		sub	sp, fp, #12
 3238 0b94 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3239 0b98 1EFF2FE1 		bx	lr
 3240              	.L40:
 3241              		.align	2
 3242              	.L39:
 3243 0b9c 00000000 		.word	oneTouch
 3244 0ba0 00000000 		.word	Vx
 3245 0ba4 00000000 		.word	Vy
 3246 0ba8 00000000 		.word	Xmax
 3247 0bac 00000000 		.word	Xmin
 3248 0bb0 00000000 		.word	Ymax
 3249 0bb4 00000000 		.word	Ymin
 3250 0bb8 00000000 		.word	CheckTSP
 3251              		.cfi_endproc
 3252              	.LFE5:
 3254              		.align	2
 3255              		.global	Check_Sel
 3257              	Check_Sel:
 3258              	.LFB6:
 264:../Jaime/tp.c **** 
 265:../Jaime/tp.c **** void Check_Sel(void)
 266:../Jaime/tp.c **** {
 3259              		.loc 1 266 0
 3260              		.cfi_startproc
 3261              		@ Function supports interworking.
 3262              		@ args = 0, pretend = 0, frame = 8
 3263              		@ frame_needed = 1, uses_anonymous_args = 0
 3264 0bbc 0DC0A0E1 		mov	ip, sp
 3265              	.LCFI12:
 3266              		.cfi_def_cfa_register 12
 3267 0bc0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3268 0bc4 04B04CE2 		sub	fp, ip, #4
 3269              		.cfi_offset 14, -8
 3270              		.cfi_offset 13, -12
 3271              		.cfi_offset 11, -16
 3272              	.LCFI13:
 3273              		.cfi_def_cfa 11, 4
 3274 0bc8 08D04DE2 		sub	sp, sp, #8
 3275              	.L45:
 267:../Jaime/tp.c **** 	char yn;
 268:../Jaime/tp.c ****     
 269:../Jaime/tp.c **** 	do{
 270:../Jaime/tp.c **** 	  
 271:../Jaime/tp.c **** 	  rINTMSK |=BIT_GLOBAL|BIT_EINT2;
 3276              		.loc 1 271 0
 3277 0bcc CC309FE5 		ldr	r3, .L47
 3278 0bd0 C8209FE5 		ldr	r2, .L47
 3279 0bd4 002092E5 		ldr	r2, [r2, #0]
 3280 0bd8 122582E3 		orr	r2, r2, #75497472
 3281 0bdc 002083E5 		str	r2, [r3, #0]
 272:../Jaime/tp.c **** //    Uart_Printf("\n\r Touch Screen coordinate Rang in:\n");
 273:../Jaime/tp.c **** //    Uart_Printf("   (Xmin,Ymin) is :(%04d,%04d)\n",Xmin,Ymin);	
 274:../Jaime/tp.c **** //	  Uart_Printf("   (Xmax,Ymax) is :(%04d,%04d)\n",Xmax,Ymax);	
 275:../Jaime/tp.c **** //	  Uart_Printf("\n  To use current settings. Press N/n key. ");
 276:../Jaime/tp.c **** //	  Uart_Printf("\n\n\r  Want to Set Again(Y/N)? ");	        	      
 277:../Jaime/tp.c **** //	  yn = Uart_Getch();
 278:../Jaime/tp.c ****       rI_ISPC = BIT_EINT2;              // clear pending_bit
 3282              		.loc 1 278 0
 3283 0be0 BC309FE5 		ldr	r3, .L47+4
 3284 0be4 0225A0E3 		mov	r2, #8388608
 3285 0be8 002083E5 		str	r2, [r3, #0]
 279:../Jaime/tp.c ****       rINTMSK =~(BIT_GLOBAL|BIT_EINT2);
 3286              		.loc 1 279 0
 3287 0bec AC309FE5 		ldr	r3, .L47
 3288 0bf0 1225E0E3 		mvn	r2, #75497472
 3289 0bf4 002083E5 		str	r2, [r3, #0]
 280:../Jaime/tp.c **** //	  if((yn == 0x59)|(yn == 0x79)|(yn == 0x4E)|(yn == 0x6E)) Uart_SendByte(yn);	  
 281:../Jaime/tp.c **** 	  if((yn == 0x59)|(yn == 0x79))
 3290              		.loc 1 281 0
 3291 0bf8 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 3292 0bfc 590053E3 		cmp	r3, #89
 3293 0c00 0030A013 		movne	r3, #0
 3294 0c04 0130A003 		moveq	r3, #1
 3295 0c08 FF2003E2 		and	r2, r3, #255
 3296 0c0c 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 3297 0c10 790053E3 		cmp	r3, #121
 3298 0c14 0030A013 		movne	r3, #0
 3299 0c18 0130A003 		moveq	r3, #1
 3300 0c1c FF3003E2 		and	r3, r3, #255
 3301 0c20 033082E1 		orr	r3, r2, r3
 3302 0c24 FF3003E2 		and	r3, r3, #255
 3303 0c28 000053E3 		cmp	r3, #0
 3304 0c2c 1700000A 		beq	.L46
 282:../Jaime/tp.c **** 	    {
 283:../Jaime/tp.c **** //	      Uart_Printf("\n\n Touch TSP's Cornor to ensure Xmax,Ymax,Xmax,Xmin");	      
 284:../Jaime/tp.c **** 
 285:../Jaime/tp.c ****          //Init X Y rectangle
 286:../Jaime/tp.c ****           Xmax = 750;    Xmin = 200;
 3305              		.loc 1 286 0
 3306 0c30 70309FE5 		ldr	r3, .L47+8
 3307 0c34 70209FE5 		ldr	r2, .L47+12
 3308 0c38 002083E5 		str	r2, [r3, #0]
 3309 0c3c 6C309FE5 		ldr	r3, .L47+16
 3310 0c40 C820A0E3 		mov	r2, #200
 3311 0c44 002083E5 		str	r2, [r3, #0]
 287:../Jaime/tp.c ****           Ymax = 620;    Ymin = 120;
 3312              		.loc 1 287 0
 3313 0c48 64309FE5 		ldr	r3, .L47+20
 3314 0c4c 9B2FA0E3 		mov	r2, #620
 3315 0c50 002083E5 		str	r2, [r3, #0]
 3316 0c54 5C309FE5 		ldr	r3, .L47+24
 3317 0c58 7820A0E3 		mov	r2, #120
 3318 0c5c 002083E5 		str	r2, [r3, #0]
 288:../Jaime/tp.c **** 
 289:../Jaime/tp.c **** 	      oneTouch = 0;
 3319              		.loc 1 289 0
 3320 0c60 54309FE5 		ldr	r3, .L47+28
 3321 0c64 0020A0E3 		mov	r2, #0
 3322 0c68 002083E5 		str	r2, [r3, #0]
 290:../Jaime/tp.c **** 	      CheckTSP = 1; // mask to check
 3323              		.loc 1 290 0
 3324 0c6c 4C309FE5 		ldr	r3, .L47+32
 3325 0c70 0120A0E3 		mov	r2, #1
 3326 0c74 002083E5 		str	r2, [r3, #0]
 291:../Jaime/tp.c **** 	      while(CheckTSP);
 3327              		.loc 1 291 0
 3328 0c78 0000A0E1 		mov	r0, r0	@ nop
 3329              	.L43:
 3330              		.loc 1 291 0 is_stmt 0 discriminator 1
 3331 0c7c 3C309FE5 		ldr	r3, .L47+32
 3332 0c80 003093E5 		ldr	r3, [r3, #0]
 3333 0c84 000053E3 		cmp	r3, #0
 3334 0c88 FBFFFF1A 		bne	.L43
 292:../Jaime/tp.c **** 	      
 293:../Jaime/tp.c **** 	    }else break;	    
 294:../Jaime/tp.c **** 	  
 295:../Jaime/tp.c **** 	}while(1);
 3335              		.loc 1 295 0 is_stmt 1
 3336 0c8c CEFFFFEA 		b	.L45
 3337              	.L46:
 296:../Jaime/tp.c **** 	
 297:../Jaime/tp.c **** }
 3338              		.loc 1 297 0
 3339 0c90 0000A0E1 		mov	r0, r0	@ nop
 3340              	.L41:
 3341 0c94 0CD04BE2 		sub	sp, fp, #12
 3342 0c98 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3343 0c9c 1EFF2FE1 		bx	lr
 3344              	.L48:
 3345              		.align	2
 3346              	.L47:
 3347 0ca0 0C00E001 		.word	31457292
 3348 0ca4 2400E001 		.word	31457316
 3349 0ca8 00000000 		.word	Xmax
 3350 0cac EE020000 		.word	750
 3351 0cb0 00000000 		.word	Xmin
 3352 0cb4 00000000 		.word	Ymax
 3353 0cb8 00000000 		.word	Ymin
 3354 0cbc 00000000 		.word	oneTouch
 3355 0cc0 00000000 		.word	CheckTSP
 3356              		.cfi_endproc
 3357              	.LFE6:
 3359              		.align	2
 3361              	clamp:
 3362              	.LFB7:
 298:../Jaime/tp.c **** 
 299:../Jaime/tp.c **** /*===================================================================================
 300:../Jaime/tp.c ****  * FUNCIONES DE CALIBRACIÓN DE 5 PUNTOS
 301:../Jaime/tp.c ****  *===================================================================================*/
 302:../Jaime/tp.c **** 
 303:../Jaime/tp.c **** /*********************************************************************************************
 304:../Jaime/tp.c **** * name:     clamp
 305:../Jaime/tp.c **** * func:     Limita un valor entre mínimo y máximo
 306:../Jaime/tp.c **** *********************************************************************************************/
 307:../Jaime/tp.c **** static int clamp(int val, int min, int max)
 308:../Jaime/tp.c **** {
 3363              		.loc 1 308 0
 3364              		.cfi_startproc
 3365              		@ Function supports interworking.
 3366              		@ args = 0, pretend = 0, frame = 16
 3367              		@ frame_needed = 1, uses_anonymous_args = 0
 3368 0cc4 0DC0A0E1 		mov	ip, sp
 3369              	.LCFI14:
 3370              		.cfi_def_cfa_register 12
 3371 0cc8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3372 0ccc 04B04CE2 		sub	fp, ip, #4
 3373              		.cfi_offset 14, -8
 3374              		.cfi_offset 13, -12
 3375              		.cfi_offset 11, -16
 3376              	.LCFI15:
 3377              		.cfi_def_cfa 11, 4
 3378 0cd0 10D04DE2 		sub	sp, sp, #16
 3379 0cd4 10000BE5 		str	r0, [fp, #-16]
 3380 0cd8 14100BE5 		str	r1, [fp, #-20]
 3381 0cdc 18200BE5 		str	r2, [fp, #-24]
 309:../Jaime/tp.c ****     if (val < min) return min;
 3382              		.loc 1 309 0
 3383 0ce0 10201BE5 		ldr	r2, [fp, #-16]
 3384 0ce4 14301BE5 		ldr	r3, [fp, #-20]
 3385 0ce8 030052E1 		cmp	r2, r3
 3386 0cec 010000AA 		bge	.L50
 3387              		.loc 1 309 0 is_stmt 0 discriminator 1
 3388 0cf0 14301BE5 		ldr	r3, [fp, #-20]
 3389 0cf4 060000EA 		b	.L51
 3390              	.L50:
 310:../Jaime/tp.c ****     if (val > max) return max;
 3391              		.loc 1 310 0 is_stmt 1
 3392 0cf8 10201BE5 		ldr	r2, [fp, #-16]
 3393 0cfc 18301BE5 		ldr	r3, [fp, #-24]
 3394 0d00 030052E1 		cmp	r2, r3
 3395 0d04 010000DA 		ble	.L52
 3396              		.loc 1 310 0 is_stmt 0 discriminator 1
 3397 0d08 18301BE5 		ldr	r3, [fp, #-24]
 3398 0d0c 000000EA 		b	.L51
 3399              	.L52:
 311:../Jaime/tp.c ****     return val;
 3400              		.loc 1 311 0 is_stmt 1
 3401 0d10 10301BE5 		ldr	r3, [fp, #-16]
 3402              	.L51:
 312:../Jaime/tp.c **** }
 3403              		.loc 1 312 0
 3404 0d14 0300A0E1 		mov	r0, r3
 3405 0d18 0CD04BE2 		sub	sp, fp, #12
 3406 0d1c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3407 0d20 1EFF2FE1 		bx	lr
 3408              		.cfi_endproc
 3409              	.LFE7:
 3411              		.align	2
 3413              	draw_cross:
 3414              	.LFB8:
 313:../Jaime/tp.c **** 
 314:../Jaime/tp.c **** /*********************************************************************************************
 315:../Jaime/tp.c **** * name:     draw_cross
 316:../Jaime/tp.c **** * func:     Dibuja una cruz en las coordenadas especificadas
 317:../Jaime/tp.c **** *********************************************************************************************/
 318:../Jaime/tp.c **** static void draw_cross(int x, int y)
 319:../Jaime/tp.c **** {
 3415              		.loc 1 319 0
 3416              		.cfi_startproc
 3417              		@ Function supports interworking.
 3418              		@ args = 0, pretend = 0, frame = 16
 3419              		@ frame_needed = 1, uses_anonymous_args = 0
 3420 0d24 0DC0A0E1 		mov	ip, sp
 3421              	.LCFI16:
 3422              		.cfi_def_cfa_register 12
 3423 0d28 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3424 0d2c 04B04CE2 		sub	fp, ip, #4
 3425              		.cfi_offset 14, -8
 3426              		.cfi_offset 13, -12
 3427              		.cfi_offset 11, -16
 3428              	.LCFI17:
 3429              		.cfi_def_cfa 11, 4
 3430 0d30 10D04DE2 		sub	sp, sp, #16
 3431 0d34 18000BE5 		str	r0, [fp, #-24]
 3432 0d38 1C100BE5 		str	r1, [fp, #-28]
 320:../Jaime/tp.c ****     int i;
 321:../Jaime/tp.c ****     // Línea horizontal
 322:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3433              		.loc 1 322 0
 3434 0d3c 0930E0E3 		mvn	r3, #9
 3435 0d40 10300BE5 		str	r3, [fp, #-16]
 3436 0d44 500000EA 		b	.L54
 3437              	.L56:
 323:../Jaime/tp.c ****     {
 324:../Jaime/tp.c ****         if (x + i >= 0 && x + i < SCR_XSIZE)
 3438              		.loc 1 324 0
 3439 0d48 18201BE5 		ldr	r2, [fp, #-24]
 3440 0d4c 10301BE5 		ldr	r3, [fp, #-16]
 3441 0d50 033082E0 		add	r3, r2, r3
 3442 0d54 000053E3 		cmp	r3, #0
 3443 0d58 480000BA 		blt	.L55
 3444              		.loc 1 324 0 is_stmt 0 discriminator 1
 3445 0d5c 18201BE5 		ldr	r2, [fp, #-24]
 3446 0d60 10301BE5 		ldr	r3, [fp, #-16]
 3447 0d64 032082E0 		add	r2, r2, r3
 3448 0d68 7C329FE5 		ldr	r3, .L60
 3449 0d6c 030052E1 		cmp	r2, r3
 3450 0d70 420000CA 		bgt	.L55
 325:../Jaime/tp.c ****             (LCD_PutPixel(x + i, y, 0xf));
 3451              		.loc 1 325 0 is_stmt 1
 3452 0d74 1C201BE5 		ldr	r2, [fp, #-28]
 3453 0d78 0230A0E1 		mov	r3, r2
 3454 0d7c 0331A0E1 		mov	r3, r3, asl #2
 3455 0d80 023083E0 		add	r3, r3, r2
 3456 0d84 0333A0E1 		mov	r3, r3, asl #6
 3457 0d88 A32FA0E1 		mov	r2, r3, lsr #31
 3458 0d8c 033082E0 		add	r3, r2, r3
 3459 0d90 C330A0E1 		mov	r3, r3, asr #1
 3460 0d94 C32683E2 		add	r2, r3, #204472320
 3461 0d98 962C82E2 		add	r2, r2, #38400
 3462 0d9c 18101BE5 		ldr	r1, [fp, #-24]
 3463 0da0 10301BE5 		ldr	r3, [fp, #-16]
 3464 0da4 033081E0 		add	r3, r1, r3
 3465 0da8 071083E2 		add	r1, r3, #7
 3466 0dac 000053E3 		cmp	r3, #0
 3467 0db0 0130A0B1 		movlt	r3, r1
 3468 0db4 C331A0E1 		mov	r3, r3, asr #3
 3469 0db8 0331A0E1 		mov	r3, r3, asl #2
 3470 0dbc 033082E0 		add	r3, r2, r3
 3471 0dc0 0310A0E1 		mov	r1, r3
 3472 0dc4 1C201BE5 		ldr	r2, [fp, #-28]
 3473 0dc8 0230A0E1 		mov	r3, r2
 3474 0dcc 0331A0E1 		mov	r3, r3, asl #2
 3475 0dd0 023083E0 		add	r3, r3, r2
 3476 0dd4 0333A0E1 		mov	r3, r3, asl #6
 3477 0dd8 A32FA0E1 		mov	r2, r3, lsr #31
 3478 0ddc 033082E0 		add	r3, r2, r3
 3479 0de0 C330A0E1 		mov	r3, r3, asr #1
 3480 0de4 C32683E2 		add	r2, r3, #204472320
 3481 0de8 962C82E2 		add	r2, r2, #38400
 3482 0dec 18001BE5 		ldr	r0, [fp, #-24]
 3483 0df0 10301BE5 		ldr	r3, [fp, #-16]
 3484 0df4 033080E0 		add	r3, r0, r3
 3485 0df8 070083E2 		add	r0, r3, #7
 3486 0dfc 000053E3 		cmp	r3, #0
 3487 0e00 0030A0B1 		movlt	r3, r0
 3488 0e04 C331A0E1 		mov	r3, r3, asr #3
 3489 0e08 0331A0E1 		mov	r3, r3, asl #2
 3490 0e0c 033082E0 		add	r3, r2, r3
 3491 0e10 000093E5 		ldr	r0, [r3, #0]
 3492 0e14 18201BE5 		ldr	r2, [fp, #-24]
 3493 0e18 10301BE5 		ldr	r3, [fp, #-16]
 3494 0e1c 032082E0 		add	r2, r2, r3
 3495 0e20 C23FA0E1 		mov	r3, r2, asr #31
 3496 0e24 A33EA0E1 		mov	r3, r3, lsr #29
 3497 0e28 032082E0 		add	r2, r2, r3
 3498 0e2c 072002E2 		and	r2, r2, #7
 3499 0e30 023063E0 		rsb	r3, r3, r2
 3500 0e34 0331A0E1 		mov	r3, r3, asl #2
 3501 0e38 0F22A0E3 		mov	r2, #-268435456
 3502 0e3c 3233A0E1 		mov	r3, r2, lsr r3
 3503 0e40 0330E0E1 		mvn	r3, r3
 3504 0e44 030000E0 		and	r0, r0, r3
 3505 0e48 18201BE5 		ldr	r2, [fp, #-24]
 3506 0e4c 10301BE5 		ldr	r3, [fp, #-16]
 3507 0e50 032082E0 		add	r2, r2, r3
 3508 0e54 C23FA0E1 		mov	r3, r2, asr #31
 3509 0e58 A33EA0E1 		mov	r3, r3, lsr #29
 3510 0e5c 032082E0 		add	r2, r2, r3
 3511 0e60 072002E2 		and	r2, r2, #7
 3512 0e64 023063E0 		rsb	r3, r3, r2
 3513 0e68 073063E2 		rsb	r3, r3, #7
 3514 0e6c 0331A0E1 		mov	r3, r3, asl #2
 3515 0e70 0F20A0E3 		mov	r2, #15
 3516 0e74 1233A0E1 		mov	r3, r2, asl r3
 3517 0e78 033080E1 		orr	r3, r0, r3
 3518 0e7c 003081E5 		str	r3, [r1, #0]
 3519              	.L55:
 322:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3520              		.loc 1 322 0
 3521 0e80 10301BE5 		ldr	r3, [fp, #-16]
 3522 0e84 013083E2 		add	r3, r3, #1
 3523 0e88 10300BE5 		str	r3, [fp, #-16]
 3524              	.L54:
 322:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3525              		.loc 1 322 0 is_stmt 0 discriminator 1
 3526 0e8c 10301BE5 		ldr	r3, [fp, #-16]
 3527 0e90 0A0053E3 		cmp	r3, #10
 3528 0e94 ABFFFFDA 		ble	.L56
 326:../Jaime/tp.c ****     }
 327:../Jaime/tp.c ****     // Línea vertical
 328:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3529              		.loc 1 328 0 is_stmt 1
 3530 0e98 0930E0E3 		mvn	r3, #9
 3531 0e9c 10300BE5 		str	r3, [fp, #-16]
 3532 0ea0 4B0000EA 		b	.L57
 3533              	.L59:
 329:../Jaime/tp.c ****     {
 330:../Jaime/tp.c ****         if (y + i >= 0 && y + i < SCR_YSIZE)
 3534              		.loc 1 330 0
 3535 0ea4 1C201BE5 		ldr	r2, [fp, #-28]
 3536 0ea8 10301BE5 		ldr	r3, [fp, #-16]
 3537 0eac 033082E0 		add	r3, r2, r3
 3538 0eb0 000053E3 		cmp	r3, #0
 3539 0eb4 430000BA 		blt	.L58
 3540              		.loc 1 330 0 is_stmt 0 discriminator 1
 3541 0eb8 1C201BE5 		ldr	r2, [fp, #-28]
 3542 0ebc 10301BE5 		ldr	r3, [fp, #-16]
 3543 0ec0 033082E0 		add	r3, r2, r3
 3544 0ec4 EF0053E3 		cmp	r3, #239
 3545 0ec8 3E0000CA 		bgt	.L58
 331:../Jaime/tp.c ****             (LCD_PutPixel(x, y + i, 0xf));
 3546              		.loc 1 331 0 is_stmt 1
 3547 0ecc 1C201BE5 		ldr	r2, [fp, #-28]
 3548 0ed0 10301BE5 		ldr	r3, [fp, #-16]
 3549 0ed4 032082E0 		add	r2, r2, r3
 3550 0ed8 0230A0E1 		mov	r3, r2
 3551 0edc 0331A0E1 		mov	r3, r3, asl #2
 3552 0ee0 023083E0 		add	r3, r3, r2
 3553 0ee4 0333A0E1 		mov	r3, r3, asl #6
 3554 0ee8 A32FA0E1 		mov	r2, r3, lsr #31
 3555 0eec 033082E0 		add	r3, r2, r3
 3556 0ef0 C330A0E1 		mov	r3, r3, asr #1
 3557 0ef4 C32683E2 		add	r2, r3, #204472320
 3558 0ef8 962C82E2 		add	r2, r2, #38400
 3559 0efc 18301BE5 		ldr	r3, [fp, #-24]
 3560 0f00 071083E2 		add	r1, r3, #7
 3561 0f04 000053E3 		cmp	r3, #0
 3562 0f08 0130A0B1 		movlt	r3, r1
 3563 0f0c C331A0E1 		mov	r3, r3, asr #3
 3564 0f10 0331A0E1 		mov	r3, r3, asl #2
 3565 0f14 033082E0 		add	r3, r2, r3
 3566 0f18 0310A0E1 		mov	r1, r3
 3567 0f1c 1C201BE5 		ldr	r2, [fp, #-28]
 3568 0f20 10301BE5 		ldr	r3, [fp, #-16]
 3569 0f24 032082E0 		add	r2, r2, r3
 3570 0f28 0230A0E1 		mov	r3, r2
 3571 0f2c 0331A0E1 		mov	r3, r3, asl #2
 3572 0f30 023083E0 		add	r3, r3, r2
 3573 0f34 0333A0E1 		mov	r3, r3, asl #6
 3574 0f38 A32FA0E1 		mov	r2, r3, lsr #31
 3575 0f3c 033082E0 		add	r3, r2, r3
 3576 0f40 C330A0E1 		mov	r3, r3, asr #1
 3577 0f44 C32683E2 		add	r2, r3, #204472320
 3578 0f48 962C82E2 		add	r2, r2, #38400
 3579 0f4c 18301BE5 		ldr	r3, [fp, #-24]
 3580 0f50 070083E2 		add	r0, r3, #7
 3581 0f54 000053E3 		cmp	r3, #0
 3582 0f58 0030A0B1 		movlt	r3, r0
 3583 0f5c C331A0E1 		mov	r3, r3, asr #3
 3584 0f60 0331A0E1 		mov	r3, r3, asl #2
 3585 0f64 033082E0 		add	r3, r2, r3
 3586 0f68 000093E5 		ldr	r0, [r3, #0]
 3587 0f6c 18201BE5 		ldr	r2, [fp, #-24]
 3588 0f70 C23FA0E1 		mov	r3, r2, asr #31
 3589 0f74 A33EA0E1 		mov	r3, r3, lsr #29
 3590 0f78 032082E0 		add	r2, r2, r3
 3591 0f7c 072002E2 		and	r2, r2, #7
 3592 0f80 023063E0 		rsb	r3, r3, r2
 3593 0f84 0331A0E1 		mov	r3, r3, asl #2
 3594 0f88 0F22A0E3 		mov	r2, #-268435456
 3595 0f8c 3233A0E1 		mov	r3, r2, lsr r3
 3596 0f90 0330E0E1 		mvn	r3, r3
 3597 0f94 030000E0 		and	r0, r0, r3
 3598 0f98 18201BE5 		ldr	r2, [fp, #-24]
 3599 0f9c C23FA0E1 		mov	r3, r2, asr #31
 3600 0fa0 A33EA0E1 		mov	r3, r3, lsr #29
 3601 0fa4 032082E0 		add	r2, r2, r3
 3602 0fa8 072002E2 		and	r2, r2, #7
 3603 0fac 023063E0 		rsb	r3, r3, r2
 3604 0fb0 073063E2 		rsb	r3, r3, #7
 3605 0fb4 0331A0E1 		mov	r3, r3, asl #2
 3606 0fb8 0F20A0E3 		mov	r2, #15
 3607 0fbc 1233A0E1 		mov	r3, r2, asl r3
 3608 0fc0 033080E1 		orr	r3, r0, r3
 3609 0fc4 003081E5 		str	r3, [r1, #0]
 3610              	.L58:
 328:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3611              		.loc 1 328 0
 3612 0fc8 10301BE5 		ldr	r3, [fp, #-16]
 3613 0fcc 013083E2 		add	r3, r3, #1
 3614 0fd0 10300BE5 		str	r3, [fp, #-16]
 3615              	.L57:
 328:../Jaime/tp.c ****     for (i = -10; i <= 10; i++)
 3616              		.loc 1 328 0 is_stmt 0 discriminator 1
 3617 0fd4 10301BE5 		ldr	r3, [fp, #-16]
 3618 0fd8 0A0053E3 		cmp	r3, #10
 3619 0fdc B0FFFFDA 		ble	.L59
 332:../Jaime/tp.c ****     }
 333:../Jaime/tp.c **** }
 3620              		.loc 1 333 0 is_stmt 1
 3621 0fe0 0CD04BE2 		sub	sp, fp, #12
 3622 0fe4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3623 0fe8 1EFF2FE1 		bx	lr
 3624              	.L61:
 3625              		.align	2
 3626              	.L60:
 3627 0fec 3F010000 		.word	319
 3628              		.cfi_endproc
 3629              	.LFE8:
 3631              		.align	2
 3632              		.global	report_touch_data
 3634              	report_touch_data:
 3635              	.LFB9:
 334:../Jaime/tp.c **** 
 335:../Jaime/tp.c **** /*********************************************************************************************
 336:../Jaime/tp.c **** * name:     report_touch_data
 337:../Jaime/tp.c **** * func:     Llamada desde TSInt() para reportar coordenadas crudas
 338:../Jaime/tp.c **** *           Implementa antirrebote: ignora toques muy rápidos (< 300ms desde último toque)
 339:../Jaime/tp.c **** *********************************************************************************************/
 340:../Jaime/tp.c **** void report_touch_data(int x, int y)
 341:../Jaime/tp.c **** {
 3636              		.loc 1 341 0
 3637              		.cfi_startproc
 3638              		@ Function supports interworking.
 3639              		@ args = 0, pretend = 0, frame = 16
 3640              		@ frame_needed = 1, uses_anonymous_args = 0
 3641 0ff0 0DC0A0E1 		mov	ip, sp
 3642              	.LCFI18:
 3643              		.cfi_def_cfa_register 12
 3644 0ff4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3645 0ff8 04B04CE2 		sub	fp, ip, #4
 3646              		.cfi_offset 14, -8
 3647              		.cfi_offset 13, -12
 3648              		.cfi_offset 11, -16
 3649              	.LCFI19:
 3650              		.cfi_def_cfa 11, 4
 3651 0ffc 10D04DE2 		sub	sp, sp, #16
 3652 1000 18000BE5 		str	r0, [fp, #-24]
 3653 1004 1C100BE5 		str	r1, [fp, #-28]
 342:../Jaime/tp.c ****     unsigned int current_time = timer2_count();
 3654              		.loc 1 342 0
 3655 1008 FEFFFFEB 		bl	timer2_count
 3656 100c 14000BE5 		str	r0, [fp, #-20]
 343:../Jaime/tp.c ****     unsigned int time_diff;
 344:../Jaime/tp.c ****     
 345:../Jaime/tp.c ****     /* Calcular diferencia de tiempo (manejando overflow del contador) */
 346:../Jaime/tp.c ****     if (current_time >= g_last_touch_time)
 3657              		.loc 1 346 0
 3658 1010 9C309FE5 		ldr	r3, .L66
 3659 1014 003093E5 		ldr	r3, [r3, #0]
 3660 1018 14201BE5 		ldr	r2, [fp, #-20]
 3661 101c 030052E1 		cmp	r2, r3
 3662 1020 0500003A 		bcc	.L63
 347:../Jaime/tp.c ****         time_diff = current_time - g_last_touch_time;
 3663              		.loc 1 347 0
 3664 1024 88309FE5 		ldr	r3, .L66
 3665 1028 003093E5 		ldr	r3, [r3, #0]
 3666 102c 14201BE5 		ldr	r2, [fp, #-20]
 3667 1030 023063E0 		rsb	r3, r3, r2
 3668 1034 10300BE5 		str	r3, [fp, #-16]
 3669 1038 060000EA 		b	.L64
 3670              	.L63:
 348:../Jaime/tp.c ****     else
 349:../Jaime/tp.c ****         time_diff = (0xFFFFFFFF - g_last_touch_time) + current_time + 1;
 3671              		.loc 1 349 0
 3672 103c 70309FE5 		ldr	r3, .L66
 3673 1040 003093E5 		ldr	r3, [r3, #0]
 3674 1044 0320E0E1 		mvn	r2, r3
 3675 1048 14301BE5 		ldr	r3, [fp, #-20]
 3676 104c 033082E0 		add	r3, r2, r3
 3677 1050 013083E2 		add	r3, r3, #1
 3678 1054 10300BE5 		str	r3, [fp, #-16]
 3679              	.L64:
 350:../Jaime/tp.c ****     
 351:../Jaime/tp.c ****     /* Solo aceptar el toque si ha pasado suficiente tiempo desde el último */
 352:../Jaime/tp.c ****     if (g_ts_ready == 0 && time_diff >= TOUCH_DEBOUNCE_TIME)
 3680              		.loc 1 352 0
 3681 1058 58309FE5 		ldr	r3, .L66+4
 3682 105c 003093E5 		ldr	r3, [r3, #0]
 3683 1060 000053E3 		cmp	r3, #0
 3684 1064 0F00001A 		bne	.L62
 3685              		.loc 1 352 0 is_stmt 0 discriminator 1
 3686 1068 10201BE5 		ldr	r2, [fp, #-16]
 3687 106c 48309FE5 		ldr	r3, .L66+8
 3688 1070 030052E1 		cmp	r2, r3
 3689 1074 0B00009A 		bls	.L62
 353:../Jaime/tp.c ****     {
 354:../Jaime/tp.c ****         g_ts_raw_x = x;
 3690              		.loc 1 354 0 is_stmt 1
 3691 1078 40309FE5 		ldr	r3, .L66+12
 3692 107c 18201BE5 		ldr	r2, [fp, #-24]
 3693 1080 002083E5 		str	r2, [r3, #0]
 355:../Jaime/tp.c ****         g_ts_raw_y = y;
 3694              		.loc 1 355 0
 3695 1084 38309FE5 		ldr	r3, .L66+16
 3696 1088 1C201BE5 		ldr	r2, [fp, #-28]
 3697 108c 002083E5 		str	r2, [r3, #0]
 356:../Jaime/tp.c ****         g_ts_ready = 1;
 3698              		.loc 1 356 0
 3699 1090 20309FE5 		ldr	r3, .L66+4
 3700 1094 0120A0E3 		mov	r2, #1
 3701 1098 002083E5 		str	r2, [r3, #0]
 357:../Jaime/tp.c ****         g_last_touch_time = current_time;  /* Actualizar tiempo del último toque */
 3702              		.loc 1 357 0
 3703 109c 10309FE5 		ldr	r3, .L66
 3704 10a0 14201BE5 		ldr	r2, [fp, #-20]
 3705 10a4 002083E5 		str	r2, [r3, #0]
 3706              	.L62:
 358:../Jaime/tp.c ****     }
 359:../Jaime/tp.c **** }
 3707              		.loc 1 359 0
 3708 10a8 0CD04BE2 		sub	sp, fp, #12
 3709 10ac 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3710 10b0 1EFF2FE1 		bx	lr
 3711              	.L67:
 3712              		.align	2
 3713              	.L66:
 3714 10b4 28000000 		.word	g_last_touch_time
 3715 10b8 1C000000 		.word	g_ts_ready
 3716 10bc DF930400 		.word	299999
 3717 10c0 20000000 		.word	g_ts_raw_x
 3718 10c4 24000000 		.word	g_ts_raw_y
 3719              		.cfi_endproc
 3720              	.LFE9:
 3722              		.align	2
 3724              	ts_wait_for_touch:
 3725              	.LFB10:
 360:../Jaime/tp.c **** 
 361:../Jaime/tp.c **** /*********************************************************************************************
 362:../Jaime/tp.c **** * name:     ts_wait_for_touch
 363:../Jaime/tp.c **** * func:     Espera hasta detectar un toque
 364:../Jaime/tp.c **** *********************************************************************************************/
 365:../Jaime/tp.c **** static void ts_wait_for_touch(void)
 366:../Jaime/tp.c **** {
 3726              		.loc 1 366 0
 3727              		.cfi_startproc
 3728              		@ Function supports interworking.
 3729              		@ args = 0, pretend = 0, frame = 0
 3730              		@ frame_needed = 1, uses_anonymous_args = 0
 3731 10c8 0DC0A0E1 		mov	ip, sp
 3732              	.LCFI20:
 3733              		.cfi_def_cfa_register 12
 3734 10cc 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3735 10d0 04B04CE2 		sub	fp, ip, #4
 3736              		.cfi_offset 14, -8
 3737              		.cfi_offset 13, -12
 3738              		.cfi_offset 11, -16
 3739              	.LCFI21:
 3740              		.cfi_def_cfa 11, 4
 367:../Jaime/tp.c ****     g_ts_ready = 0;
 3741              		.loc 1 367 0
 3742 10d4 24309FE5 		ldr	r3, .L70
 3743 10d8 0020A0E3 		mov	r2, #0
 3744 10dc 002083E5 		str	r2, [r3, #0]
 368:../Jaime/tp.c ****     while (g_ts_ready == 0)
 3745              		.loc 1 368 0
 3746 10e0 0000A0E1 		mov	r0, r0	@ nop
 3747              	.L69:
 3748              		.loc 1 368 0 is_stmt 0 discriminator 1
 3749 10e4 14309FE5 		ldr	r3, .L70
 3750 10e8 003093E5 		ldr	r3, [r3, #0]
 3751 10ec 000053E3 		cmp	r3, #0
 3752 10f0 FBFFFF0A 		beq	.L69
 369:../Jaime/tp.c ****     {
 370:../Jaime/tp.c ****         // Esperar interrupción
 371:../Jaime/tp.c ****     }
 372:../Jaime/tp.c **** }
 3753              		.loc 1 372 0 is_stmt 1
 3754 10f4 0CD04BE2 		sub	sp, fp, #12
 3755 10f8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3756 10fc 1EFF2FE1 		bx	lr
 3757              	.L71:
 3758              		.align	2
 3759              	.L70:
 3760 1100 1C000000 		.word	g_ts_ready
 3761              		.cfi_endproc
 3762              	.LFE10:
 3764              		.align	2
 3766              	ts_read_raw:
 3767              	.LFB11:
 373:../Jaime/tp.c **** 
 374:../Jaime/tp.c **** /*********************************************************************************************
 375:../Jaime/tp.c **** * name:     ts_read_raw
 376:../Jaime/tp.c **** * func:     Lee coordenadas crudas del ADC (bloqueante)
 377:../Jaime/tp.c **** *********************************************************************************************/
 378:../Jaime/tp.c **** static void ts_read_raw(int *xr, int *yr)
 379:../Jaime/tp.c **** {
 3768              		.loc 1 379 0
 3769              		.cfi_startproc
 3770              		@ Function supports interworking.
 3771              		@ args = 0, pretend = 0, frame = 8
 3772              		@ frame_needed = 1, uses_anonymous_args = 0
 3773 1104 0DC0A0E1 		mov	ip, sp
 3774              	.LCFI22:
 3775              		.cfi_def_cfa_register 12
 3776 1108 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3777 110c 04B04CE2 		sub	fp, ip, #4
 3778              		.cfi_offset 14, -8
 3779              		.cfi_offset 13, -12
 3780              		.cfi_offset 11, -16
 3781              	.LCFI23:
 3782              		.cfi_def_cfa 11, 4
 3783 1110 08D04DE2 		sub	sp, sp, #8
 3784 1114 10000BE5 		str	r0, [fp, #-16]
 3785 1118 14100BE5 		str	r1, [fp, #-20]
 380:../Jaime/tp.c ****     ts_wait_for_touch();
 3786              		.loc 1 380 0
 3787 111c E9FFFFEB 		bl	ts_wait_for_touch
 381:../Jaime/tp.c ****     *xr = g_ts_raw_x;
 3788              		.loc 1 381 0
 3789 1120 24309FE5 		ldr	r3, .L73
 3790 1124 002093E5 		ldr	r2, [r3, #0]
 3791 1128 10301BE5 		ldr	r3, [fp, #-16]
 3792 112c 002083E5 		str	r2, [r3, #0]
 382:../Jaime/tp.c ****     *yr = g_ts_raw_y;
 3793              		.loc 1 382 0
 3794 1130 18309FE5 		ldr	r3, .L73+4
 3795 1134 002093E5 		ldr	r2, [r3, #0]
 3796 1138 14301BE5 		ldr	r3, [fp, #-20]
 3797 113c 002083E5 		str	r2, [r3, #0]
 383:../Jaime/tp.c **** }
 3798              		.loc 1 383 0
 3799 1140 0CD04BE2 		sub	sp, fp, #12
 3800 1144 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3801 1148 1EFF2FE1 		bx	lr
 3802              	.L74:
 3803              		.align	2
 3804              	.L73:
 3805 114c 20000000 		.word	g_ts_raw_x
 3806 1150 24000000 		.word	g_ts_raw_y
 3807              		.cfi_endproc
 3808              	.LFE11:
 3810              		.align	2
 3812              	get_cal_point:
 3813              	.LFB12:
 384:../Jaime/tp.c **** 
 385:../Jaime/tp.c **** /*********************************************************************************************
 386:../Jaime/tp.c **** * name:     get_cal_point
 387:../Jaime/tp.c **** * func:     Muestra cruz, espera 12 toques y captura promedio con filtrado de extremos
 388:../Jaime/tp.c **** *********************************************************************************************/
 389:../Jaime/tp.c **** static void get_cal_point(int lcd_x, int lcd_y, int *ts_x, int *ts_y)
 390:../Jaime/tp.c **** {
 3814              		.loc 1 390 0
 3815              		.cfi_startproc
 3816              		@ Function supports interworking.
 3817              		@ args = 0, pretend = 0, frame = 136
 3818              		@ frame_needed = 1, uses_anonymous_args = 0
 3819 1154 0DC0A0E1 		mov	ip, sp
 3820              	.LCFI24:
 3821              		.cfi_def_cfa_register 12
 3822 1158 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3823 115c 04B04CE2 		sub	fp, ip, #4
 3824              		.cfi_offset 14, -8
 3825              		.cfi_offset 13, -12
 3826              		.cfi_offset 11, -16
 3827              	.LCFI25:
 3828              		.cfi_def_cfa 11, 4
 3829 1160 88D04DE2 		sub	sp, sp, #136
 3830 1164 88000BE5 		str	r0, [fp, #-136]
 3831 1168 8C100BE5 		str	r1, [fp, #-140]
 3832 116c 90200BE5 		str	r2, [fp, #-144]
 3833 1170 94300BE5 		str	r3, [fp, #-148]
 391:../Jaime/tp.c ****     int i, j;
 392:../Jaime/tp.c ****     int samples_x[12], samples_y[12];
 393:../Jaime/tp.c ****     int sum_x = 0, sum_y = 0;
 3834              		.loc 1 393 0
 3835 1174 0030A0E3 		mov	r3, #0
 3836 1178 18300BE5 		str	r3, [fp, #-24]
 3837 117c 0030A0E3 		mov	r3, #0
 3838 1180 1C300BE5 		str	r3, [fp, #-28]
 394:../Jaime/tp.c ****     int temp;
 395:../Jaime/tp.c ****     
 396:../Jaime/tp.c ****     draw_cross(lcd_x, lcd_y);
 3839              		.loc 1 396 0
 3840 1184 88001BE5 		ldr	r0, [fp, #-136]
 3841 1188 8C101BE5 		ldr	r1, [fp, #-140]
 3842 118c E4FEFFEB 		bl	draw_cross
 397:../Jaime/tp.c ****     Lcd_Dma_Trans();
 3843              		.loc 1 397 0
 3844 1190 FEFFFFEB 		bl	Lcd_Dma_Trans
 398:../Jaime/tp.c ****     Delay(80);  // Delay más largo para permitir posicionamiento preciso
 3845              		.loc 1 398 0
 3846 1194 5000A0E3 		mov	r0, #80
 3847 1198 FEFFFFEB 		bl	Delay
 399:../Jaime/tp.c ****     
 400:../Jaime/tp.c ****     // Tomar 12 muestras
 401:../Jaime/tp.c ****     for (i = 0; i < 12; i++)
 3848              		.loc 1 401 0
 3849 119c 0030A0E3 		mov	r3, #0
 3850 11a0 10300BE5 		str	r3, [fp, #-16]
 3851 11a4 0F0000EA 		b	.L76
 3852              	.L77:
 402:../Jaime/tp.c ****     {
 403:../Jaime/tp.c ****         ts_read_raw(&samples_x[i], &samples_y[i]);
 3853              		.loc 1 403 0 discriminator 2
 3854 11a8 10301BE5 		ldr	r3, [fp, #-16]
 3855 11ac 0331A0E1 		mov	r3, r3, asl #2
 3856 11b0 50204BE2 		sub	r2, fp, #80
 3857 11b4 032082E0 		add	r2, r2, r3
 3858 11b8 10301BE5 		ldr	r3, [fp, #-16]
 3859 11bc 0331A0E1 		mov	r3, r3, asl #2
 3860 11c0 80104BE2 		sub	r1, fp, #128
 3861 11c4 033081E0 		add	r3, r1, r3
 3862 11c8 0200A0E1 		mov	r0, r2
 3863 11cc 0310A0E1 		mov	r1, r3
 3864 11d0 CBFFFFEB 		bl	ts_read_raw
 404:../Jaime/tp.c ****         Delay(25);  // Pausa entre muestras para mejor estabilización
 3865              		.loc 1 404 0 discriminator 2
 3866 11d4 1900A0E3 		mov	r0, #25
 3867 11d8 FEFFFFEB 		bl	Delay
 401:../Jaime/tp.c ****     for (i = 0; i < 12; i++)
 3868              		.loc 1 401 0 discriminator 2
 3869 11dc 10301BE5 		ldr	r3, [fp, #-16]
 3870 11e0 013083E2 		add	r3, r3, #1
 3871 11e4 10300BE5 		str	r3, [fp, #-16]
 3872              	.L76:
 401:../Jaime/tp.c ****     for (i = 0; i < 12; i++)
 3873              		.loc 1 401 0 is_stmt 0 discriminator 1
 3874 11e8 10301BE5 		ldr	r3, [fp, #-16]
 3875 11ec 0B0053E3 		cmp	r3, #11
 3876 11f0 ECFFFFDA 		ble	.L77
 405:../Jaime/tp.c ****     }
 406:../Jaime/tp.c ****     
 407:../Jaime/tp.c ****     // Ordenar muestras X (bubble sort)
 408:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 3877              		.loc 1 408 0 is_stmt 1
 3878 11f4 0030A0E3 		mov	r3, #0
 3879 11f8 10300BE5 		str	r3, [fp, #-16]
 3880 11fc 3E0000EA 		b	.L78
 3881              	.L82:
 409:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 3882              		.loc 1 409 0
 3883 1200 0030A0E3 		mov	r3, #0
 3884 1204 14300BE5 		str	r3, [fp, #-20]
 3885 1208 330000EA 		b	.L79
 3886              	.L81:
 410:../Jaime/tp.c ****             if (samples_x[j] > samples_x[j + 1]) {
 3887              		.loc 1 410 0
 3888 120c 14201BE5 		ldr	r2, [fp, #-20]
 3889 1210 4330E0E3 		mvn	r3, #67
 3890 1214 0221A0E1 		mov	r2, r2, asl #2
 3891 1218 0C004BE2 		sub	r0, fp, #12
 3892 121c 022080E0 		add	r2, r0, r2
 3893 1220 033082E0 		add	r3, r2, r3
 3894 1224 002093E5 		ldr	r2, [r3, #0]
 3895 1228 14301BE5 		ldr	r3, [fp, #-20]
 3896 122c 011083E2 		add	r1, r3, #1
 3897 1230 4330E0E3 		mvn	r3, #67
 3898 1234 0111A0E1 		mov	r1, r1, asl #2
 3899 1238 0C004BE2 		sub	r0, fp, #12
 3900 123c 011080E0 		add	r1, r0, r1
 3901 1240 033081E0 		add	r3, r1, r3
 3902 1244 003093E5 		ldr	r3, [r3, #0]
 3903 1248 030052E1 		cmp	r2, r3
 3904 124c 1F0000DA 		ble	.L80
 411:../Jaime/tp.c ****                 temp = samples_x[j];
 3905              		.loc 1 411 0
 3906 1250 14201BE5 		ldr	r2, [fp, #-20]
 3907 1254 4330E0E3 		mvn	r3, #67
 3908 1258 0221A0E1 		mov	r2, r2, asl #2
 3909 125c 0C104BE2 		sub	r1, fp, #12
 3910 1260 022081E0 		add	r2, r1, r2
 3911 1264 033082E0 		add	r3, r2, r3
 3912 1268 003093E5 		ldr	r3, [r3, #0]
 3913 126c 20300BE5 		str	r3, [fp, #-32]
 412:../Jaime/tp.c ****                 samples_x[j] = samples_x[j + 1];
 3914              		.loc 1 412 0
 3915 1270 14301BE5 		ldr	r3, [fp, #-20]
 3916 1274 012083E2 		add	r2, r3, #1
 3917 1278 4330E0E3 		mvn	r3, #67
 3918 127c 0221A0E1 		mov	r2, r2, asl #2
 3919 1280 0C004BE2 		sub	r0, fp, #12
 3920 1284 022080E0 		add	r2, r0, r2
 3921 1288 033082E0 		add	r3, r2, r3
 3922 128c 002093E5 		ldr	r2, [r3, #0]
 3923 1290 14101BE5 		ldr	r1, [fp, #-20]
 3924 1294 4330E0E3 		mvn	r3, #67
 3925 1298 0111A0E1 		mov	r1, r1, asl #2
 3926 129c 0C004BE2 		sub	r0, fp, #12
 3927 12a0 011080E0 		add	r1, r0, r1
 3928 12a4 033081E0 		add	r3, r1, r3
 3929 12a8 002083E5 		str	r2, [r3, #0]
 413:../Jaime/tp.c ****                 samples_x[j + 1] = temp;
 3930              		.loc 1 413 0
 3931 12ac 14301BE5 		ldr	r3, [fp, #-20]
 3932 12b0 012083E2 		add	r2, r3, #1
 3933 12b4 4330E0E3 		mvn	r3, #67
 3934 12b8 0221A0E1 		mov	r2, r2, asl #2
 3935 12bc 0C104BE2 		sub	r1, fp, #12
 3936 12c0 022081E0 		add	r2, r1, r2
 3937 12c4 033082E0 		add	r3, r2, r3
 3938 12c8 20201BE5 		ldr	r2, [fp, #-32]
 3939 12cc 002083E5 		str	r2, [r3, #0]
 3940              	.L80:
 409:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 3941              		.loc 1 409 0
 3942 12d0 14301BE5 		ldr	r3, [fp, #-20]
 3943 12d4 013083E2 		add	r3, r3, #1
 3944 12d8 14300BE5 		str	r3, [fp, #-20]
 3945              	.L79:
 409:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 3946              		.loc 1 409 0 is_stmt 0 discriminator 1
 3947 12dc 10301BE5 		ldr	r3, [fp, #-16]
 3948 12e0 0B2063E2 		rsb	r2, r3, #11
 3949 12e4 14301BE5 		ldr	r3, [fp, #-20]
 3950 12e8 030052E1 		cmp	r2, r3
 3951 12ec C6FFFFCA 		bgt	.L81
 408:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 3952              		.loc 1 408 0 is_stmt 1
 3953 12f0 10301BE5 		ldr	r3, [fp, #-16]
 3954 12f4 013083E2 		add	r3, r3, #1
 3955 12f8 10300BE5 		str	r3, [fp, #-16]
 3956              	.L78:
 408:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 3957              		.loc 1 408 0 is_stmt 0 discriminator 1
 3958 12fc 10301BE5 		ldr	r3, [fp, #-16]
 3959 1300 0A0053E3 		cmp	r3, #10
 3960 1304 BDFFFFDA 		ble	.L82
 414:../Jaime/tp.c ****             }
 415:../Jaime/tp.c ****         }
 416:../Jaime/tp.c ****     }
 417:../Jaime/tp.c ****     
 418:../Jaime/tp.c ****     // Ordenar muestras Y
 419:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 3961              		.loc 1 419 0 is_stmt 1
 3962 1308 0030A0E3 		mov	r3, #0
 3963 130c 10300BE5 		str	r3, [fp, #-16]
 3964 1310 3E0000EA 		b	.L83
 3965              	.L87:
 420:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 3966              		.loc 1 420 0
 3967 1314 0030A0E3 		mov	r3, #0
 3968 1318 14300BE5 		str	r3, [fp, #-20]
 3969 131c 330000EA 		b	.L84
 3970              	.L86:
 421:../Jaime/tp.c ****             if (samples_y[j] > samples_y[j + 1]) {
 3971              		.loc 1 421 0
 3972 1320 14201BE5 		ldr	r2, [fp, #-20]
 3973 1324 7330E0E3 		mvn	r3, #115
 3974 1328 0221A0E1 		mov	r2, r2, asl #2
 3975 132c 0C004BE2 		sub	r0, fp, #12
 3976 1330 022080E0 		add	r2, r0, r2
 3977 1334 033082E0 		add	r3, r2, r3
 3978 1338 002093E5 		ldr	r2, [r3, #0]
 3979 133c 14301BE5 		ldr	r3, [fp, #-20]
 3980 1340 011083E2 		add	r1, r3, #1
 3981 1344 7330E0E3 		mvn	r3, #115
 3982 1348 0111A0E1 		mov	r1, r1, asl #2
 3983 134c 0C004BE2 		sub	r0, fp, #12
 3984 1350 011080E0 		add	r1, r0, r1
 3985 1354 033081E0 		add	r3, r1, r3
 3986 1358 003093E5 		ldr	r3, [r3, #0]
 3987 135c 030052E1 		cmp	r2, r3
 3988 1360 1F0000DA 		ble	.L85
 422:../Jaime/tp.c ****                 temp = samples_y[j];
 3989              		.loc 1 422 0
 3990 1364 14201BE5 		ldr	r2, [fp, #-20]
 3991 1368 7330E0E3 		mvn	r3, #115
 3992 136c 0221A0E1 		mov	r2, r2, asl #2
 3993 1370 0C104BE2 		sub	r1, fp, #12
 3994 1374 022081E0 		add	r2, r1, r2
 3995 1378 033082E0 		add	r3, r2, r3
 3996 137c 003093E5 		ldr	r3, [r3, #0]
 3997 1380 20300BE5 		str	r3, [fp, #-32]
 423:../Jaime/tp.c ****                 samples_y[j] = samples_y[j + 1];
 3998              		.loc 1 423 0
 3999 1384 14301BE5 		ldr	r3, [fp, #-20]
 4000 1388 012083E2 		add	r2, r3, #1
 4001 138c 7330E0E3 		mvn	r3, #115
 4002 1390 0221A0E1 		mov	r2, r2, asl #2
 4003 1394 0C004BE2 		sub	r0, fp, #12
 4004 1398 022080E0 		add	r2, r0, r2
 4005 139c 033082E0 		add	r3, r2, r3
 4006 13a0 002093E5 		ldr	r2, [r3, #0]
 4007 13a4 14101BE5 		ldr	r1, [fp, #-20]
 4008 13a8 7330E0E3 		mvn	r3, #115
 4009 13ac 0111A0E1 		mov	r1, r1, asl #2
 4010 13b0 0C004BE2 		sub	r0, fp, #12
 4011 13b4 011080E0 		add	r1, r0, r1
 4012 13b8 033081E0 		add	r3, r1, r3
 4013 13bc 002083E5 		str	r2, [r3, #0]
 424:../Jaime/tp.c ****                 samples_y[j + 1] = temp;
 4014              		.loc 1 424 0
 4015 13c0 14301BE5 		ldr	r3, [fp, #-20]
 4016 13c4 012083E2 		add	r2, r3, #1
 4017 13c8 7330E0E3 		mvn	r3, #115
 4018 13cc 0221A0E1 		mov	r2, r2, asl #2
 4019 13d0 0C104BE2 		sub	r1, fp, #12
 4020 13d4 022081E0 		add	r2, r1, r2
 4021 13d8 033082E0 		add	r3, r2, r3
 4022 13dc 20201BE5 		ldr	r2, [fp, #-32]
 4023 13e0 002083E5 		str	r2, [r3, #0]
 4024              	.L85:
 420:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 4025              		.loc 1 420 0
 4026 13e4 14301BE5 		ldr	r3, [fp, #-20]
 4027 13e8 013083E2 		add	r3, r3, #1
 4028 13ec 14300BE5 		str	r3, [fp, #-20]
 4029              	.L84:
 420:../Jaime/tp.c ****         for (j = 0; j < 11 - i; j++) {
 4030              		.loc 1 420 0 is_stmt 0 discriminator 1
 4031 13f0 10301BE5 		ldr	r3, [fp, #-16]
 4032 13f4 0B2063E2 		rsb	r2, r3, #11
 4033 13f8 14301BE5 		ldr	r3, [fp, #-20]
 4034 13fc 030052E1 		cmp	r2, r3
 4035 1400 C6FFFFCA 		bgt	.L86
 419:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 4036              		.loc 1 419 0 is_stmt 1
 4037 1404 10301BE5 		ldr	r3, [fp, #-16]
 4038 1408 013083E2 		add	r3, r3, #1
 4039 140c 10300BE5 		str	r3, [fp, #-16]
 4040              	.L83:
 419:../Jaime/tp.c ****     for (i = 0; i < 11; i++) {
 4041              		.loc 1 419 0 is_stmt 0 discriminator 1
 4042 1410 10301BE5 		ldr	r3, [fp, #-16]
 4043 1414 0A0053E3 		cmp	r3, #10
 4044 1418 BDFFFFDA 		ble	.L87
 425:../Jaime/tp.c ****             }
 426:../Jaime/tp.c ****         }
 427:../Jaime/tp.c ****     }
 428:../Jaime/tp.c ****     
 429:../Jaime/tp.c ****     // Promediar las 8 muestras centrales (descartando 2 mínimas y 2 máximas)
 430:../Jaime/tp.c ****     for (i = 2; i < 10; i++) {
 4045              		.loc 1 430 0 is_stmt 1
 4046 141c 0230A0E3 		mov	r3, #2
 4047 1420 10300BE5 		str	r3, [fp, #-16]
 4048 1424 160000EA 		b	.L88
 4049              	.L89:
 431:../Jaime/tp.c ****         sum_x += samples_x[i];
 4050              		.loc 1 431 0 discriminator 2
 4051 1428 10201BE5 		ldr	r2, [fp, #-16]
 4052 142c 4330E0E3 		mvn	r3, #67
 4053 1430 0221A0E1 		mov	r2, r2, asl #2
 4054 1434 0C004BE2 		sub	r0, fp, #12
 4055 1438 022080E0 		add	r2, r0, r2
 4056 143c 033082E0 		add	r3, r2, r3
 4057 1440 003093E5 		ldr	r3, [r3, #0]
 4058 1444 18201BE5 		ldr	r2, [fp, #-24]
 4059 1448 033082E0 		add	r3, r2, r3
 4060 144c 18300BE5 		str	r3, [fp, #-24]
 432:../Jaime/tp.c ****         sum_y += samples_y[i];
 4061              		.loc 1 432 0 discriminator 2
 4062 1450 10201BE5 		ldr	r2, [fp, #-16]
 4063 1454 7330E0E3 		mvn	r3, #115
 4064 1458 0221A0E1 		mov	r2, r2, asl #2
 4065 145c 0C104BE2 		sub	r1, fp, #12
 4066 1460 022081E0 		add	r2, r1, r2
 4067 1464 033082E0 		add	r3, r2, r3
 4068 1468 003093E5 		ldr	r3, [r3, #0]
 4069 146c 1C201BE5 		ldr	r2, [fp, #-28]
 4070 1470 033082E0 		add	r3, r2, r3
 4071 1474 1C300BE5 		str	r3, [fp, #-28]
 430:../Jaime/tp.c ****     for (i = 2; i < 10; i++) {
 4072              		.loc 1 430 0 discriminator 2
 4073 1478 10301BE5 		ldr	r3, [fp, #-16]
 4074 147c 013083E2 		add	r3, r3, #1
 4075 1480 10300BE5 		str	r3, [fp, #-16]
 4076              	.L88:
 430:../Jaime/tp.c ****     for (i = 2; i < 10; i++) {
 4077              		.loc 1 430 0 is_stmt 0 discriminator 1
 4078 1484 10301BE5 		ldr	r3, [fp, #-16]
 4079 1488 090053E3 		cmp	r3, #9
 4080 148c E5FFFFDA 		ble	.L89
 433:../Jaime/tp.c ****     }
 434:../Jaime/tp.c ****     
 435:../Jaime/tp.c ****     *ts_x = sum_x / 8;
 4081              		.loc 1 435 0 is_stmt 1
 4082 1490 18301BE5 		ldr	r3, [fp, #-24]
 4083 1494 072083E2 		add	r2, r3, #7
 4084 1498 000053E3 		cmp	r3, #0
 4085 149c 0230A0B1 		movlt	r3, r2
 4086 14a0 C331A0E1 		mov	r3, r3, asr #3
 4087 14a4 0320A0E1 		mov	r2, r3
 4088 14a8 90301BE5 		ldr	r3, [fp, #-144]
 4089 14ac 002083E5 		str	r2, [r3, #0]
 436:../Jaime/tp.c ****     *ts_y = sum_y / 8;
 4090              		.loc 1 436 0
 4091 14b0 1C301BE5 		ldr	r3, [fp, #-28]
 4092 14b4 072083E2 		add	r2, r3, #7
 4093 14b8 000053E3 		cmp	r3, #0
 4094 14bc 0230A0B1 		movlt	r3, r2
 4095 14c0 C331A0E1 		mov	r3, r3, asr #3
 4096 14c4 0320A0E1 		mov	r2, r3
 4097 14c8 94301BE5 		ldr	r3, [fp, #-148]
 4098 14cc 002083E5 		str	r2, [r3, #0]
 437:../Jaime/tp.c ****     
 438:../Jaime/tp.c ****     Delay(50);
 4099              		.loc 1 438 0
 4100 14d0 3200A0E3 		mov	r0, #50
 4101 14d4 FEFFFFEB 		bl	Delay
 439:../Jaime/tp.c ****     draw_cross(lcd_x, lcd_y);
 4102              		.loc 1 439 0
 4103 14d8 88001BE5 		ldr	r0, [fp, #-136]
 4104 14dc 8C101BE5 		ldr	r1, [fp, #-140]
 4105 14e0 0FFEFFEB 		bl	draw_cross
 440:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4106              		.loc 1 440 0
 4107 14e4 FEFFFFEB 		bl	Lcd_Dma_Trans
 441:../Jaime/tp.c **** }
 4108              		.loc 1 441 0
 4109 14e8 0CD04BE2 		sub	sp, fp, #12
 4110 14ec 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4111 14f0 1EFF2FE1 		bx	lr
 4112              		.cfi_endproc
 4113              	.LFE12:
 4115              		.section	.rodata
 4116 003e 0000     		.align	2
 4117              	.LC16:
 4118 0040 43616C69 		.ascii	"Calibracion 5pts\000"
 4118      62726163 
 4118      696F6E20 
 4118      35707473 
 4118      00
 4119 0051 000000   		.align	2
 4120              	.LC17:
 4121 0054 546F6361 		.ascii	"Toca punto A\000"
 4121      2070756E 
 4121      746F2041 
 4121      00
 4122 0061 000000   		.align	2
 4123              	.LC18:
 4124 0064 546F6361 		.ascii	"Toca punto B\000"
 4124      2070756E 
 4124      746F2042 
 4124      00
 4125 0071 000000   		.align	2
 4126              	.LC19:
 4127 0074 546F6361 		.ascii	"Toca punto C\000"
 4127      2070756E 
 4127      746F2043 
 4127      00
 4128 0081 000000   		.align	2
 4129              	.LC20:
 4130 0084 546F6361 		.ascii	"Toca punto D\000"
 4130      2070756E 
 4130      746F2044 
 4130      00
 4131 0091 000000   		.align	2
 4132              	.LC21:
 4133 0094 546F6361 		.ascii	"Toca centro E\000"
 4133      2063656E 
 4133      74726F20 
 4133      4500
 4134              		.global	__aeabi_ldivmod
 4135 00a2 0000     		.align	2
 4136              	.LC22:
 4137 00a4 3D3D3D20 		.ascii	"=== CALIBRACION OK ===\000"
 4137      43414C49 
 4137      42524143 
 4137      494F4E20 
 4137      4F4B203D 
 4138 00bb 00       		.align	2
 4139              	.LC23:
 4140 00bc 53776170 		.ascii	"Swap XY: SI\000"
 4140      2058593A 
 4140      20534900 
 4141              		.align	2
 4142              	.LC24:
 4143 00c8 53776170 		.ascii	"Swap XY: NO\000"
 4143      2058593A 
 4143      204E4F00 
 4144              		.align	2
 4145              	.LC25:
 4146 00d4 50756E74 		.ascii	"Puntos capturados OK\000"
 4146      6F732063 
 4146      61707475 
 4146      7261646F 
 4146      73204F4B 
 4147 00e9 000000   		.align	2
 4148              	.LC26:
 4149 00ec 46616374 		.ascii	"Factores calculados\000"
 4149      6F726573 
 4149      2063616C 
 4149      63756C61 
 4149      646F7300 
 4150              		.align	2
 4151              	.LC27:
 4152 0100 6B783A20 		.ascii	"kx: POSITIVO\000"
 4152      504F5349 
 4152      5449564F 
 4152      00
 4153 010d 000000   		.align	2
 4154              	.LC28:
 4155 0110 6B783A20 		.ascii	"kx: NEGATIVO\000"
 4155      4E454741 
 4155      5449564F 
 4155      00
 4156 011d 000000   		.align	2
 4157              	.LC29:
 4158 0120 6B793A20 		.ascii	"ky: POSITIVO\000"
 4158      504F5349 
 4158      5449564F 
 4158      00
 4159 012d 000000   		.align	2
 4160              	.LC30:
 4161 0130 6B793A20 		.ascii	"ky: NEGATIVO\000"
 4161      4E454741 
 4161      5449564F 
 4161      00
 4162 013d 000000   		.align	2
 4163              	.LC31:
 4164 0140 5B546F63 		.ascii	"[Toca para continuar]\000"
 4164      61207061 
 4164      72612063 
 4164      6F6E7469 
 4164      6E756172 
 4165              		.text
 4166              		.align	2
 4167              		.global	ts_calibrate_5pt
 4169              	ts_calibrate_5pt:
 4170              	.LFB13:
 442:../Jaime/tp.c **** 
 443:../Jaime/tp.c **** /*********************************************************************************************
 444:../Jaime/tp.c **** * name:     ts_calibrate_5pt
 445:../Jaime/tp.c **** * func:     Calibración de 5 puntos del touchscreen
 446:../Jaime/tp.c **** * para:     XRES - resolución horizontal, YRES - vertical, M - margen
 447:../Jaime/tp.c **** * comment:  Implementa método con detección swap XY y escalas con signo (fixed-point 16.16)
 448:../Jaime/tp.c **** *********************************************************************************************/
 449:../Jaime/tp.c **** void ts_calibrate_5pt(int XRES, int YRES, int M)
 450:../Jaime/tp.c **** {
 4171              		.loc 1 450 0
 4172              		.cfi_startproc
 4173              		@ Function supports interworking.
 4174              		@ args = 0, pretend = 0, frame = 144
 4175              		@ frame_needed = 1, uses_anonymous_args = 0
 4176 14f4 0DC0A0E1 		mov	ip, sp
 4177              	.LCFI26:
 4178              		.cfi_def_cfa_register 12
 4179 14f8 10D82DE9 		stmfd	sp!, {r4, fp, ip, lr, pc}
 4180 14fc 04B04CE2 		sub	fp, ip, #4
 4181              		.cfi_offset 14, -8
 4182              		.cfi_offset 13, -12
 4183              		.cfi_offset 11, -16
 4184              		.cfi_offset 4, -20
 4185              	.LCFI27:
 4186              		.cfi_def_cfa 11, 4
 4187 1500 94D04DE2 		sub	sp, sp, #148
 4188 1504 98000BE5 		str	r0, [fp, #-152]
 4189 1508 9C100BE5 		str	r1, [fp, #-156]
 4190 150c A0200BE5 		str	r2, [fp, #-160]
 451:../Jaime/tp.c ****     int A_lcd_x, A_lcd_y, A_ts_x, A_ts_y;
 452:../Jaime/tp.c ****     int B_lcd_x, B_lcd_y, B_ts_x, B_ts_y;
 453:../Jaime/tp.c ****     int C_lcd_x, C_lcd_y, C_ts_x, C_ts_y;
 454:../Jaime/tp.c ****     int D_lcd_x, D_lcd_y, D_ts_x, D_ts_y;
 455:../Jaime/tp.c ****     int E_lcd_x, E_lcd_y, E_ts_x, E_ts_y;
 456:../Jaime/tp.c ****     
 457:../Jaime/tp.c ****     int dx, dy;
 458:../Jaime/tp.c ****     int lcd_s, lcd_d;
 459:../Jaime/tp.c ****     int ts_s1, ts_s2, ts_d1, ts_d2;
 460:../Jaime/tp.c ****     long long temp;
 461:../Jaime/tp.c ****     
 462:../Jaime/tp.c ****     Lcd_Clr();
 4191              		.loc 1 462 0
 4192 1510 FEFFFFEB 		bl	Lcd_Clr
 463:../Jaime/tp.c ****     Lcd_Active_Clr();
 4193              		.loc 1 463 0
 4194 1514 FEFFFFEB 		bl	Lcd_Active_Clr
 464:../Jaime/tp.c ****     Lcd_DspAscII8x16(60, 110, BLACK, (unsigned char *)"Calibracion 5pts");
 4195              		.loc 1 464 0
 4196 1518 3C00A0E3 		mov	r0, #60
 4197 151c 6E10A0E3 		mov	r1, #110
 4198 1520 0F20A0E3 		mov	r2, #15
 4199 1524 88359FE5 		ldr	r3, .L101
 4200 1528 FEFFFFEB 		bl	Lcd_DspAscII8x16
 465:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4201              		.loc 1 465 0
 4202 152c FEFFFFEB 		bl	Lcd_Dma_Trans
 466:../Jaime/tp.c ****     Delay(100);
 4203              		.loc 1 466 0
 4204 1530 6400A0E3 		mov	r0, #100
 4205 1534 FEFFFFEB 		bl	Delay
 467:../Jaime/tp.c ****     
 468:../Jaime/tp.c ****     Lcd_Clr();
 4206              		.loc 1 468 0
 4207 1538 FEFFFFEB 		bl	Lcd_Clr
 469:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4208              		.loc 1 469 0
 4209 153c FEFFFFEB 		bl	Lcd_Dma_Trans
 470:../Jaime/tp.c ****     
 471:../Jaime/tp.c ****     // Definir posiciones LCD de los 5 puntos
 472:../Jaime/tp.c ****     A_lcd_x = M;            A_lcd_y = M;
 4210              		.loc 1 472 0
 4211 1540 A0301BE5 		ldr	r3, [fp, #-160]
 4212 1544 20300BE5 		str	r3, [fp, #-32]
 4213 1548 A0301BE5 		ldr	r3, [fp, #-160]
 4214 154c 24300BE5 		str	r3, [fp, #-36]
 473:../Jaime/tp.c ****     B_lcd_x = XRES - M;     B_lcd_y = M;
 4215              		.loc 1 473 0
 4216 1550 98201BE5 		ldr	r2, [fp, #-152]
 4217 1554 A0301BE5 		ldr	r3, [fp, #-160]
 4218 1558 023063E0 		rsb	r3, r3, r2
 4219 155c 28300BE5 		str	r3, [fp, #-40]
 4220 1560 A0301BE5 		ldr	r3, [fp, #-160]
 4221 1564 2C300BE5 		str	r3, [fp, #-44]
 474:../Jaime/tp.c ****     C_lcd_x = XRES - M;     C_lcd_y = YRES - M;
 4222              		.loc 1 474 0
 4223 1568 98201BE5 		ldr	r2, [fp, #-152]
 4224 156c A0301BE5 		ldr	r3, [fp, #-160]
 4225 1570 023063E0 		rsb	r3, r3, r2
 4226 1574 30300BE5 		str	r3, [fp, #-48]
 4227 1578 9C201BE5 		ldr	r2, [fp, #-156]
 4228 157c A0301BE5 		ldr	r3, [fp, #-160]
 4229 1580 023063E0 		rsb	r3, r3, r2
 4230 1584 34300BE5 		str	r3, [fp, #-52]
 475:../Jaime/tp.c ****     D_lcd_x = M;            D_lcd_y = YRES - M;
 4231              		.loc 1 475 0
 4232 1588 A0301BE5 		ldr	r3, [fp, #-160]
 4233 158c 38300BE5 		str	r3, [fp, #-56]
 4234 1590 9C201BE5 		ldr	r2, [fp, #-156]
 4235 1594 A0301BE5 		ldr	r3, [fp, #-160]
 4236 1598 023063E0 		rsb	r3, r3, r2
 4237 159c 3C300BE5 		str	r3, [fp, #-60]
 476:../Jaime/tp.c ****     E_lcd_x = XRES / 2;     E_lcd_y = YRES / 2;
 4238              		.loc 1 476 0
 4239 15a0 98301BE5 		ldr	r3, [fp, #-152]
 4240 15a4 A32FA0E1 		mov	r2, r3, lsr #31
 4241 15a8 033082E0 		add	r3, r2, r3
 4242 15ac C330A0E1 		mov	r3, r3, asr #1
 4243 15b0 40300BE5 		str	r3, [fp, #-64]
 4244 15b4 9C301BE5 		ldr	r3, [fp, #-156]
 4245 15b8 A32FA0E1 		mov	r2, r3, lsr #31
 4246 15bc 033082E0 		add	r3, r2, r3
 4247 15c0 C330A0E1 		mov	r3, r3, asr #1
 4248 15c4 44300BE5 		str	r3, [fp, #-68]
 477:../Jaime/tp.c ****     
 478:../Jaime/tp.c ****     // Capturar punto A
 479:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto A");
 4249              		.loc 1 479 0
 4250 15c8 0A00A0E3 		mov	r0, #10
 4251 15cc 0A10A0E3 		mov	r1, #10
 4252 15d0 0F20A0E3 		mov	r2, #15
 4253 15d4 DC349FE5 		ldr	r3, .L101+4
 4254 15d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 480:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4255              		.loc 1 480 0
 4256 15dc FEFFFFEB 		bl	Lcd_Dma_Trans
 481:../Jaime/tp.c ****     get_cal_point(A_lcd_x, A_lcd_y, &A_ts_x, &A_ts_y);
 4257              		.loc 1 481 0
 4258 15e0 70204BE2 		sub	r2, fp, #112
 4259 15e4 74304BE2 		sub	r3, fp, #116
 4260 15e8 20001BE5 		ldr	r0, [fp, #-32]
 4261 15ec 24101BE5 		ldr	r1, [fp, #-36]
 4262 15f0 D7FEFFEB 		bl	get_cal_point
 482:../Jaime/tp.c ****     
 483:../Jaime/tp.c ****     // Capturar punto B
 484:../Jaime/tp.c ****     Lcd_Clr();
 4263              		.loc 1 484 0
 4264 15f4 FEFFFFEB 		bl	Lcd_Clr
 485:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto B");
 4265              		.loc 1 485 0
 4266 15f8 0A00A0E3 		mov	r0, #10
 4267 15fc 0A10A0E3 		mov	r1, #10
 4268 1600 0F20A0E3 		mov	r2, #15
 4269 1604 B0349FE5 		ldr	r3, .L101+8
 4270 1608 FEFFFFEB 		bl	Lcd_DspAscII6x8
 486:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4271              		.loc 1 486 0
 4272 160c FEFFFFEB 		bl	Lcd_Dma_Trans
 487:../Jaime/tp.c ****     get_cal_point(B_lcd_x, B_lcd_y, &B_ts_x, &B_ts_y);
 4273              		.loc 1 487 0
 4274 1610 78204BE2 		sub	r2, fp, #120
 4275 1614 7C304BE2 		sub	r3, fp, #124
 4276 1618 28001BE5 		ldr	r0, [fp, #-40]
 4277 161c 2C101BE5 		ldr	r1, [fp, #-44]
 4278 1620 CBFEFFEB 		bl	get_cal_point
 488:../Jaime/tp.c ****     
 489:../Jaime/tp.c ****     // Capturar punto C
 490:../Jaime/tp.c ****     Lcd_Clr();
 4279              		.loc 1 490 0
 4280 1624 FEFFFFEB 		bl	Lcd_Clr
 491:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto C");
 4281              		.loc 1 491 0
 4282 1628 0A00A0E3 		mov	r0, #10
 4283 162c 0A10A0E3 		mov	r1, #10
 4284 1630 0F20A0E3 		mov	r2, #15
 4285 1634 84349FE5 		ldr	r3, .L101+12
 4286 1638 FEFFFFEB 		bl	Lcd_DspAscII6x8
 492:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4287              		.loc 1 492 0
 4288 163c FEFFFFEB 		bl	Lcd_Dma_Trans
 493:../Jaime/tp.c ****     get_cal_point(C_lcd_x, C_lcd_y, &C_ts_x, &C_ts_y);
 4289              		.loc 1 493 0
 4290 1640 80204BE2 		sub	r2, fp, #128
 4291 1644 84304BE2 		sub	r3, fp, #132
 4292 1648 30001BE5 		ldr	r0, [fp, #-48]
 4293 164c 34101BE5 		ldr	r1, [fp, #-52]
 4294 1650 BFFEFFEB 		bl	get_cal_point
 494:../Jaime/tp.c ****     
 495:../Jaime/tp.c ****     // Capturar punto D
 496:../Jaime/tp.c ****     Lcd_Clr();
 4295              		.loc 1 496 0
 4296 1654 FEFFFFEB 		bl	Lcd_Clr
 497:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto D");
 4297              		.loc 1 497 0
 4298 1658 0A00A0E3 		mov	r0, #10
 4299 165c 0A10A0E3 		mov	r1, #10
 4300 1660 0F20A0E3 		mov	r2, #15
 4301 1664 58349FE5 		ldr	r3, .L101+16
 4302 1668 FEFFFFEB 		bl	Lcd_DspAscII6x8
 498:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4303              		.loc 1 498 0
 4304 166c FEFFFFEB 		bl	Lcd_Dma_Trans
 499:../Jaime/tp.c ****     get_cal_point(D_lcd_x, D_lcd_y, &D_ts_x, &D_ts_y);
 4305              		.loc 1 499 0
 4306 1670 88204BE2 		sub	r2, fp, #136
 4307 1674 8C304BE2 		sub	r3, fp, #140
 4308 1678 38001BE5 		ldr	r0, [fp, #-56]
 4309 167c 3C101BE5 		ldr	r1, [fp, #-60]
 4310 1680 B3FEFFEB 		bl	get_cal_point
 500:../Jaime/tp.c ****     
 501:../Jaime/tp.c ****     // Capturar punto E (centro)
 502:../Jaime/tp.c ****     Lcd_Clr();
 4311              		.loc 1 502 0
 4312 1684 FEFFFFEB 		bl	Lcd_Clr
 503:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca centro E");
 4313              		.loc 1 503 0
 4314 1688 0A00A0E3 		mov	r0, #10
 4315 168c 0A10A0E3 		mov	r1, #10
 4316 1690 0F20A0E3 		mov	r2, #15
 4317 1694 2C349FE5 		ldr	r3, .L101+20
 4318 1698 FEFFFFEB 		bl	Lcd_DspAscII6x8
 504:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4319              		.loc 1 504 0
 4320 169c FEFFFFEB 		bl	Lcd_Dma_Trans
 505:../Jaime/tp.c ****     get_cal_point(E_lcd_x, E_lcd_y, &E_ts_x, &E_ts_y);
 4321              		.loc 1 505 0
 4322 16a0 90204BE2 		sub	r2, fp, #144
 4323 16a4 94304BE2 		sub	r3, fp, #148
 4324 16a8 40001BE5 		ldr	r0, [fp, #-64]
 4325 16ac 44101BE5 		ldr	r1, [fp, #-68]
 4326 16b0 A7FEFFEB 		bl	get_cal_point
 506:../Jaime/tp.c ****     
 507:../Jaime/tp.c ****     // DETECCIÓN DE SWAP XY
 508:../Jaime/tp.c ****     dx = B_ts_x - A_ts_x;
 4327              		.loc 1 508 0
 4328 16b4 78201BE5 		ldr	r2, [fp, #-120]
 4329 16b8 70301BE5 		ldr	r3, [fp, #-112]
 4330 16bc 023063E0 		rsb	r3, r3, r2
 4331 16c0 18300BE5 		str	r3, [fp, #-24]
 509:../Jaime/tp.c ****     dy = B_ts_y - A_ts_y;
 4332              		.loc 1 509 0
 4333 16c4 7C201BE5 		ldr	r2, [fp, #-124]
 4334 16c8 74301BE5 		ldr	r3, [fp, #-116]
 4335 16cc 023063E0 		rsb	r3, r3, r2
 4336 16d0 1C300BE5 		str	r3, [fp, #-28]
 510:../Jaime/tp.c ****     if (dx < 0) dx = -dx;
 4337              		.loc 1 510 0
 4338 16d4 18301BE5 		ldr	r3, [fp, #-24]
 4339 16d8 000053E3 		cmp	r3, #0
 4340 16dc 020000AA 		bge	.L91
 4341              		.loc 1 510 0 is_stmt 0 discriminator 1
 4342 16e0 18301BE5 		ldr	r3, [fp, #-24]
 4343 16e4 003063E2 		rsb	r3, r3, #0
 4344 16e8 18300BE5 		str	r3, [fp, #-24]
 4345              	.L91:
 511:../Jaime/tp.c ****     if (dy < 0) dy = -dy;
 4346              		.loc 1 511 0 is_stmt 1
 4347 16ec 1C301BE5 		ldr	r3, [fp, #-28]
 4348 16f0 000053E3 		cmp	r3, #0
 4349 16f4 020000AA 		bge	.L92
 4350              		.loc 1 511 0 is_stmt 0 discriminator 1
 4351 16f8 1C301BE5 		ldr	r3, [fp, #-28]
 4352 16fc 003063E2 		rsb	r3, r3, #0
 4353 1700 1C300BE5 		str	r3, [fp, #-28]
 4354              	.L92:
 512:../Jaime/tp.c ****     
 513:../Jaime/tp.c ****     if (dx > dy)
 4355              		.loc 1 513 0 is_stmt 1
 4356 1704 18201BE5 		ldr	r2, [fp, #-24]
 4357 1708 1C301BE5 		ldr	r3, [fp, #-28]
 4358 170c 030052E1 		cmp	r2, r3
 4359 1710 030000DA 		ble	.L93
 514:../Jaime/tp.c ****     {
 515:../Jaime/tp.c ****         g_swap_xy = 0;
 4360              		.loc 1 515 0
 4361 1714 B0339FE5 		ldr	r3, .L101+24
 4362 1718 0020A0E3 		mov	r2, #0
 4363 171c 002083E5 		str	r2, [r3, #0]
 4364 1720 200000EA 		b	.L94
 4365              	.L93:
 4366              	.LBB2:
 516:../Jaime/tp.c ****     }
 517:../Jaime/tp.c ****     else
 518:../Jaime/tp.c ****     {
 519:../Jaime/tp.c ****         g_swap_xy = 1;
 4367              		.loc 1 519 0
 4368 1724 A0339FE5 		ldr	r3, .L101+24
 4369 1728 0120A0E3 		mov	r2, #1
 4370 172c 002083E5 		str	r2, [r3, #0]
 520:../Jaime/tp.c ****         int tmp;
 521:../Jaime/tp.c ****         #define SWAP(a, b) { tmp = a; a = b; b = tmp; }
 522:../Jaime/tp.c ****         SWAP(A_ts_x, A_ts_y);
 4371              		.loc 1 522 0
 4372 1730 70301BE5 		ldr	r3, [fp, #-112]
 4373 1734 48300BE5 		str	r3, [fp, #-72]
 4374 1738 74301BE5 		ldr	r3, [fp, #-116]
 4375 173c 70300BE5 		str	r3, [fp, #-112]
 4376 1740 48301BE5 		ldr	r3, [fp, #-72]
 4377 1744 74300BE5 		str	r3, [fp, #-116]
 523:../Jaime/tp.c ****         SWAP(B_ts_x, B_ts_y);
 4378              		.loc 1 523 0
 4379 1748 78301BE5 		ldr	r3, [fp, #-120]
 4380 174c 48300BE5 		str	r3, [fp, #-72]
 4381 1750 7C301BE5 		ldr	r3, [fp, #-124]
 4382 1754 78300BE5 		str	r3, [fp, #-120]
 4383 1758 48301BE5 		ldr	r3, [fp, #-72]
 4384 175c 7C300BE5 		str	r3, [fp, #-124]
 524:../Jaime/tp.c ****         SWAP(C_ts_x, C_ts_y);
 4385              		.loc 1 524 0
 4386 1760 80301BE5 		ldr	r3, [fp, #-128]
 4387 1764 48300BE5 		str	r3, [fp, #-72]
 4388 1768 84301BE5 		ldr	r3, [fp, #-132]
 4389 176c 80300BE5 		str	r3, [fp, #-128]
 4390 1770 48301BE5 		ldr	r3, [fp, #-72]
 4391 1774 84300BE5 		str	r3, [fp, #-132]
 525:../Jaime/tp.c ****         SWAP(D_ts_x, D_ts_y);
 4392              		.loc 1 525 0
 4393 1778 88301BE5 		ldr	r3, [fp, #-136]
 4394 177c 48300BE5 		str	r3, [fp, #-72]
 4395 1780 8C301BE5 		ldr	r3, [fp, #-140]
 4396 1784 88300BE5 		str	r3, [fp, #-136]
 4397 1788 48301BE5 		ldr	r3, [fp, #-72]
 4398 178c 8C300BE5 		str	r3, [fp, #-140]
 526:../Jaime/tp.c ****         SWAP(E_ts_x, E_ts_y);
 4399              		.loc 1 526 0
 4400 1790 90301BE5 		ldr	r3, [fp, #-144]
 4401 1794 48300BE5 		str	r3, [fp, #-72]
 4402 1798 94301BE5 		ldr	r3, [fp, #-148]
 4403 179c 90300BE5 		str	r3, [fp, #-144]
 4404 17a0 48301BE5 		ldr	r3, [fp, #-72]
 4405 17a4 94300BE5 		str	r3, [fp, #-148]
 4406              	.L94:
 4407              	.LBE2:
 527:../Jaime/tp.c ****     }
 528:../Jaime/tp.c ****     
 529:../Jaime/tp.c ****     // CÁLCULO DEL CENTRO - usar promedio de los 4 puntos para mayor precisión
 530:../Jaime/tp.c ****     g_ts_xc = (A_ts_x + B_ts_x + C_ts_x + D_ts_x) / 4;
 4408              		.loc 1 530 0
 4409 17a8 70201BE5 		ldr	r2, [fp, #-112]
 4410 17ac 78301BE5 		ldr	r3, [fp, #-120]
 4411 17b0 032082E0 		add	r2, r2, r3
 4412 17b4 80301BE5 		ldr	r3, [fp, #-128]
 4413 17b8 032082E0 		add	r2, r2, r3
 4414 17bc 88301BE5 		ldr	r3, [fp, #-136]
 4415 17c0 033082E0 		add	r3, r2, r3
 4416 17c4 032083E2 		add	r2, r3, #3
 4417 17c8 000053E3 		cmp	r3, #0
 4418 17cc 0230A0B1 		movlt	r3, r2
 4419 17d0 4331A0E1 		mov	r3, r3, asr #2
 4420 17d4 0320A0E1 		mov	r2, r3
 4421 17d8 F0329FE5 		ldr	r3, .L101+28
 4422 17dc 002083E5 		str	r2, [r3, #0]
 531:../Jaime/tp.c ****     g_ts_yc = (A_ts_y + B_ts_y + C_ts_y + D_ts_y) / 4;
 4423              		.loc 1 531 0
 4424 17e0 74201BE5 		ldr	r2, [fp, #-116]
 4425 17e4 7C301BE5 		ldr	r3, [fp, #-124]
 4426 17e8 032082E0 		add	r2, r2, r3
 4427 17ec 84301BE5 		ldr	r3, [fp, #-132]
 4428 17f0 032082E0 		add	r2, r2, r3
 4429 17f4 8C301BE5 		ldr	r3, [fp, #-140]
 4430 17f8 033082E0 		add	r3, r2, r3
 4431 17fc 032083E2 		add	r2, r3, #3
 4432 1800 000053E3 		cmp	r3, #0
 4433 1804 0230A0B1 		movlt	r3, r2
 4434 1808 4331A0E1 		mov	r3, r3, asr #2
 4435 180c 0320A0E1 		mov	r2, r3
 4436 1810 BC329FE5 		ldr	r3, .L101+32
 4437 1814 002083E5 		str	r2, [r3, #0]
 532:../Jaime/tp.c ****     g_lcd_xc = XRES / 2;
 4438              		.loc 1 532 0
 4439 1818 98301BE5 		ldr	r3, [fp, #-152]
 4440 181c A32FA0E1 		mov	r2, r3, lsr #31
 4441 1820 033082E0 		add	r3, r2, r3
 4442 1824 C330A0E1 		mov	r3, r3, asr #1
 4443 1828 0320A0E1 		mov	r2, r3
 4444 182c A4329FE5 		ldr	r3, .L101+36
 4445 1830 002083E5 		str	r2, [r3, #0]
 533:../Jaime/tp.c ****     g_lcd_yc = YRES / 2;
 4446              		.loc 1 533 0
 4447 1834 9C301BE5 		ldr	r3, [fp, #-156]
 4448 1838 A32FA0E1 		mov	r2, r3, lsr #31
 4449 183c 033082E0 		add	r3, r2, r3
 4450 1840 C330A0E1 		mov	r3, r3, asr #1
 4451 1844 0320A0E1 		mov	r2, r3
 4452 1848 8C329FE5 		ldr	r3, .L101+40
 4453 184c 002083E5 		str	r2, [r3, #0]
 534:../Jaime/tp.c ****     
 535:../Jaime/tp.c ****     // CÁLCULO DE kx y ky (CON SIGNO - fixed-point 16.16)
 536:../Jaime/tp.c ****     lcd_s = XRES - 2 * M;
 4454              		.loc 1 536 0
 4455 1850 A0201BE5 		ldr	r2, [fp, #-160]
 4456 1854 0230A0E1 		mov	r3, r2
 4457 1858 833FA0E1 		mov	r3, r3, asl #31
 4458 185c 033062E0 		rsb	r3, r2, r3
 4459 1860 8330A0E1 		mov	r3, r3, asl #1
 4460 1864 0320A0E1 		mov	r2, r3
 4461 1868 98301BE5 		ldr	r3, [fp, #-152]
 4462 186c 033082E0 		add	r3, r2, r3
 4463 1870 4C300BE5 		str	r3, [fp, #-76]
 537:../Jaime/tp.c ****     lcd_d = YRES - 2 * M;
 4464              		.loc 1 537 0
 4465 1874 A0201BE5 		ldr	r2, [fp, #-160]
 4466 1878 0230A0E1 		mov	r3, r2
 4467 187c 833FA0E1 		mov	r3, r3, asl #31
 4468 1880 033062E0 		rsb	r3, r2, r3
 4469 1884 8330A0E1 		mov	r3, r3, asl #1
 4470 1888 0320A0E1 		mov	r2, r3
 4471 188c 9C301BE5 		ldr	r3, [fp, #-156]
 4472 1890 033082E0 		add	r3, r2, r3
 4473 1894 50300BE5 		str	r3, [fp, #-80]
 538:../Jaime/tp.c ****     
 539:../Jaime/tp.c ****     ts_s1 = B_ts_x - A_ts_x;
 4474              		.loc 1 539 0
 4475 1898 78201BE5 		ldr	r2, [fp, #-120]
 4476 189c 70301BE5 		ldr	r3, [fp, #-112]
 4477 18a0 023063E0 		rsb	r3, r3, r2
 4478 18a4 54300BE5 		str	r3, [fp, #-84]
 540:../Jaime/tp.c ****     ts_s2 = C_ts_x - D_ts_x;
 4479              		.loc 1 540 0
 4480 18a8 80201BE5 		ldr	r2, [fp, #-128]
 4481 18ac 88301BE5 		ldr	r3, [fp, #-136]
 4482 18b0 023063E0 		rsb	r3, r3, r2
 4483 18b4 58300BE5 		str	r3, [fp, #-88]
 541:../Jaime/tp.c ****     ts_d1 = D_ts_y - A_ts_y;
 4484              		.loc 1 541 0
 4485 18b8 8C201BE5 		ldr	r2, [fp, #-140]
 4486 18bc 74301BE5 		ldr	r3, [fp, #-116]
 4487 18c0 023063E0 		rsb	r3, r3, r2
 4488 18c4 5C300BE5 		str	r3, [fp, #-92]
 542:../Jaime/tp.c ****     ts_d2 = C_ts_y - B_ts_y;
 4489              		.loc 1 542 0
 4490 18c8 84201BE5 		ldr	r2, [fp, #-132]
 4491 18cc 7C301BE5 		ldr	r3, [fp, #-124]
 4492 18d0 023063E0 		rsb	r3, r3, r2
 4493 18d4 60300BE5 		str	r3, [fp, #-96]
 543:../Jaime/tp.c ****     
 544:../Jaime/tp.c ****     // Usar promedios para mayor precisión
 545:../Jaime/tp.c ****     temp = (long long)lcd_s << 17;  // Multiplicar por 2 usando shift (<<17 = <<16 * 2)
 4494              		.loc 1 545 0
 4495 18d8 4C301BE5 		ldr	r3, [fp, #-76]
 4496 18dc C34FA0E1 		mov	r4, r3, asr #31
 4497 18e0 A327A0E1 		mov	r2, r3, lsr #15
 4498 18e4 8418A0E1 		mov	r1, r4, asl #17
 4499 18e8 022081E1 		orr	r2, r1, r2
 4500 18ec 68200BE5 		str	r2, [fp, #-104]
 4501 18f0 8338A0E1 		mov	r3, r3, asl #17
 4502 18f4 6C300BE5 		str	r3, [fp, #-108]
 546:../Jaime/tp.c ****     g_kx_fp = (long)(temp / (ts_s1 + ts_s2));
 4503              		.loc 1 546 0
 4504 18f8 54201BE5 		ldr	r2, [fp, #-84]
 4505 18fc 58301BE5 		ldr	r3, [fp, #-88]
 4506 1900 033082E0 		add	r3, r2, r3
 4507 1904 C34FA0E1 		mov	r4, r3, asr #31
 4508 1908 6C104BE2 		sub	r1, fp, #108
 4509 190c 030091E8 		ldmia	r1, {r0-r1}
 4510 1910 0320A0E1 		mov	r2, r3
 4511 1914 0430A0E1 		mov	r3, r4
 4512 1918 FEFFFFEB 		bl	__aeabi_ldivmod
 4513 191c 0030A0E1 		mov	r3, r0
 4514 1920 0140A0E1 		mov	r4, r1
 4515 1924 0320A0E1 		mov	r2, r3
 4516 1928 B0319FE5 		ldr	r3, .L101+44
 4517 192c 002083E5 		str	r2, [r3, #0]
 547:../Jaime/tp.c ****     
 548:../Jaime/tp.c ****     temp = (long long)lcd_d << 17;  // Multiplicar por 2 usando shift
 4518              		.loc 1 548 0
 4519 1930 50301BE5 		ldr	r3, [fp, #-80]
 4520 1934 C34FA0E1 		mov	r4, r3, asr #31
 4521 1938 A327A0E1 		mov	r2, r3, lsr #15
 4522 193c 8418A0E1 		mov	r1, r4, asl #17
 4523 1940 022081E1 		orr	r2, r1, r2
 4524 1944 68200BE5 		str	r2, [fp, #-104]
 4525 1948 8338A0E1 		mov	r3, r3, asl #17
 4526 194c 6C300BE5 		str	r3, [fp, #-108]
 549:../Jaime/tp.c ****     g_ky_fp = (long)(temp / (ts_d1 + ts_d2));
 4527              		.loc 1 549 0
 4528 1950 5C201BE5 		ldr	r2, [fp, #-92]
 4529 1954 60301BE5 		ldr	r3, [fp, #-96]
 4530 1958 033082E0 		add	r3, r2, r3
 4531 195c C34FA0E1 		mov	r4, r3, asr #31
 4532 1960 6C104BE2 		sub	r1, fp, #108
 4533 1964 030091E8 		ldmia	r1, {r0-r1}
 4534 1968 0320A0E1 		mov	r2, r3
 4535 196c 0430A0E1 		mov	r3, r4
 4536 1970 FEFFFFEB 		bl	__aeabi_ldivmod
 4537 1974 0030A0E1 		mov	r3, r0
 4538 1978 0140A0E1 		mov	r4, r1
 4539 197c 0320A0E1 		mov	r2, r3
 4540 1980 5C319FE5 		ldr	r3, .L101+48
 4541 1984 002083E5 		str	r2, [r3, #0]
 550:../Jaime/tp.c ****     
 551:../Jaime/tp.c ****     // Mostrar resultados de calibración
 552:../Jaime/tp.c ****     Lcd_Clr();
 4542              		.loc 1 552 0
 4543 1988 FEFFFFEB 		bl	Lcd_Clr
 553:../Jaime/tp.c ****     
 554:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"=== CALIBRACION OK ===");
 4544              		.loc 1 554 0
 4545 198c 0A00A0E3 		mov	r0, #10
 4546 1990 0A10A0E3 		mov	r1, #10
 4547 1994 0F20A0E3 		mov	r2, #15
 4548 1998 48319FE5 		ldr	r3, .L101+52
 4549 199c FEFFFFEB 		bl	Lcd_DspAscII6x8
 555:../Jaime/tp.c ****     
 556:../Jaime/tp.c ****     if (g_swap_xy)
 4550              		.loc 1 556 0
 4551 19a0 24319FE5 		ldr	r3, .L101+24
 4552 19a4 003093E5 		ldr	r3, [r3, #0]
 4553 19a8 000053E3 		cmp	r3, #0
 4554 19ac 0500000A 		beq	.L95
 557:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 30, BLACK, (unsigned char *)"Swap XY: SI");
 4555              		.loc 1 557 0
 4556 19b0 0A00A0E3 		mov	r0, #10
 4557 19b4 1E10A0E3 		mov	r1, #30
 4558 19b8 0F20A0E3 		mov	r2, #15
 4559 19bc 28319FE5 		ldr	r3, .L101+56
 4560 19c0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 4561 19c4 040000EA 		b	.L96
 4562              	.L95:
 558:../Jaime/tp.c ****     else
 559:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 30, BLACK, (unsigned char *)"Swap XY: NO");
 4563              		.loc 1 559 0
 4564 19c8 0A00A0E3 		mov	r0, #10
 4565 19cc 1E10A0E3 		mov	r1, #30
 4566 19d0 0F20A0E3 		mov	r2, #15
 4567 19d4 14319FE5 		ldr	r3, .L101+60
 4568 19d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 4569              	.L96:
 560:../Jaime/tp.c ****     
 561:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 50, BLACK, (unsigned char *)"Puntos capturados OK");
 4570              		.loc 1 561 0
 4571 19dc 0A00A0E3 		mov	r0, #10
 4572 19e0 3210A0E3 		mov	r1, #50
 4573 19e4 0F20A0E3 		mov	r2, #15
 4574 19e8 04319FE5 		ldr	r3, .L101+64
 4575 19ec FEFFFFEB 		bl	Lcd_DspAscII6x8
 562:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 70, BLACK, (unsigned char *)"Factores calculados");
 4576              		.loc 1 562 0
 4577 19f0 0A00A0E3 		mov	r0, #10
 4578 19f4 4610A0E3 		mov	r1, #70
 4579 19f8 0F20A0E3 		mov	r2, #15
 4580 19fc F4309FE5 		ldr	r3, .L101+68
 4581 1a00 FEFFFFEB 		bl	Lcd_DspAscII6x8
 563:../Jaime/tp.c ****     
 564:../Jaime/tp.c ****     // Mostrar signo de las escalas
 565:../Jaime/tp.c ****     if (g_kx_fp > 0)
 4582              		.loc 1 565 0
 4583 1a04 D4309FE5 		ldr	r3, .L101+44
 4584 1a08 003093E5 		ldr	r3, [r3, #0]
 4585 1a0c 000053E3 		cmp	r3, #0
 4586 1a10 050000DA 		ble	.L97
 566:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 90, BLACK, (unsigned char *)"kx: POSITIVO");
 4587              		.loc 1 566 0
 4588 1a14 0A00A0E3 		mov	r0, #10
 4589 1a18 5A10A0E3 		mov	r1, #90
 4590 1a1c 0F20A0E3 		mov	r2, #15
 4591 1a20 D4309FE5 		ldr	r3, .L101+72
 4592 1a24 FEFFFFEB 		bl	Lcd_DspAscII6x8
 4593 1a28 040000EA 		b	.L98
 4594              	.L97:
 567:../Jaime/tp.c ****     else
 568:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 90, BLACK, (unsigned char *)"kx: NEGATIVO");
 4595              		.loc 1 568 0
 4596 1a2c 0A00A0E3 		mov	r0, #10
 4597 1a30 5A10A0E3 		mov	r1, #90
 4598 1a34 0F20A0E3 		mov	r2, #15
 4599 1a38 C0309FE5 		ldr	r3, .L101+76
 4600 1a3c FEFFFFEB 		bl	Lcd_DspAscII6x8
 4601              	.L98:
 569:../Jaime/tp.c ****         
 570:../Jaime/tp.c ****     if (g_ky_fp > 0)
 4602              		.loc 1 570 0
 4603 1a40 9C309FE5 		ldr	r3, .L101+48
 4604 1a44 003093E5 		ldr	r3, [r3, #0]
 4605 1a48 000053E3 		cmp	r3, #0
 4606 1a4c 050000DA 		ble	.L99
 571:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 110, BLACK, (unsigned char *)"ky: POSITIVO");
 4607              		.loc 1 571 0
 4608 1a50 0A00A0E3 		mov	r0, #10
 4609 1a54 6E10A0E3 		mov	r1, #110
 4610 1a58 0F20A0E3 		mov	r2, #15
 4611 1a5c A0309FE5 		ldr	r3, .L101+80
 4612 1a60 FEFFFFEB 		bl	Lcd_DspAscII6x8
 4613 1a64 040000EA 		b	.L100
 4614              	.L99:
 572:../Jaime/tp.c ****     else
 573:../Jaime/tp.c ****         Lcd_DspAscII6x8(10, 110, BLACK, (unsigned char *)"ky: NEGATIVO");
 4615              		.loc 1 573 0
 4616 1a68 0A00A0E3 		mov	r0, #10
 4617 1a6c 6E10A0E3 		mov	r1, #110
 4618 1a70 0F20A0E3 		mov	r2, #15
 4619 1a74 8C309FE5 		ldr	r3, .L101+84
 4620 1a78 FEFFFFEB 		bl	Lcd_DspAscII6x8
 4621              	.L100:
 574:../Jaime/tp.c ****     
 575:../Jaime/tp.c ****     Lcd_DspAscII6x8(10, 140, BLACK, (unsigned char *)"[Toca para continuar]");
 4622              		.loc 1 575 0
 4623 1a7c 0A00A0E3 		mov	r0, #10
 4624 1a80 8C10A0E3 		mov	r1, #140
 4625 1a84 0F20A0E3 		mov	r2, #15
 4626 1a88 7C309FE5 		ldr	r3, .L101+88
 4627 1a8c FEFFFFEB 		bl	Lcd_DspAscII6x8
 576:../Jaime/tp.c ****     
 577:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4628              		.loc 1 577 0
 4629 1a90 FEFFFFEB 		bl	Lcd_Dma_Trans
 578:../Jaime/tp.c ****     
 579:../Jaime/tp.c ****     // Esperar toque para continuar
 580:../Jaime/tp.c ****     ts_wait_for_touch();
 4630              		.loc 1 580 0
 4631 1a94 8BFDFFEB 		bl	ts_wait_for_touch
 581:../Jaime/tp.c ****     Delay(50);
 4632              		.loc 1 581 0
 4633 1a98 3200A0E3 		mov	r0, #50
 4634 1a9c FEFFFFEB 		bl	Delay
 582:../Jaime/tp.c ****     
 583:../Jaime/tp.c ****     Lcd_Clr();
 4635              		.loc 1 583 0
 4636 1aa0 FEFFFFEB 		bl	Lcd_Clr
 584:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4637              		.loc 1 584 0
 4638 1aa4 FEFFFFEB 		bl	Lcd_Dma_Trans
 585:../Jaime/tp.c **** }
 4639              		.loc 1 585 0
 4640 1aa8 10D04BE2 		sub	sp, fp, #16
 4641 1aac 10689DE8 		ldmfd	sp, {r4, fp, sp, lr}
 4642 1ab0 1EFF2FE1 		bx	lr
 4643              	.L102:
 4644              		.align	2
 4645              	.L101:
 4646 1ab4 40000000 		.word	.LC16
 4647 1ab8 54000000 		.word	.LC17
 4648 1abc 64000000 		.word	.LC18
 4649 1ac0 74000000 		.word	.LC19
 4650 1ac4 84000000 		.word	.LC20
 4651 1ac8 94000000 		.word	.LC21
 4652 1acc 00000000 		.word	g_swap_xy
 4653 1ad0 0C000000 		.word	g_ts_xc
 4654 1ad4 10000000 		.word	g_ts_yc
 4655 1ad8 14000000 		.word	g_lcd_xc
 4656 1adc 18000000 		.word	g_lcd_yc
 4657 1ae0 04000000 		.word	g_kx_fp
 4658 1ae4 08000000 		.word	g_ky_fp
 4659 1ae8 A4000000 		.word	.LC22
 4660 1aec BC000000 		.word	.LC23
 4661 1af0 C8000000 		.word	.LC24
 4662 1af4 D4000000 		.word	.LC25
 4663 1af8 EC000000 		.word	.LC26
 4664 1afc 00010000 		.word	.LC27
 4665 1b00 10010000 		.word	.LC28
 4666 1b04 20010000 		.word	.LC29
 4667 1b08 30010000 		.word	.LC30
 4668 1b0c 40010000 		.word	.LC31
 4669              		.cfi_endproc
 4670              	.LFE13:
 4672              		.align	2
 4673              		.global	ts_read_calibrated
 4675              	ts_read_calibrated:
 4676              	.LFB14:
 586:../Jaime/tp.c **** 
 587:../Jaime/tp.c **** /*********************************************************************************************
 588:../Jaime/tp.c **** * name:     ts_read_calibrated
 589:../Jaime/tp.c **** * func:     Lee coordenadas calibradas del touchscreen
 590:../Jaime/tp.c **** * ret:      0 si éxito, -1 si no hay toque
 591:../Jaime/tp.c **** *********************************************************************************************/
 592:../Jaime/tp.c **** int ts_read_calibrated(int *x, int *y)
 593:../Jaime/tp.c **** {
 4677              		.loc 1 593 0
 4678              		.cfi_startproc
 4679              		@ Function supports interworking.
 4680              		@ args = 0, pretend = 0, frame = 40
 4681              		@ frame_needed = 1, uses_anonymous_args = 0
 4682 1b10 0DC0A0E1 		mov	ip, sp
 4683              	.LCFI28:
 4684              		.cfi_def_cfa_register 12
 4685 1b14 F0DF2DE9 		stmfd	sp!, {r4, r5, r6, r7, r8, r9, sl, fp, ip, lr, pc}
 4686 1b18 04B04CE2 		sub	fp, ip, #4
 4687              		.cfi_offset 14, -8
 4688              		.cfi_offset 13, -12
 4689              		.cfi_offset 11, -16
 4690              		.cfi_offset 10, -20
 4691              		.cfi_offset 9, -24
 4692              		.cfi_offset 8, -28
 4693              		.cfi_offset 7, -32
 4694              		.cfi_offset 6, -36
 4695              		.cfi_offset 5, -40
 4696              		.cfi_offset 4, -44
 4697              	.LCFI29:
 4698              		.cfi_def_cfa 11, 4
 4699 1b1c 2CD04DE2 		sub	sp, sp, #44
 4700 1b20 50000BE5 		str	r0, [fp, #-80]
 4701 1b24 54100BE5 		str	r1, [fp, #-84]
 594:../Jaime/tp.c ****     int xr, yr;
 595:../Jaime/tp.c ****     long long temp_x, temp_y;
 596:../Jaime/tp.c ****     
 597:../Jaime/tp.c ****     if (g_ts_ready == 0)
 4702              		.loc 1 597 0
 4703 1b28 C0219FE5 		ldr	r2, .L107
 4704 1b2c 002092E5 		ldr	r2, [r2, #0]
 4705 1b30 000052E3 		cmp	r2, #0
 4706 1b34 0100001A 		bne	.L104
 598:../Jaime/tp.c ****         return -1;
 4707              		.loc 1 598 0
 4708 1b38 0030E0E3 		mvn	r3, #0
 4709 1b3c 670000EA 		b	.L105
 4710              	.L104:
 599:../Jaime/tp.c ****     
 600:../Jaime/tp.c ****     xr = g_ts_raw_x;
 4711              		.loc 1 600 0
 4712 1b40 AC219FE5 		ldr	r2, .L107+4
 4713 1b44 002092E5 		ldr	r2, [r2, #0]
 4714 1b48 30200BE5 		str	r2, [fp, #-48]
 601:../Jaime/tp.c ****     yr = g_ts_raw_y;
 4715              		.loc 1 601 0
 4716 1b4c A4219FE5 		ldr	r2, .L107+8
 4717 1b50 002092E5 		ldr	r2, [r2, #0]
 4718 1b54 34200BE5 		str	r2, [fp, #-52]
 602:../Jaime/tp.c ****     g_ts_ready = 0;
 4719              		.loc 1 602 0
 4720 1b58 90219FE5 		ldr	r2, .L107
 4721 1b5c 0010A0E3 		mov	r1, #0
 4722 1b60 001082E5 		str	r1, [r2, #0]
 603:../Jaime/tp.c ****     
 604:../Jaime/tp.c ****     // Aplicar swap si necesario
 605:../Jaime/tp.c ****     if (g_swap_xy)
 4723              		.loc 1 605 0
 4724 1b64 90219FE5 		ldr	r2, .L107+12
 4725 1b68 002092E5 		ldr	r2, [r2, #0]
 4726 1b6c 000052E3 		cmp	r2, #0
 4727 1b70 0500000A 		beq	.L106
 4728              	.LBB3:
 606:../Jaime/tp.c ****     {
 607:../Jaime/tp.c ****         int tmp = xr;
 4729              		.loc 1 607 0
 4730 1b74 30201BE5 		ldr	r2, [fp, #-48]
 4731 1b78 38200BE5 		str	r2, [fp, #-56]
 608:../Jaime/tp.c ****         xr = yr;
 4732              		.loc 1 608 0
 4733 1b7c 34201BE5 		ldr	r2, [fp, #-52]
 4734 1b80 30200BE5 		str	r2, [fp, #-48]
 609:../Jaime/tp.c ****         yr = tmp;
 4735              		.loc 1 609 0
 4736 1b84 38201BE5 		ldr	r2, [fp, #-56]
 4737 1b88 34200BE5 		str	r2, [fp, #-52]
 4738              	.L106:
 4739              	.LBE3:
 610:../Jaime/tp.c ****     }
 611:../Jaime/tp.c ****     
 612:../Jaime/tp.c ****     // CONVERSIÓN con fixed-point 16.16
 613:../Jaime/tp.c ****     temp_x = (long long)g_kx_fp * (xr - g_ts_xc);
 4740              		.loc 1 613 0
 4741 1b8c 6C219FE5 		ldr	r2, .L107+16
 4742 1b90 002092E5 		ldr	r2, [r2, #0]
 4743 1b94 0290A0E1 		mov	r9, r2
 4744 1b98 C9AFA0E1 		mov	sl, r9, asr #31
 4745 1b9c 60219FE5 		ldr	r2, .L107+20
 4746 1ba0 002092E5 		ldr	r2, [r2, #0]
 4747 1ba4 30101BE5 		ldr	r1, [fp, #-48]
 4748 1ba8 012062E0 		rsb	r2, r2, r1
 4749 1bac 0270A0E1 		mov	r7, r2
 4750 1bb0 C78FA0E1 		mov	r8, r7, asr #31
 4751 1bb4 970A00E0 		mul	r0, r7, sl
 4752 1bb8 990802E0 		mul	r2, r9, r8
 4753 1bbc 020080E0 		add	r0, r0, r2
 4754 1bc0 991782E0 		umull	r1, r2, r9, r7
 4755 1bc4 020080E0 		add	r0, r0, r2
 4756 1bc8 0020A0E1 		mov	r2, r0
 4757 1bcc 44100BE5 		str	r1, [fp, #-68]
 4758 1bd0 40200BE5 		str	r2, [fp, #-64]
 4759 1bd4 44100BE5 		str	r1, [fp, #-68]
 4760 1bd8 40200BE5 		str	r2, [fp, #-64]
 614:../Jaime/tp.c ****     *x = (int)(temp_x >> 16) + g_lcd_xc;
 4761              		.loc 1 614 0
 4762 1bdc 40201BE5 		ldr	r2, [fp, #-64]
 4763 1be0 0228A0E1 		mov	r2, r2, asl #16
 4764 1be4 44101BE5 		ldr	r1, [fp, #-68]
 4765 1be8 2158A0E1 		mov	r5, r1, lsr #16
 4766 1bec 055082E1 		orr	r5, r2, r5
 4767 1bf0 40201BE5 		ldr	r2, [fp, #-64]
 4768 1bf4 4268A0E1 		mov	r6, r2, asr #16
 4769 1bf8 0510A0E1 		mov	r1, r5
 4770 1bfc 04219FE5 		ldr	r2, .L107+24
 4771 1c00 002092E5 		ldr	r2, [r2, #0]
 4772 1c04 021081E0 		add	r1, r1, r2
 4773 1c08 50201BE5 		ldr	r2, [fp, #-80]
 4774 1c0c 001082E5 		str	r1, [r2, #0]
 615:../Jaime/tp.c ****     
 616:../Jaime/tp.c ****     temp_y = (long long)g_ky_fp * (yr - g_ts_yc);
 4775              		.loc 1 616 0
 4776 1c10 F4209FE5 		ldr	r2, .L107+28
 4777 1c14 002092E5 		ldr	r2, [r2, #0]
 4778 1c18 0270A0E1 		mov	r7, r2
 4779 1c1c C78FA0E1 		mov	r8, r7, asr #31
 4780 1c20 E8209FE5 		ldr	r2, .L107+32
 4781 1c24 002092E5 		ldr	r2, [r2, #0]
 4782 1c28 34101BE5 		ldr	r1, [fp, #-52]
 4783 1c2c 012062E0 		rsb	r2, r2, r1
 4784 1c30 0250A0E1 		mov	r5, r2
 4785 1c34 C56FA0E1 		mov	r6, r5, asr #31
 4786 1c38 950800E0 		mul	r0, r5, r8
 4787 1c3c 970602E0 		mul	r2, r7, r6
 4788 1c40 020080E0 		add	r0, r0, r2
 4789 1c44 971582E0 		umull	r1, r2, r7, r5
 4790 1c48 020080E0 		add	r0, r0, r2
 4791 1c4c 0020A0E1 		mov	r2, r0
 4792 1c50 4C100BE5 		str	r1, [fp, #-76]
 4793 1c54 48200BE5 		str	r2, [fp, #-72]
 4794 1c58 4C100BE5 		str	r1, [fp, #-76]
 4795 1c5c 48200BE5 		str	r2, [fp, #-72]
 617:../Jaime/tp.c ****     *y = (int)(temp_y >> 16) + g_lcd_yc;
 4796              		.loc 1 617 0
 4797 1c60 48201BE5 		ldr	r2, [fp, #-72]
 4798 1c64 0228A0E1 		mov	r2, r2, asl #16
 4799 1c68 4C101BE5 		ldr	r1, [fp, #-76]
 4800 1c6c 2138A0E1 		mov	r3, r1, lsr #16
 4801 1c70 033082E1 		orr	r3, r2, r3
 4802 1c74 48201BE5 		ldr	r2, [fp, #-72]
 4803 1c78 4248A0E1 		mov	r4, r2, asr #16
 4804 1c7c 0320A0E1 		mov	r2, r3
 4805 1c80 8C309FE5 		ldr	r3, .L107+36
 4806 1c84 003093E5 		ldr	r3, [r3, #0]
 4807 1c88 032082E0 		add	r2, r2, r3
 4808 1c8c 54301BE5 		ldr	r3, [fp, #-84]
 4809 1c90 002083E5 		str	r2, [r3, #0]
 618:../Jaime/tp.c ****     
 619:../Jaime/tp.c ****     // Clampear
 620:../Jaime/tp.c ****     *x = clamp(*x, 0, SCR_XSIZE - 1);
 4810              		.loc 1 620 0
 4811 1c94 50301BE5 		ldr	r3, [fp, #-80]
 4812 1c98 003093E5 		ldr	r3, [r3, #0]
 4813 1c9c 0300A0E1 		mov	r0, r3
 4814 1ca0 0010A0E3 		mov	r1, #0
 4815 1ca4 6C209FE5 		ldr	r2, .L107+40
 4816 1ca8 05FCFFEB 		bl	clamp
 4817 1cac 0020A0E1 		mov	r2, r0
 4818 1cb0 50301BE5 		ldr	r3, [fp, #-80]
 4819 1cb4 002083E5 		str	r2, [r3, #0]
 621:../Jaime/tp.c ****     *y = clamp(*y, 0, SCR_YSIZE - 1);
 4820              		.loc 1 621 0
 4821 1cb8 54301BE5 		ldr	r3, [fp, #-84]
 4822 1cbc 003093E5 		ldr	r3, [r3, #0]
 4823 1cc0 0300A0E1 		mov	r0, r3
 4824 1cc4 0010A0E3 		mov	r1, #0
 4825 1cc8 EF20A0E3 		mov	r2, #239
 4826 1ccc FCFBFFEB 		bl	clamp
 4827 1cd0 0020A0E1 		mov	r2, r0
 4828 1cd4 54301BE5 		ldr	r3, [fp, #-84]
 4829 1cd8 002083E5 		str	r2, [r3, #0]
 622:../Jaime/tp.c ****     
 623:../Jaime/tp.c ****     return 0;
 4830              		.loc 1 623 0
 4831 1cdc 0030A0E3 		mov	r3, #0
 4832              	.L105:
 624:../Jaime/tp.c **** }
 4833              		.loc 1 624 0
 4834 1ce0 0300A0E1 		mov	r0, r3
 4835 1ce4 28D04BE2 		sub	sp, fp, #40
 4836 1ce8 F06F9DE8 		ldmfd	sp, {r4, r5, r6, r7, r8, r9, sl, fp, sp, lr}
 4837 1cec 1EFF2FE1 		bx	lr
 4838              	.L108:
 4839              		.align	2
 4840              	.L107:
 4841 1cf0 1C000000 		.word	g_ts_ready
 4842 1cf4 20000000 		.word	g_ts_raw_x
 4843 1cf8 24000000 		.word	g_ts_raw_y
 4844 1cfc 00000000 		.word	g_swap_xy
 4845 1d00 04000000 		.word	g_kx_fp
 4846 1d04 0C000000 		.word	g_ts_xc
 4847 1d08 14000000 		.word	g_lcd_xc
 4848 1d0c 08000000 		.word	g_ky_fp
 4849 1d10 10000000 		.word	g_ts_yc
 4850 1d14 18000000 		.word	g_lcd_yc
 4851 1d18 3F010000 		.word	319
 4852              		.cfi_endproc
 4853              	.LFE14:
 4855              		.section	.rodata
 4856 0156 0000     		.align	2
 4857              	.LC32:
 4858 0158 44696275 		.ascii	"Dibuja!\000"
 4858      6A612100 
 4859              		.text
 4860              		.align	2
 4861              		.global	ts_test_calibracion
 4863              	ts_test_calibracion:
 4864              	.LFB15:
 625:../Jaime/tp.c **** 
 626:../Jaime/tp.c **** /*********************************************************************************************
 627:../Jaime/tp.c **** * name:     ts_test_calibracion
 628:../Jaime/tp.c **** * func:     Función de test completa: calibra y permite dibujar
 629:../Jaime/tp.c **** *********************************************************************************************/
 630:../Jaime/tp.c **** void ts_test_calibracion(void)
 631:../Jaime/tp.c **** {
 4865              		.loc 1 631 0
 4866              		.cfi_startproc
 4867              		@ Function supports interworking.
 4868              		@ args = 0, pretend = 0, frame = 8
 4869              		@ frame_needed = 1, uses_anonymous_args = 0
 4870 1d1c 0DC0A0E1 		mov	ip, sp
 4871              	.LCFI30:
 4872              		.cfi_def_cfa_register 12
 4873 1d20 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4874 1d24 04B04CE2 		sub	fp, ip, #4
 4875              		.cfi_offset 14, -8
 4876              		.cfi_offset 13, -12
 4877              		.cfi_offset 11, -16
 4878              	.LCFI31:
 4879              		.cfi_def_cfa 11, 4
 4880 1d28 08D04DE2 		sub	sp, sp, #8
 632:../Jaime/tp.c ****     int x, y;
 633:../Jaime/tp.c ****     
 634:../Jaime/tp.c ****     Lcd_Init();
 4881              		.loc 1 634 0
 4882 1d2c FEFFFFEB 		bl	Lcd_Init
 635:../Jaime/tp.c ****     TS_init();
 4883              		.loc 1 635 0
 4884 1d30 FEFFFFEB 		bl	TS_init
 636:../Jaime/tp.c ****     
 637:../Jaime/tp.c ****     // Calibrar con margen de 50 píxeles
 638:../Jaime/tp.c ****     ts_calibrate_5pt(SCR_XSIZE, SCR_YSIZE, 50);
 4885              		.loc 1 638 0
 4886 1d34 050DA0E3 		mov	r0, #320
 4887 1d38 F010A0E3 		mov	r1, #240
 4888 1d3c 3220A0E3 		mov	r2, #50
 4889 1d40 FEFFFFEB 		bl	ts_calibrate_5pt
 639:../Jaime/tp.c ****     
 640:../Jaime/tp.c ****     Lcd_Clr();
 4890              		.loc 1 640 0
 4891 1d44 FEFFFFEB 		bl	Lcd_Clr
 641:../Jaime/tp.c ****     Lcd_Active_Clr();
 4892              		.loc 1 641 0
 4893 1d48 FEFFFFEB 		bl	Lcd_Active_Clr
 642:../Jaime/tp.c ****     Lcd_DspAscII8x16(80, 110, BLACK, (unsigned char *)"Dibuja!");
 4894              		.loc 1 642 0
 4895 1d4c 5000A0E3 		mov	r0, #80
 4896 1d50 6E10A0E3 		mov	r1, #110
 4897 1d54 0F20A0E3 		mov	r2, #15
 4898 1d58 68319FE5 		ldr	r3, .L114
 4899 1d5c FEFFFFEB 		bl	Lcd_DspAscII8x16
 643:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4900              		.loc 1 643 0
 4901 1d60 FEFFFFEB 		bl	Lcd_Dma_Trans
 644:../Jaime/tp.c ****     Delay(100);
 4902              		.loc 1 644 0
 4903 1d64 6400A0E3 		mov	r0, #100
 4904 1d68 FEFFFFEB 		bl	Delay
 645:../Jaime/tp.c ****     
 646:../Jaime/tp.c ****     Lcd_Clr();
 4905              		.loc 1 646 0
 4906 1d6c FEFFFFEB 		bl	Lcd_Clr
 647:../Jaime/tp.c ****     Lcd_Dma_Trans();
 4907              		.loc 1 647 0
 4908 1d70 FEFFFFEB 		bl	Lcd_Dma_Trans
 4909 1d74 020000EA 		b	.L111
 4910              	.L112:
 648:../Jaime/tp.c ****     
 649:../Jaime/tp.c ****     // Loop de dibujo
 650:../Jaime/tp.c ****     while (1)
 651:../Jaime/tp.c ****     {
 652:../Jaime/tp.c ****         if (ts_read_calibrated(&x, &y) == 0)
 653:../Jaime/tp.c ****         {
 654:../Jaime/tp.c ****             (LCD_PutPixel(x, y, 0xf));
 655:../Jaime/tp.c ****             
 656:../Jaime/tp.c ****             static int count = 0;
 657:../Jaime/tp.c ****             if (++count >= 5)
 658:../Jaime/tp.c ****             {
 659:../Jaime/tp.c ****                 Lcd_Dma_Trans();
 660:../Jaime/tp.c ****                 count = 0;
 661:../Jaime/tp.c ****             }
 662:../Jaime/tp.c ****         }
 663:../Jaime/tp.c ****     }
 4911              		.loc 1 663 0
 4912 1d78 0000A0E1 		mov	r0, r0	@ nop
 4913 1d7c 000000EA 		b	.L111
 4914              	.L113:
 4915 1d80 0000A0E1 		mov	r0, r0	@ nop
 4916              	.L111:
 652:../Jaime/tp.c ****         if (ts_read_calibrated(&x, &y) == 0)
 4917              		.loc 1 652 0
 4918 1d84 10204BE2 		sub	r2, fp, #16
 4919 1d88 14304BE2 		sub	r3, fp, #20
 4920 1d8c 0200A0E1 		mov	r0, r2
 4921 1d90 0310A0E1 		mov	r1, r3
 4922 1d94 FEFFFFEB 		bl	ts_read_calibrated
 4923 1d98 0030A0E1 		mov	r3, r0
 4924 1d9c 000053E3 		cmp	r3, #0
 4925 1da0 F4FFFF1A 		bne	.L112
 4926              	.LBB4:
 654:../Jaime/tp.c ****             (LCD_PutPixel(x, y, 0xf));
 4927              		.loc 1 654 0
 4928 1da4 14201BE5 		ldr	r2, [fp, #-20]
 4929 1da8 0230A0E1 		mov	r3, r2
 4930 1dac 0331A0E1 		mov	r3, r3, asl #2
 4931 1db0 023083E0 		add	r3, r3, r2
 4932 1db4 0333A0E1 		mov	r3, r3, asl #6
 4933 1db8 A32FA0E1 		mov	r2, r3, lsr #31
 4934 1dbc 033082E0 		add	r3, r2, r3
 4935 1dc0 C330A0E1 		mov	r3, r3, asr #1
 4936 1dc4 C32683E2 		add	r2, r3, #204472320
 4937 1dc8 962C82E2 		add	r2, r2, #38400
 4938 1dcc 10301BE5 		ldr	r3, [fp, #-16]
 4939 1dd0 071083E2 		add	r1, r3, #7
 4940 1dd4 000053E3 		cmp	r3, #0
 4941 1dd8 0130A0B1 		movlt	r3, r1
 4942 1ddc C331A0E1 		mov	r3, r3, asr #3
 4943 1de0 0331A0E1 		mov	r3, r3, asl #2
 4944 1de4 033082E0 		add	r3, r2, r3
 4945 1de8 0310A0E1 		mov	r1, r3
 4946 1dec 14201BE5 		ldr	r2, [fp, #-20]
 4947 1df0 0230A0E1 		mov	r3, r2
 4948 1df4 0331A0E1 		mov	r3, r3, asl #2
 4949 1df8 023083E0 		add	r3, r3, r2
 4950 1dfc 0333A0E1 		mov	r3, r3, asl #6
 4951 1e00 A32FA0E1 		mov	r2, r3, lsr #31
 4952 1e04 033082E0 		add	r3, r2, r3
 4953 1e08 C330A0E1 		mov	r3, r3, asr #1
 4954 1e0c C32683E2 		add	r2, r3, #204472320
 4955 1e10 962C82E2 		add	r2, r2, #38400
 4956 1e14 10301BE5 		ldr	r3, [fp, #-16]
 4957 1e18 070083E2 		add	r0, r3, #7
 4958 1e1c 000053E3 		cmp	r3, #0
 4959 1e20 0030A0B1 		movlt	r3, r0
 4960 1e24 C331A0E1 		mov	r3, r3, asr #3
 4961 1e28 0331A0E1 		mov	r3, r3, asl #2
 4962 1e2c 033082E0 		add	r3, r2, r3
 4963 1e30 000093E5 		ldr	r0, [r3, #0]
 4964 1e34 10201BE5 		ldr	r2, [fp, #-16]
 4965 1e38 C23FA0E1 		mov	r3, r2, asr #31
 4966 1e3c A33EA0E1 		mov	r3, r3, lsr #29
 4967 1e40 032082E0 		add	r2, r2, r3
 4968 1e44 072002E2 		and	r2, r2, #7
 4969 1e48 023063E0 		rsb	r3, r3, r2
 4970 1e4c 0331A0E1 		mov	r3, r3, asl #2
 4971 1e50 0F22A0E3 		mov	r2, #-268435456
 4972 1e54 3233A0E1 		mov	r3, r2, lsr r3
 4973 1e58 0330E0E1 		mvn	r3, r3
 4974 1e5c 030000E0 		and	r0, r0, r3
 4975 1e60 10201BE5 		ldr	r2, [fp, #-16]
 4976 1e64 C23FA0E1 		mov	r3, r2, asr #31
 4977 1e68 A33EA0E1 		mov	r3, r3, lsr #29
 4978 1e6c 032082E0 		add	r2, r2, r3
 4979 1e70 072002E2 		and	r2, r2, #7
 4980 1e74 023063E0 		rsb	r3, r3, r2
 4981 1e78 073063E2 		rsb	r3, r3, #7
 4982 1e7c 0331A0E1 		mov	r3, r3, asl #2
 4983 1e80 0F20A0E3 		mov	r2, #15
 4984 1e84 1233A0E1 		mov	r3, r2, asl r3
 4985 1e88 033080E1 		orr	r3, r0, r3
 4986 1e8c 003081E5 		str	r3, [r1, #0]
 657:../Jaime/tp.c ****             if (++count >= 5)
 4987              		.loc 1 657 0
 4988 1e90 34309FE5 		ldr	r3, .L114+4
 4989 1e94 003093E5 		ldr	r3, [r3, #0]
 4990 1e98 012083E2 		add	r2, r3, #1
 4991 1e9c 28309FE5 		ldr	r3, .L114+4
 4992 1ea0 002083E5 		str	r2, [r3, #0]
 4993 1ea4 20309FE5 		ldr	r3, .L114+4
 4994 1ea8 003093E5 		ldr	r3, [r3, #0]
 4995 1eac 040053E3 		cmp	r3, #4
 4996 1eb0 B2FFFFDA 		ble	.L113
 659:../Jaime/tp.c ****                 Lcd_Dma_Trans();
 4997              		.loc 1 659 0
 4998 1eb4 FEFFFFEB 		bl	Lcd_Dma_Trans
 660:../Jaime/tp.c ****                 count = 0;
 4999              		.loc 1 660 0
 5000 1eb8 0C309FE5 		ldr	r3, .L114+4
 5001 1ebc 0020A0E3 		mov	r2, #0
 5002 1ec0 002083E5 		str	r2, [r3, #0]
 5003              	.LBE4:
 5004              		.loc 1 663 0
 5005 1ec4 AEFFFFEA 		b	.L111
 5006              	.L115:
 5007              		.align	2
 5008              	.L114:
 5009 1ec8 58010000 		.word	.LC32
 5010 1ecc 2C000000 		.word	count.4301
 5011              		.cfi_endproc
 5012              	.LFE15:
 5014              		.section	.rodata
 5015              		.align	2
 5016              	.LC33:
 5017 0160 546F6361 		.ascii	"Toca un numero\000"
 5017      20756E20 
 5017      6E756D65 
 5017      726F00
 5018 016f 00       		.align	2
 5019              	.LC34:
 5020 0170 546F7175 		.ascii	"Toque detectado:\000"
 5020      65206465 
 5020      74656374 
 5020      61646F3A 
 5020      00
 5021 0181 000000   		.align	2
 5022              	.LC35:
 5023 0184 436F6F72 		.ascii	"Coordenadas guardadas\000"
 5023      64656E61 
 5023      64617320 
 5023      67756172 
 5023      64616461 
 5024 019a 0000     		.align	2
 5025              	.LC36:
 5026 019c 4E554D45 		.ascii	"NUMERO 1\000"
 5026      524F2031 
 5026      00
 5027 01a5 000000   		.align	2
 5028              	.LC37:
 5029 01a8 4E554D45 		.ascii	"NUMERO 2\000"
 5029      524F2032 
 5029      00
 5030 01b1 000000   		.align	2
 5031              	.LC38:
 5032 01b4 46756572 		.ascii	"Fuera de zona\000"
 5032      61206465 
 5032      207A6F6E 
 5032      6100
 5033 01c2 0000     		.text
 5034              		.align	2
 5035              		.global	ts_test_numeros
 5037              	ts_test_numeros:
 5038              	.LFB16:
 664:../Jaime/tp.c **** }
 665:../Jaime/tp.c **** 
 666:../Jaime/tp.c **** /*********************************************************************************************
 667:../Jaime/tp.c **** * name:     ts_test_numeros
 668:../Jaime/tp.c **** * func:     Test con dos números: muestra coordenadas al tocar
 669:../Jaime/tp.c **** *********************************************************************************************/
 670:../Jaime/tp.c **** void ts_test_numeros(void)
 671:../Jaime/tp.c **** {
 5039              		.loc 1 671 0
 5040              		.cfi_startproc
 5041              		@ Function supports interworking.
 5042              		@ args = 0, pretend = 0, frame = 40
 5043              		@ frame_needed = 1, uses_anonymous_args = 0
 5044 1ed0 0DC0A0E1 		mov	ip, sp
 5045              	.LCFI32:
 5046              		.cfi_def_cfa_register 12
 5047 1ed4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5048 1ed8 04B04CE2 		sub	fp, ip, #4
 5049              		.cfi_offset 14, -8
 5050              		.cfi_offset 13, -12
 5051              		.cfi_offset 11, -16
 5052              	.LCFI33:
 5053              		.cfi_def_cfa 11, 4
 5054 1edc 28D04DE2 		sub	sp, sp, #40
 672:../Jaime/tp.c ****     int x, y;
 673:../Jaime/tp.c ****     int num1_x = 60, num1_y = 100;   // Posición número 1 (izquierda)
 5055              		.loc 1 673 0
 5056 1ee0 3C30A0E3 		mov	r3, #60
 5057 1ee4 20300BE5 		str	r3, [fp, #-32]
 5058 1ee8 6430A0E3 		mov	r3, #100
 5059 1eec 24300BE5 		str	r3, [fp, #-36]
 674:../Jaime/tp.c ****     int num2_x = 220, num2_y = 100;  // Posición número 2 (derecha)
 5060              		.loc 1 674 0
 5061 1ef0 DC30A0E3 		mov	r3, #220
 5062 1ef4 28300BE5 		str	r3, [fp, #-40]
 5063 1ef8 6430A0E3 		mov	r3, #100
 5064 1efc 2C300BE5 		str	r3, [fp, #-44]
 675:../Jaime/tp.c ****     
 676:../Jaime/tp.c ****     Lcd_Init();
 5065              		.loc 1 676 0
 5066 1f00 FEFFFFEB 		bl	Lcd_Init
 677:../Jaime/tp.c ****     TS_init();
 5067              		.loc 1 677 0
 5068 1f04 FEFFFFEB 		bl	TS_init
 678:../Jaime/tp.c ****     
 679:../Jaime/tp.c ****     // Calibrar con margen de 30 píxeles (más cerca de los bordes)
 680:../Jaime/tp.c ****     ts_calibrate_5pt(SCR_XSIZE, SCR_YSIZE, 30);
 5069              		.loc 1 680 0
 5070 1f08 050DA0E3 		mov	r0, #320
 5071 1f0c F010A0E3 		mov	r1, #240
 5072 1f10 1E20A0E3 		mov	r2, #30
 5073 1f14 FEFFFFEB 		bl	ts_calibrate_5pt
 681:../Jaime/tp.c ****     
 682:../Jaime/tp.c ****     // Mostrar los dos números
 683:../Jaime/tp.c ****     Lcd_Clr();
 5074              		.loc 1 683 0
 5075 1f18 FEFFFFEB 		bl	Lcd_Clr
 684:../Jaime/tp.c ****     Lcd_DspAscII8x16(num1_x, num1_y, BLACK, (unsigned char *)"1");
 5076              		.loc 1 684 0
 5077 1f1c 20301BE5 		ldr	r3, [fp, #-32]
 5078 1f20 0338A0E1 		mov	r3, r3, asl #16
 5079 1f24 2328A0E1 		mov	r2, r3, lsr #16
 5080 1f28 24301BE5 		ldr	r3, [fp, #-36]
 5081 1f2c 0338A0E1 		mov	r3, r3, asl #16
 5082 1f30 2338A0E1 		mov	r3, r3, lsr #16
 5083 1f34 0200A0E1 		mov	r0, r2
 5084 1f38 0310A0E1 		mov	r1, r3
 5085 1f3c 0F20A0E3 		mov	r2, #15
 5086 1f40 14349FE5 		ldr	r3, .L132
 5087 1f44 FEFFFFEB 		bl	Lcd_DspAscII8x16
 685:../Jaime/tp.c ****     Lcd_DspAscII8x16(num2_x, num2_y, BLACK, (unsigned char *)"2");
 5088              		.loc 1 685 0
 5089 1f48 28301BE5 		ldr	r3, [fp, #-40]
 5090 1f4c 0338A0E1 		mov	r3, r3, asl #16
 5091 1f50 2328A0E1 		mov	r2, r3, lsr #16
 5092 1f54 2C301BE5 		ldr	r3, [fp, #-44]
 5093 1f58 0338A0E1 		mov	r3, r3, asl #16
 5094 1f5c 2338A0E1 		mov	r3, r3, lsr #16
 5095 1f60 0200A0E1 		mov	r0, r2
 5096 1f64 0310A0E1 		mov	r1, r3
 5097 1f68 0F20A0E3 		mov	r2, #15
 5098 1f6c EC339FE5 		ldr	r3, .L132+4
 5099 1f70 FEFFFFEB 		bl	Lcd_DspAscII8x16
 686:../Jaime/tp.c ****     Lcd_DspAscII6x8(60, 20, BLACK, (unsigned char *)"Toca un numero");
 5100              		.loc 1 686 0
 5101 1f74 3C00A0E3 		mov	r0, #60
 5102 1f78 1410A0E3 		mov	r1, #20
 5103 1f7c 0F20A0E3 		mov	r2, #15
 5104 1f80 DC339FE5 		ldr	r3, .L132+8
 5105 1f84 FEFFFFEB 		bl	Lcd_DspAscII6x8
 687:../Jaime/tp.c ****     Lcd_Dma_Trans();
 5106              		.loc 1 687 0
 5107 1f88 FEFFFFEB 		bl	Lcd_Dma_Trans
 5108 1f8c 000000EA 		b	.L130
 5109              	.L131:
 688:../Jaime/tp.c ****     
 689:../Jaime/tp.c ****     // Loop de detección de toques
 690:../Jaime/tp.c ****     while (1)
 691:../Jaime/tp.c ****     {
 692:../Jaime/tp.c ****         if (ts_read_calibrated(&x, &y) == 0)
 693:../Jaime/tp.c ****         {
 694:../Jaime/tp.c ****             // Limpiar zona de información
 695:../Jaime/tp.c ****             int i, j;
 696:../Jaime/tp.c ****             for (i = 0; i < 320; i++)
 697:../Jaime/tp.c ****                 for (j = 150; j < 200; j++)
 698:../Jaime/tp.c ****                     (LCD_PutPixel(i, j, 0x0));
 699:../Jaime/tp.c ****             
 700:../Jaime/tp.c ****             // Mostrar coordenadas
 701:../Jaime/tp.c ****             Lcd_DspAscII6x8(10, 160, BLACK, (unsigned char *)"Toque detectado:");
 702:../Jaime/tp.c ****             
 703:../Jaime/tp.c ****             // Mostrar X (solo texto fijo, sin sprintf)
 704:../Jaime/tp.c ****             Lcd_DspAscII6x8(10, 175, BLACK, (unsigned char *)"Coordenadas guardadas");
 705:../Jaime/tp.c ****             
 706:../Jaime/tp.c ****             // Dibujar punto donde se tocó
 707:../Jaime/tp.c ****             int px, py;
 708:../Jaime/tp.c ****             for (px = x-3; px <= x+3; px++)
 709:../Jaime/tp.c ****                 for (py = y-3; py <= y+3; py++)
 710:../Jaime/tp.c ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 711:../Jaime/tp.c ****                         (LCD_PutPixel(px, py, 0xf));
 712:../Jaime/tp.c ****             
 713:../Jaime/tp.c ****             // Detectar qué número se tocó (área más amplia para test)
 714:../Jaime/tp.c ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 715:../Jaime/tp.c ****             {
 716:../Jaime/tp.c ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 1");
 717:../Jaime/tp.c ****             }
 718:../Jaime/tp.c ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 719:../Jaime/tp.c ****             {
 720:../Jaime/tp.c ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 2");
 721:../Jaime/tp.c ****             }
 722:../Jaime/tp.c ****             else
 723:../Jaime/tp.c ****             {
 724:../Jaime/tp.c ****                 Lcd_DspAscII6x8(70, 195, BLACK, (unsigned char *)"Fuera de zona");
 725:../Jaime/tp.c ****             }
 726:../Jaime/tp.c ****             
 727:../Jaime/tp.c ****             Lcd_Dma_Trans();
 728:../Jaime/tp.c ****             Delay(50);
 729:../Jaime/tp.c ****         }
 730:../Jaime/tp.c ****     }
 5110              		.loc 1 730 0
 5111 1f90 0000A0E1 		mov	r0, r0	@ nop
 5112              	.L130:
 692:../Jaime/tp.c ****         if (ts_read_calibrated(&x, &y) == 0)
 5113              		.loc 1 692 0
 5114 1f94 30204BE2 		sub	r2, fp, #48
 5115 1f98 34304BE2 		sub	r3, fp, #52
 5116 1f9c 0200A0E1 		mov	r0, r2
 5117 1fa0 0310A0E1 		mov	r1, r3
 5118 1fa4 FEFFFFEB 		bl	ts_read_calibrated
 5119 1fa8 0030A0E1 		mov	r3, r0
 5120 1fac 000053E3 		cmp	r3, #0
 5121 1fb0 F6FFFF1A 		bne	.L131
 5122              	.LBB5:
 696:../Jaime/tp.c ****             for (i = 0; i < 320; i++)
 5123              		.loc 1 696 0
 5124 1fb4 0030A0E3 		mov	r3, #0
 5125 1fb8 10300BE5 		str	r3, [fp, #-16]
 5126 1fbc 3B0000EA 		b	.L118
 5127              	.L121:
 697:../Jaime/tp.c ****                 for (j = 150; j < 200; j++)
 5128              		.loc 1 697 0
 5129 1fc0 9630A0E3 		mov	r3, #150
 5130 1fc4 14300BE5 		str	r3, [fp, #-20]
 5131 1fc8 320000EA 		b	.L119
 5132              	.L120:
 698:../Jaime/tp.c ****                     (LCD_PutPixel(i, j, 0x0));
 5133              		.loc 1 698 0 discriminator 2
 5134 1fcc 14201BE5 		ldr	r2, [fp, #-20]
 5135 1fd0 0230A0E1 		mov	r3, r2
 5136 1fd4 0331A0E1 		mov	r3, r3, asl #2
 5137 1fd8 023083E0 		add	r3, r3, r2
 5138 1fdc 0333A0E1 		mov	r3, r3, asl #6
 5139 1fe0 A32FA0E1 		mov	r2, r3, lsr #31
 5140 1fe4 033082E0 		add	r3, r2, r3
 5141 1fe8 C330A0E1 		mov	r3, r3, asr #1
 5142 1fec C32683E2 		add	r2, r3, #204472320
 5143 1ff0 962C82E2 		add	r2, r2, #38400
 5144 1ff4 10301BE5 		ldr	r3, [fp, #-16]
 5145 1ff8 071083E2 		add	r1, r3, #7
 5146 1ffc 000053E3 		cmp	r3, #0
 5147 2000 0130A0B1 		movlt	r3, r1
 5148 2004 C331A0E1 		mov	r3, r3, asr #3
 5149 2008 0331A0E1 		mov	r3, r3, asl #2
 5150 200c 033082E0 		add	r3, r2, r3
 5151 2010 0310A0E1 		mov	r1, r3
 5152 2014 14201BE5 		ldr	r2, [fp, #-20]
 5153 2018 0230A0E1 		mov	r3, r2
 5154 201c 0331A0E1 		mov	r3, r3, asl #2
 5155 2020 023083E0 		add	r3, r3, r2
 5156 2024 0333A0E1 		mov	r3, r3, asl #6
 5157 2028 A32FA0E1 		mov	r2, r3, lsr #31
 5158 202c 033082E0 		add	r3, r2, r3
 5159 2030 C330A0E1 		mov	r3, r3, asr #1
 5160 2034 C32683E2 		add	r2, r3, #204472320
 5161 2038 962C82E2 		add	r2, r2, #38400
 5162 203c 10301BE5 		ldr	r3, [fp, #-16]
 5163 2040 070083E2 		add	r0, r3, #7
 5164 2044 000053E3 		cmp	r3, #0
 5165 2048 0030A0B1 		movlt	r3, r0
 5166 204c C331A0E1 		mov	r3, r3, asr #3
 5167 2050 0331A0E1 		mov	r3, r3, asl #2
 5168 2054 033082E0 		add	r3, r2, r3
 5169 2058 000093E5 		ldr	r0, [r3, #0]
 5170 205c 10201BE5 		ldr	r2, [fp, #-16]
 5171 2060 C23FA0E1 		mov	r3, r2, asr #31
 5172 2064 A33EA0E1 		mov	r3, r3, lsr #29
 5173 2068 032082E0 		add	r2, r2, r3
 5174 206c 072002E2 		and	r2, r2, #7
 5175 2070 023063E0 		rsb	r3, r3, r2
 5176 2074 0331A0E1 		mov	r3, r3, asl #2
 5177 2078 0F22A0E3 		mov	r2, #-268435456
 5178 207c 3233A0E1 		mov	r3, r2, lsr r3
 5179 2080 0330E0E1 		mvn	r3, r3
 5180 2084 033000E0 		and	r3, r0, r3
 5181 2088 003081E5 		str	r3, [r1, #0]
 697:../Jaime/tp.c ****                 for (j = 150; j < 200; j++)
 5182              		.loc 1 697 0 discriminator 2
 5183 208c 14301BE5 		ldr	r3, [fp, #-20]
 5184 2090 013083E2 		add	r3, r3, #1
 5185 2094 14300BE5 		str	r3, [fp, #-20]
 5186              	.L119:
 697:../Jaime/tp.c ****                 for (j = 150; j < 200; j++)
 5187              		.loc 1 697 0 is_stmt 0 discriminator 1
 5188 2098 14301BE5 		ldr	r3, [fp, #-20]
 5189 209c C70053E3 		cmp	r3, #199
 5190 20a0 C9FFFFDA 		ble	.L120
 696:../Jaime/tp.c ****             for (i = 0; i < 320; i++)
 5191              		.loc 1 696 0 is_stmt 1
 5192 20a4 10301BE5 		ldr	r3, [fp, #-16]
 5193 20a8 013083E2 		add	r3, r3, #1
 5194 20ac 10300BE5 		str	r3, [fp, #-16]
 5195              	.L118:
 696:../Jaime/tp.c ****             for (i = 0; i < 320; i++)
 5196              		.loc 1 696 0 is_stmt 0 discriminator 1
 5197 20b0 10201BE5 		ldr	r2, [fp, #-16]
 5198 20b4 AC329FE5 		ldr	r3, .L132+12
 5199 20b8 030052E1 		cmp	r2, r3
 5200 20bc BFFFFFDA 		ble	.L121
 701:../Jaime/tp.c ****             Lcd_DspAscII6x8(10, 160, BLACK, (unsigned char *)"Toque detectado:");
 5201              		.loc 1 701 0 is_stmt 1
 5202 20c0 0A00A0E3 		mov	r0, #10
 5203 20c4 A010A0E3 		mov	r1, #160
 5204 20c8 0F20A0E3 		mov	r2, #15
 5205 20cc 98329FE5 		ldr	r3, .L132+16
 5206 20d0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 704:../Jaime/tp.c ****             Lcd_DspAscII6x8(10, 175, BLACK, (unsigned char *)"Coordenadas guardadas");
 5207              		.loc 1 704 0
 5208 20d4 0A00A0E3 		mov	r0, #10
 5209 20d8 AF10A0E3 		mov	r1, #175
 5210 20dc 0F20A0E3 		mov	r2, #15
 5211 20e0 88329FE5 		ldr	r3, .L132+20
 5212 20e4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 708:../Jaime/tp.c ****             for (px = x-3; px <= x+3; px++)
 5213              		.loc 1 708 0
 5214 20e8 30301BE5 		ldr	r3, [fp, #-48]
 5215 20ec 033043E2 		sub	r3, r3, #3
 5216 20f0 18300BE5 		str	r3, [fp, #-24]
 5217 20f4 560000EA 		b	.L122
 5218              	.L126:
 709:../Jaime/tp.c ****                 for (py = y-3; py <= y+3; py++)
 5219              		.loc 1 709 0
 5220 20f8 34301BE5 		ldr	r3, [fp, #-52]
 5221 20fc 033043E2 		sub	r3, r3, #3
 5222 2100 1C300BE5 		str	r3, [fp, #-28]
 5223 2104 4A0000EA 		b	.L123
 5224              	.L125:
 710:../Jaime/tp.c ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 5225              		.loc 1 710 0
 5226 2108 18301BE5 		ldr	r3, [fp, #-24]
 5227 210c 000053E3 		cmp	r3, #0
 5228 2110 440000BA 		blt	.L124
 710:../Jaime/tp.c ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 5229              		.loc 1 710 0 is_stmt 0 discriminator 1
 5230 2114 18201BE5 		ldr	r2, [fp, #-24]
 5231 2118 48329FE5 		ldr	r3, .L132+12
 5232 211c 030052E1 		cmp	r2, r3
 5233 2120 400000CA 		bgt	.L124
 5234 2124 1C301BE5 		ldr	r3, [fp, #-28]
 5235 2128 000053E3 		cmp	r3, #0
 5236 212c 3D0000BA 		blt	.L124
 5237 2130 1C301BE5 		ldr	r3, [fp, #-28]
 5238 2134 EF0053E3 		cmp	r3, #239
 5239 2138 3A0000CA 		bgt	.L124
 711:../Jaime/tp.c ****                         (LCD_PutPixel(px, py, 0xf));
 5240              		.loc 1 711 0 is_stmt 1
 5241 213c 1C201BE5 		ldr	r2, [fp, #-28]
 5242 2140 0230A0E1 		mov	r3, r2
 5243 2144 0331A0E1 		mov	r3, r3, asl #2
 5244 2148 023083E0 		add	r3, r3, r2
 5245 214c 0333A0E1 		mov	r3, r3, asl #6
 5246 2150 A32FA0E1 		mov	r2, r3, lsr #31
 5247 2154 033082E0 		add	r3, r2, r3
 5248 2158 C330A0E1 		mov	r3, r3, asr #1
 5249 215c C32683E2 		add	r2, r3, #204472320
 5250 2160 962C82E2 		add	r2, r2, #38400
 5251 2164 18301BE5 		ldr	r3, [fp, #-24]
 5252 2168 071083E2 		add	r1, r3, #7
 5253 216c 000053E3 		cmp	r3, #0
 5254 2170 0130A0B1 		movlt	r3, r1
 5255 2174 C331A0E1 		mov	r3, r3, asr #3
 5256 2178 0331A0E1 		mov	r3, r3, asl #2
 5257 217c 033082E0 		add	r3, r2, r3
 5258 2180 0310A0E1 		mov	r1, r3
 5259 2184 1C201BE5 		ldr	r2, [fp, #-28]
 5260 2188 0230A0E1 		mov	r3, r2
 5261 218c 0331A0E1 		mov	r3, r3, asl #2
 5262 2190 023083E0 		add	r3, r3, r2
 5263 2194 0333A0E1 		mov	r3, r3, asl #6
 5264 2198 A32FA0E1 		mov	r2, r3, lsr #31
 5265 219c 033082E0 		add	r3, r2, r3
 5266 21a0 C330A0E1 		mov	r3, r3, asr #1
 5267 21a4 C32683E2 		add	r2, r3, #204472320
 5268 21a8 962C82E2 		add	r2, r2, #38400
 5269 21ac 18301BE5 		ldr	r3, [fp, #-24]
 5270 21b0 070083E2 		add	r0, r3, #7
 5271 21b4 000053E3 		cmp	r3, #0
 5272 21b8 0030A0B1 		movlt	r3, r0
 5273 21bc C331A0E1 		mov	r3, r3, asr #3
 5274 21c0 0331A0E1 		mov	r3, r3, asl #2
 5275 21c4 033082E0 		add	r3, r2, r3
 5276 21c8 000093E5 		ldr	r0, [r3, #0]
 5277 21cc 18201BE5 		ldr	r2, [fp, #-24]
 5278 21d0 C23FA0E1 		mov	r3, r2, asr #31
 5279 21d4 A33EA0E1 		mov	r3, r3, lsr #29
 5280 21d8 032082E0 		add	r2, r2, r3
 5281 21dc 072002E2 		and	r2, r2, #7
 5282 21e0 023063E0 		rsb	r3, r3, r2
 5283 21e4 0331A0E1 		mov	r3, r3, asl #2
 5284 21e8 0F22A0E3 		mov	r2, #-268435456
 5285 21ec 3233A0E1 		mov	r3, r2, lsr r3
 5286 21f0 0330E0E1 		mvn	r3, r3
 5287 21f4 030000E0 		and	r0, r0, r3
 5288 21f8 18201BE5 		ldr	r2, [fp, #-24]
 5289 21fc C23FA0E1 		mov	r3, r2, asr #31
 5290 2200 A33EA0E1 		mov	r3, r3, lsr #29
 5291 2204 032082E0 		add	r2, r2, r3
 5292 2208 072002E2 		and	r2, r2, #7
 5293 220c 023063E0 		rsb	r3, r3, r2
 5294 2210 073063E2 		rsb	r3, r3, #7
 5295 2214 0331A0E1 		mov	r3, r3, asl #2
 5296 2218 0F20A0E3 		mov	r2, #15
 5297 221c 1233A0E1 		mov	r3, r2, asl r3
 5298 2220 033080E1 		orr	r3, r0, r3
 5299 2224 003081E5 		str	r3, [r1, #0]
 5300              	.L124:
 709:../Jaime/tp.c ****                 for (py = y-3; py <= y+3; py++)
 5301              		.loc 1 709 0
 5302 2228 1C301BE5 		ldr	r3, [fp, #-28]
 5303 222c 013083E2 		add	r3, r3, #1
 5304 2230 1C300BE5 		str	r3, [fp, #-28]
 5305              	.L123:
 709:../Jaime/tp.c ****                 for (py = y-3; py <= y+3; py++)
 5306              		.loc 1 709 0 is_stmt 0 discriminator 1
 5307 2234 34301BE5 		ldr	r3, [fp, #-52]
 5308 2238 032083E2 		add	r2, r3, #3
 5309 223c 1C301BE5 		ldr	r3, [fp, #-28]
 5310 2240 030052E1 		cmp	r2, r3
 5311 2244 AFFFFFAA 		bge	.L125
 708:../Jaime/tp.c ****             for (px = x-3; px <= x+3; px++)
 5312              		.loc 1 708 0 is_stmt 1
 5313 2248 18301BE5 		ldr	r3, [fp, #-24]
 5314 224c 013083E2 		add	r3, r3, #1
 5315 2250 18300BE5 		str	r3, [fp, #-24]
 5316              	.L122:
 708:../Jaime/tp.c ****             for (px = x-3; px <= x+3; px++)
 5317              		.loc 1 708 0 is_stmt 0 discriminator 1
 5318 2254 30301BE5 		ldr	r3, [fp, #-48]
 5319 2258 032083E2 		add	r2, r3, #3
 5320 225c 18301BE5 		ldr	r3, [fp, #-24]
 5321 2260 030052E1 		cmp	r2, r3
 5322 2264 A3FFFFAA 		bge	.L126
 714:../Jaime/tp.c ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 5323              		.loc 1 714 0 is_stmt 1
 5324 2268 20301BE5 		ldr	r3, [fp, #-32]
 5325 226c 1E2043E2 		sub	r2, r3, #30
 5326 2270 30301BE5 		ldr	r3, [fp, #-48]
 5327 2274 030052E1 		cmp	r2, r3
 5328 2278 140000CA 		bgt	.L127
 714:../Jaime/tp.c ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 5329              		.loc 1 714 0 is_stmt 0 discriminator 1
 5330 227c 20301BE5 		ldr	r3, [fp, #-32]
 5331 2280 1E2083E2 		add	r2, r3, #30
 5332 2284 30301BE5 		ldr	r3, [fp, #-48]
 5333 2288 030052E1 		cmp	r2, r3
 5334 228c 0F0000BA 		blt	.L127
 5335 2290 24301BE5 		ldr	r3, [fp, #-36]
 5336 2294 1E2043E2 		sub	r2, r3, #30
 5337 2298 34301BE5 		ldr	r3, [fp, #-52]
 5338 229c 030052E1 		cmp	r2, r3
 5339 22a0 0A0000CA 		bgt	.L127
 5340 22a4 24301BE5 		ldr	r3, [fp, #-36]
 5341 22a8 1E2083E2 		add	r2, r3, #30
 5342 22ac 34301BE5 		ldr	r3, [fp, #-52]
 5343 22b0 030052E1 		cmp	r2, r3
 5344 22b4 050000BA 		blt	.L127
 716:../Jaime/tp.c ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 1");
 5345              		.loc 1 716 0 is_stmt 1
 5346 22b8 5000A0E3 		mov	r0, #80
 5347 22bc BE10A0E3 		mov	r1, #190
 5348 22c0 0F20A0E3 		mov	r2, #15
 5349 22c4 A8309FE5 		ldr	r3, .L132+24
 5350 22c8 FEFFFFEB 		bl	Lcd_DspAscII8x16
 5351 22cc 1E0000EA 		b	.L128
 5352              	.L127:
 718:../Jaime/tp.c ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 5353              		.loc 1 718 0
 5354 22d0 28301BE5 		ldr	r3, [fp, #-40]
 5355 22d4 1E2043E2 		sub	r2, r3, #30
 5356 22d8 30301BE5 		ldr	r3, [fp, #-48]
 5357 22dc 030052E1 		cmp	r2, r3
 5358 22e0 140000CA 		bgt	.L129
 718:../Jaime/tp.c ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 5359              		.loc 1 718 0 is_stmt 0 discriminator 1
 5360 22e4 28301BE5 		ldr	r3, [fp, #-40]
 5361 22e8 1E2083E2 		add	r2, r3, #30
 5362 22ec 30301BE5 		ldr	r3, [fp, #-48]
 5363 22f0 030052E1 		cmp	r2, r3
 5364 22f4 0F0000BA 		blt	.L129
 5365 22f8 2C301BE5 		ldr	r3, [fp, #-44]
 5366 22fc 1E2043E2 		sub	r2, r3, #30
 5367 2300 34301BE5 		ldr	r3, [fp, #-52]
 5368 2304 030052E1 		cmp	r2, r3
 5369 2308 0A0000CA 		bgt	.L129
 5370 230c 2C301BE5 		ldr	r3, [fp, #-44]
 5371 2310 1E2083E2 		add	r2, r3, #30
 5372 2314 34301BE5 		ldr	r3, [fp, #-52]
 5373 2318 030052E1 		cmp	r2, r3
 5374 231c 050000BA 		blt	.L129
 720:../Jaime/tp.c ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 2");
 5375              		.loc 1 720 0 is_stmt 1
 5376 2320 5000A0E3 		mov	r0, #80
 5377 2324 BE10A0E3 		mov	r1, #190
 5378 2328 0F20A0E3 		mov	r2, #15
 5379 232c 44309FE5 		ldr	r3, .L132+28
 5380 2330 FEFFFFEB 		bl	Lcd_DspAscII8x16
 5381 2334 040000EA 		b	.L128
 5382              	.L129:
 724:../Jaime/tp.c ****                 Lcd_DspAscII6x8(70, 195, BLACK, (unsigned char *)"Fuera de zona");
 5383              		.loc 1 724 0
 5384 2338 4600A0E3 		mov	r0, #70
 5385 233c C310A0E3 		mov	r1, #195
 5386 2340 0F20A0E3 		mov	r2, #15
 5387 2344 30309FE5 		ldr	r3, .L132+32
 5388 2348 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5389              	.L128:
 727:../Jaime/tp.c ****             Lcd_Dma_Trans();
 5390              		.loc 1 727 0
 5391 234c FEFFFFEB 		bl	Lcd_Dma_Trans
 728:../Jaime/tp.c ****             Delay(50);
 5392              		.loc 1 728 0
 5393 2350 3200A0E3 		mov	r0, #50
 5394 2354 FEFFFFEB 		bl	Delay
 5395              	.LBE5:
 5396              		.loc 1 730 0
 5397 2358 0DFFFFEA 		b	.L130
 5398              	.L133:
 5399              		.align	2
 5400              	.L132:
 5401 235c 04000000 		.word	.LC1
 5402 2360 08000000 		.word	.LC2
 5403 2364 60010000 		.word	.LC33
 5404 2368 3F010000 		.word	319
 5405 236c 70010000 		.word	.LC34
 5406 2370 84010000 		.word	.LC35
 5407 2374 9C010000 		.word	.LC36
 5408 2378 A8010000 		.word	.LC37
 5409 237c B4010000 		.word	.LC38
 5410              		.cfi_endproc
 5411              	.LFE16:
 5413              		.bss
 5414              		.align	2
 5415              	count.4301:
 5416 002c 00000000 		.space	4
 5417              		.text
 5418              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 tp.c
                            *COM*:00000004 CheckTSP
                            *COM*:00000004 oneTouch
                            *COM*:00000004 Vx
                            *COM*:00000004 Vy
                            *COM*:00000004 Xmax
                            *COM*:00000004 Ymax
                            *COM*:00000004 Xmin
                            *COM*:00000004 Ymin
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2124   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2125   .bss:00000000 g_swap_xy
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2128   .bss:00000004 g_kx_fp
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2131   .bss:00000008 g_ky_fp
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2134   .bss:0000000c g_ts_xc
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2137   .bss:00000010 g_ts_yc
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2140   .bss:00000014 g_lcd_xc
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2143   .bss:00000018 g_lcd_yc
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2146   .bss:0000001c g_ts_ready
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2149   .bss:00000020 g_ts_raw_x
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2152   .bss:00000024 g_ts_raw_y
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2155   .bss:00000028 g_last_touch_time
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2158   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2161   .text:00000000 TS_Test
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2857   .text:00000710 Lcd_TC
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2670   .text:000005e4 TS_init
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3257   .text:00000bbc Check_Sel
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2195   .text:00000024 TSInt
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3634   .text:00000ff0 report_touch_data
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3140   .text:00000a88 DesignREC
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2654   .text:000005bc $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2667   .text:000005e4 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2747   .text:000006a0 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2762   .text:000006d0 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2765   .text:000006d0 TS_close
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2799   .text:00000708 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2805   .rodata:00000000 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:2854   .text:00000710 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3117   .text:00000a44 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3137   .text:00000a88 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3243   .text:00000b9c $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3254   .text:00000bbc $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3347   .text:00000ca0 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3359   .text:00000cc4 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3361   .text:00000cc4 clamp
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3413   .text:00000d24 draw_cross
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3627   .text:00000fec $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3631   .text:00000ff0 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3714   .text:000010b4 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3722   .text:000010c8 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3724   .text:000010c8 ts_wait_for_touch
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3760   .text:00001100 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3764   .text:00001104 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3766   .text:00001104 ts_read_raw
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3805   .text:0000114c $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3810   .text:00001154 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:3812   .text:00001154 get_cal_point
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4169   .text:000014f4 ts_calibrate_5pt
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4646   .text:00001ab4 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4672   .text:00001b10 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4675   .text:00001b10 ts_read_calibrated
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4841   .text:00001cf0 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4860   .text:00001d1c $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:4863   .text:00001d1c ts_test_calibracion
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:5009   .text:00001ec8 $d
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:5415   .bss:0000002c count.4301
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:5034   .text:00001ed0 $a
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:5037   .text:00001ed0 ts_test_numeros
C:\Users\jaime\AppData\Local\Temp\cczdeNzq.s:5401   .text:0000235c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_uidiv
DelayTime
Lcd_Init
Lcd_Clr
Lcd_Active_Clr
Lcd_Draw_Box
Lcd_DspAscII6x8
Lcd_Dma_Trans
Delay
timer2_count
__aeabi_ldivmod
Lcd_DspAscII8x16
