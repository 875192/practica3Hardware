   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"tp.c"
  21              	.Ltext0:
  22              		.file 1 "../tp.c"
 2723              		.align	2
 2724              	g_swap_xy:
 2725 0000 00000000 		.space	4
 2726              		.align	2
 2727              	g_kx_fp:
 2728 0004 00000000 		.space	4
 2729              		.align	2
 2730              	g_ky_fp:
 2731 0008 00000000 		.space	4
 2732              		.align	2
 2733              	g_ts_xc:
 2734 000c 00000000 		.space	4
 2735              		.align	2
 2736              	g_ts_yc:
 2737 0010 00000000 		.space	4
 2738              		.align	2
 2739              	g_lcd_xc:
 2740 0014 00000000 		.space	4
 2741              		.align	2
 2742              	g_lcd_yc:
 2743 0018 00000000 		.space	4
 2744              		.align	2
 2745              	g_ts_ready:
 2746 001c 00000000 		.space	4
 2747              		.align	2
 2748              	g_ts_raw_x:
 2749 0020 00000000 		.space	4
 2750              		.align	2
 2751              	g_ts_raw_y:
 2752 0024 00000000 		.space	4
 2753              		.align	2
 2754              	g_last_touch_time:
 2755 0028 00000000 		.space	4
 2756              		.text
 2757              		.align	2
 2758              		.global	TS_Test
 2760              	TS_Test:
 2761              	.LFB0:
   1:../tp.c       **** /*********************************************************************************************
   2:../tp.c       **** * File��	tp.c
   3:../tp.c       **** * Author:	embest	
   4:../tp.c       **** * Desc��	LCD touch screen control function
   5:../tp.c       **** * History:	
   6:../tp.c       **** *********************************************************************************************/
   7:../tp.c       **** 
   8:../tp.c       **** /*--- include files ---*/
   9:../tp.c       **** #include <string.h>
  10:../tp.c       **** #include "tp.h"
  11:../tp.c       **** #include "lcd.h"
  12:../tp.c       **** #include "timer2.h"
  13:../tp.c       **** 
  14:../tp.c       **** void TSInt(void) __attribute__((interrupt("IRQ")));
  15:../tp.c       **** 
  16:../tp.c       **** /*===================================================================================
  17:../tp.c       ****  * VARIABLES GLOBALES DE CALIBRACIÓN (Método 5 puntos)
  18:../tp.c       ****  *===================================================================================*/
  19:../tp.c       **** static int g_swap_xy = 0;           // 1 si los ejes están intercambiados
  20:../tp.c       **** static long g_kx_fp;                // Factor de escala X en formato 16.16 fixed-point
  21:../tp.c       **** static long g_ky_fp;                // Factor de escala Y en formato 16.16 fixed-point
  22:../tp.c       **** static int g_ts_xc;                 // Centro X crudo del touch
  23:../tp.c       **** static int g_ts_yc;                 // Centro Y crudo del touch
  24:../tp.c       **** static int g_lcd_xc;                // Centro X del LCD
  25:../tp.c       **** static int g_lcd_yc;                // Centro Y del LCD
  26:../tp.c       **** static volatile int g_ts_ready = 0; // Flag para indicar que hay datos del touch
  27:../tp.c       **** static int g_ts_raw_x;              // Última lectura X cruda
  28:../tp.c       **** static int g_ts_raw_y;              // Última lectura Y cruda
  29:../tp.c       **** static unsigned int g_last_touch_time = 0;  // Último tiempo de toque válido (microsegundos)
  30:../tp.c       **** #define TOUCH_DEBOUNCE_TIME 300000  // Tiempo mínimo entre toques: 300ms = 300000us
  31:../tp.c       **** 
  32:../tp.c       **** void TS_Test(void)
  33:../tp.c       **** {
 2762              		.loc 1 33 0
 2763              		.cfi_startproc
 2764              		@ Function supports interworking.
 2765              		@ args = 0, pretend = 0, frame = 0
 2766              		@ frame_needed = 1, uses_anonymous_args = 0
 2767 0000 0DC0A0E1 		mov	ip, sp
 2768              	.LCFI0:
 2769              		.cfi_def_cfa_register 12
 2770 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2771 0008 04B04CE2 		sub	fp, ip, #4
 2772              		.cfi_offset 14, -8
 2773              		.cfi_offset 13, -12
 2774              		.cfi_offset 11, -16
 2775              	.LCFI1:
 2776              		.cfi_def_cfa 11, 4
  34:../tp.c       **** 		Lcd_TC();
 2777              		.loc 1 34 0
 2778 000c FEFFFFEB 		bl	Lcd_TC
  35:../tp.c       **** 		TS_init();
 2779              		.loc 1 35 0
 2780 0010 FEFFFFEB 		bl	TS_init
  36:../tp.c       **** 		Check_Sel();
 2781              		.loc 1 36 0
 2782 0014 FEFFFFEB 		bl	Check_Sel
  37:../tp.c       **** 			
  38:../tp.c       **** //		Uart_Printf("\n Pixel: 320 X 240. Coordinate Rang in: (0,0) - (320,240)\n");
  39:../tp.c       **** //		Uart_Printf("\nLCD TouchScreen Test Example(please touch LCD screen)\n");
  40:../tp.c       **** }
 2783              		.loc 1 40 0
 2784 0018 0CD04BE2 		sub	sp, fp, #12
 2785 001c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2786 0020 1EFF2FE1 		bx	lr
 2787              		.cfi_endproc
 2788              	.LFE0:
 2790              		.global	__aeabi_uidiv
 2791              		.align	2
 2792              		.global	TSInt
 2794              	TSInt:
 2795              	.LFB1:
  41:../tp.c       **** /*--- function code ---*/
  42:../tp.c       **** /*********************************************************************************************
  43:../tp.c       **** * name:		TSInt
  44:../tp.c       **** * func:		TouchScreen interrupt handler function
  45:../tp.c       **** * para:		none
  46:../tp.c       **** * ret:		none
  47:../tp.c       **** * modify:
  48:../tp.c       **** * comment:		
  49:../tp.c       **** ********************************************************************************************/
  50:../tp.c       **** void TSInt(void)
  51:../tp.c       **** {
 2796              		.loc 1 51 0
 2797              		.cfi_startproc
 2798              		@ Interrupt Service Routine.
 2799              		@ args = 0, pretend = 0, frame = 64
 2800              		@ frame_needed = 1, uses_anonymous_args = 0
 2801 0024 04C02DE5 		str	ip, [sp, #-4]!
 2802 0028 0DC0A0E1 		mov	ip, sp
 2803              	.LCFI2:
 2804              		.cfi_def_cfa_register 12
 2805 002c 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 2806 0030 04B04CE2 		sub	fp, ip, #4
 2807              		.cfi_offset 14, -8
 2808              		.cfi_offset 13, -12
 2809              		.cfi_offset 11, -16
 2810              		.cfi_offset 3, -20
 2811              		.cfi_offset 2, -24
 2812              		.cfi_offset 1, -28
 2813              		.cfi_offset 0, -32
 2814              	.LCFI3:
 2815              		.cfi_def_cfa 11, 4
 2816 0034 40D04DE2 		sub	sp, sp, #64
  52:../tp.c       ****     int   i, j;
  53:../tp.c       ****     ULONG tmp;
  54:../tp.c       ****     ULONG Pt[11];  /* Aumentado a 11 para almacenar 10 muestras + promedio */
  55:../tp.c       ****     ULONG swap;    /* Variable para ordenamiento */
  56:../tp.c       **** 
  57:../tp.c       **** 	// <X-Position Read>
  58:../tp.c       **** 	// TSPX(GPE4_Q4(+)) TSPY(GPE5_Q3(-)) TSMY(GPE6_Q2(+)) TSMX(GPE7_Q1(-))
  59:../tp.c       ****     //       0               1                 1                0
  60:../tp.c       **** 	rPDATE=0x68;
 2817              		.loc 1 60 0
 2818 0038 7C359FE5 		ldr	r3, .L23
 2819 003c 6820A0E3 		mov	r2, #104
 2820 0040 002083E5 		str	r2, [r3, #0]
  61:../tp.c       **** 	rADCCON=0x1<<2;			// AIN1
 2821              		.loc 1 61 0
 2822 0044 7537A0E3 		mov	r3, #30670848
 2823 0048 0420A0E3 		mov	r2, #4
 2824 004c 002083E5 		str	r2, [r3, #0]
  62:../tp.c       **** 	
  63:../tp.c       **** 	DelayTime(2000);                // delay más largo para mejor estabilización
 2825              		.loc 1 63 0
 2826 0050 7D0EA0E3 		mov	r0, #2000
 2827 0054 FEFFFFEB 		bl	DelayTime
  64:../tp.c       **** 	for( i=0; i<10; i++ )
 2828              		.loc 1 64 0
 2829 0058 0030A0E3 		mov	r3, #0
 2830 005c 20300BE5 		str	r3, [fp, #-32]
 2831 0060 210000EA 		b	.L3
 2832              	.L6:
  65:../tp.c       **** 	{
  66:../tp.c       **** 		rADCCON |= 0x1;				// Start X-position A/D conversion
 2833              		.loc 1 66 0
 2834 0064 7537A0E3 		mov	r3, #30670848
 2835 0068 7527A0E3 		mov	r2, #30670848
 2836 006c 002092E5 		ldr	r2, [r2, #0]
 2837 0070 012082E3 		orr	r2, r2, #1
 2838 0074 002083E5 		str	r2, [r3, #0]
  67:../tp.c       **** 	    while( rADCCON & 0x1 );		// Check if Enable_start is low
 2839              		.loc 1 67 0
 2840 0078 0000A0E1 		mov	r0, r0	@ nop
 2841              	.L4:
 2842              		.loc 1 67 0 is_stmt 0 discriminator 1
 2843 007c 7537A0E3 		mov	r3, #30670848
 2844 0080 003093E5 		ldr	r3, [r3, #0]
 2845 0084 013003E2 		and	r3, r3, #1
 2846 0088 FF3003E2 		and	r3, r3, #255
 2847 008c 000053E3 		cmp	r3, #0
 2848 0090 F9FFFF1A 		bne	.L4
  68:../tp.c       ****     	while( !(rADCCON & 0x40) );	// Check ECFLG
 2849              		.loc 1 68 0 is_stmt 1
 2850 0094 0000A0E1 		mov	r0, r0	@ nop
 2851              	.L5:
 2852              		.loc 1 68 0 is_stmt 0 discriminator 1
 2853 0098 7537A0E3 		mov	r3, #30670848
 2854 009c 003093E5 		ldr	r3, [r3, #0]
 2855 00a0 403003E2 		and	r3, r3, #64
 2856 00a4 000053E3 		cmp	r3, #0
 2857 00a8 FAFFFF0A 		beq	.L5
  69:../tp.c       **** 	    Pt[i] = (0x3ff&rADCDAT);
 2858              		.loc 1 69 0 is_stmt 1
 2859 00ac 0C359FE5 		ldr	r3, .L23+4
 2860 00b0 003093E5 		ldr	r3, [r3, #0]
 2861 00b4 033BA0E1 		mov	r3, r3, asl #22
 2862 00b8 233BA0E1 		mov	r3, r3, lsr #22
 2863 00bc 20101BE5 		ldr	r1, [fp, #-32]
 2864 00c0 3B20E0E3 		mvn	r2, #59
 2865 00c4 0111A0E1 		mov	r1, r1, asl #2
 2866 00c8 1C004BE2 		sub	r0, fp, #28
 2867 00cc 011080E0 		add	r1, r0, r1
 2868 00d0 022081E0 		add	r2, r1, r2
 2869 00d4 003082E5 		str	r3, [r2, #0]
  70:../tp.c       **** 	    DelayTime(100);             // Pequeño delay entre lecturas
 2870              		.loc 1 70 0
 2871 00d8 6400A0E3 		mov	r0, #100
 2872 00dc FEFFFFEB 		bl	DelayTime
  64:../tp.c       **** 	for( i=0; i<10; i++ )
 2873              		.loc 1 64 0
 2874 00e0 20301BE5 		ldr	r3, [fp, #-32]
 2875 00e4 013083E2 		add	r3, r3, #1
 2876 00e8 20300BE5 		str	r3, [fp, #-32]
 2877              	.L3:
  64:../tp.c       **** 	for( i=0; i<10; i++ )
 2878              		.loc 1 64 0 is_stmt 0 discriminator 1
 2879 00ec 20301BE5 		ldr	r3, [fp, #-32]
 2880 00f0 090053E3 		cmp	r3, #9
 2881 00f4 DAFFFFDA 		ble	.L6
  71:../tp.c       **** 	}
  72:../tp.c       **** 	
  73:../tp.c       **** 	// Ordenar muestras para eliminar extremos (bubble sort simple)
  74:../tp.c       **** 	for (i = 0; i < 9; i++) {
 2882              		.loc 1 74 0 is_stmt 1
 2883 00f8 0030A0E3 		mov	r3, #0
 2884 00fc 20300BE5 		str	r3, [fp, #-32]
 2885 0100 3E0000EA 		b	.L7
 2886              	.L11:
  75:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 2887              		.loc 1 75 0
 2888 0104 0030A0E3 		mov	r3, #0
 2889 0108 24300BE5 		str	r3, [fp, #-36]
 2890 010c 330000EA 		b	.L8
 2891              	.L10:
  76:../tp.c       **** 	        if (Pt[j] > Pt[j + 1]) {
 2892              		.loc 1 76 0
 2893 0110 24201BE5 		ldr	r2, [fp, #-36]
 2894 0114 3B30E0E3 		mvn	r3, #59
 2895 0118 0221A0E1 		mov	r2, r2, asl #2
 2896 011c 1C104BE2 		sub	r1, fp, #28
 2897 0120 022081E0 		add	r2, r1, r2
 2898 0124 033082E0 		add	r3, r2, r3
 2899 0128 002093E5 		ldr	r2, [r3, #0]
 2900 012c 24301BE5 		ldr	r3, [fp, #-36]
 2901 0130 011083E2 		add	r1, r3, #1
 2902 0134 3B30E0E3 		mvn	r3, #59
 2903 0138 0111A0E1 		mov	r1, r1, asl #2
 2904 013c 1C004BE2 		sub	r0, fp, #28
 2905 0140 011080E0 		add	r1, r0, r1
 2906 0144 033081E0 		add	r3, r1, r3
 2907 0148 003093E5 		ldr	r3, [r3, #0]
 2908 014c 030052E1 		cmp	r2, r3
 2909 0150 1F00009A 		bls	.L9
  77:../tp.c       **** 	            swap = Pt[j];
 2910              		.loc 1 77 0
 2911 0154 24201BE5 		ldr	r2, [fp, #-36]
 2912 0158 3B30E0E3 		mvn	r3, #59
 2913 015c 0221A0E1 		mov	r2, r2, asl #2
 2914 0160 1C104BE2 		sub	r1, fp, #28
 2915 0164 022081E0 		add	r2, r1, r2
 2916 0168 033082E0 		add	r3, r2, r3
 2917 016c 003093E5 		ldr	r3, [r3, #0]
 2918 0170 2C300BE5 		str	r3, [fp, #-44]
  78:../tp.c       **** 	            Pt[j] = Pt[j + 1];
 2919              		.loc 1 78 0
 2920 0174 24301BE5 		ldr	r3, [fp, #-36]
 2921 0178 012083E2 		add	r2, r3, #1
 2922 017c 3B30E0E3 		mvn	r3, #59
 2923 0180 0221A0E1 		mov	r2, r2, asl #2
 2924 0184 1C004BE2 		sub	r0, fp, #28
 2925 0188 022080E0 		add	r2, r0, r2
 2926 018c 033082E0 		add	r3, r2, r3
 2927 0190 002093E5 		ldr	r2, [r3, #0]
 2928 0194 24101BE5 		ldr	r1, [fp, #-36]
 2929 0198 3B30E0E3 		mvn	r3, #59
 2930 019c 0111A0E1 		mov	r1, r1, asl #2
 2931 01a0 1C004BE2 		sub	r0, fp, #28
 2932 01a4 011080E0 		add	r1, r0, r1
 2933 01a8 033081E0 		add	r3, r1, r3
 2934 01ac 002083E5 		str	r2, [r3, #0]
  79:../tp.c       **** 	            Pt[j + 1] = swap;
 2935              		.loc 1 79 0
 2936 01b0 24301BE5 		ldr	r3, [fp, #-36]
 2937 01b4 012083E2 		add	r2, r3, #1
 2938 01b8 3B30E0E3 		mvn	r3, #59
 2939 01bc 0221A0E1 		mov	r2, r2, asl #2
 2940 01c0 1C104BE2 		sub	r1, fp, #28
 2941 01c4 022081E0 		add	r2, r1, r2
 2942 01c8 033082E0 		add	r3, r2, r3
 2943 01cc 2C201BE5 		ldr	r2, [fp, #-44]
 2944 01d0 002083E5 		str	r2, [r3, #0]
 2945              	.L9:
  75:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 2946              		.loc 1 75 0
 2947 01d4 24301BE5 		ldr	r3, [fp, #-36]
 2948 01d8 013083E2 		add	r3, r3, #1
 2949 01dc 24300BE5 		str	r3, [fp, #-36]
 2950              	.L8:
  75:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 2951              		.loc 1 75 0 is_stmt 0 discriminator 1
 2952 01e0 20301BE5 		ldr	r3, [fp, #-32]
 2953 01e4 092063E2 		rsb	r2, r3, #9
 2954 01e8 24301BE5 		ldr	r3, [fp, #-36]
 2955 01ec 030052E1 		cmp	r2, r3
 2956 01f0 C6FFFFCA 		bgt	.L10
  74:../tp.c       **** 	for (i = 0; i < 9; i++) {
 2957              		.loc 1 74 0 is_stmt 1
 2958 01f4 20301BE5 		ldr	r3, [fp, #-32]
 2959 01f8 013083E2 		add	r3, r3, #1
 2960 01fc 20300BE5 		str	r3, [fp, #-32]
 2961              	.L7:
  74:../tp.c       **** 	for (i = 0; i < 9; i++) {
 2962              		.loc 1 74 0 is_stmt 0 discriminator 1
 2963 0200 20301BE5 		ldr	r3, [fp, #-32]
 2964 0204 080053E3 		cmp	r3, #8
 2965 0208 BDFFFFDA 		ble	.L11
  80:../tp.c       **** 	        }
  81:../tp.c       **** 	    }
  82:../tp.c       **** 	}
  83:../tp.c       **** 	// Promedio de las 6 muestras centrales (descartando 2 máximas y 2 mínimas)
  84:../tp.c       **** 	Pt[10] = (Pt[2] + Pt[3] + Pt[4] + Pt[5] + Pt[6] + Pt[7]) / 6;
 2966              		.loc 1 84 0 is_stmt 1
 2967 020c 50201BE5 		ldr	r2, [fp, #-80]
 2968 0210 4C301BE5 		ldr	r3, [fp, #-76]
 2969 0214 032082E0 		add	r2, r2, r3
 2970 0218 48301BE5 		ldr	r3, [fp, #-72]
 2971 021c 032082E0 		add	r2, r2, r3
 2972 0220 44301BE5 		ldr	r3, [fp, #-68]
 2973 0224 032082E0 		add	r2, r2, r3
 2974 0228 40301BE5 		ldr	r3, [fp, #-64]
 2975 022c 032082E0 		add	r2, r2, r3
 2976 0230 3C301BE5 		ldr	r3, [fp, #-60]
 2977 0234 032082E0 		add	r2, r2, r3
 2978 0238 84339FE5 		ldr	r3, .L23+8
 2979 023c 920383E0 		umull	r0, r3, r2, r3
 2980 0240 2331A0E1 		mov	r3, r3, lsr #2
 2981 0244 30300BE5 		str	r3, [fp, #-48]
  85:../tp.c       **** 	
  86:../tp.c       **** 	tmp = Pt[10];	
 2982              		.loc 1 86 0
 2983 0248 30301BE5 		ldr	r3, [fp, #-48]
 2984 024c 28300BE5 		str	r3, [fp, #-40]
  87:../tp.c       **** 	
  88:../tp.c       ****     // <Y-Position Read>
  89:../tp.c       **** 	// TSPX(GPE4_Q4(-)) TSPY(GPE5_Q3(+)) TSMY(GPE6_Q2(-)) TSMX(GPE7_Q1(+))
  90:../tp.c       ****     //       1               0                 0                1
  91:../tp.c       **** 	rPDATE=0x98;
 2985              		.loc 1 91 0
 2986 0250 64339FE5 		ldr	r3, .L23
 2987 0254 9820A0E3 		mov	r2, #152
 2988 0258 002083E5 		str	r2, [r3, #0]
  92:../tp.c       **** 	rADCCON=0x0<<2;		        	// AIN0
 2989              		.loc 1 92 0
 2990 025c 7537A0E3 		mov	r3, #30670848
 2991 0260 0020A0E3 		mov	r2, #0
 2992 0264 002083E5 		str	r2, [r3, #0]
  93:../tp.c       **** 	
  94:../tp.c       **** 	DelayTime(2000);                // delay más largo para mejor estabilización
 2993              		.loc 1 94 0
 2994 0268 7D0EA0E3 		mov	r0, #2000
 2995 026c FEFFFFEB 		bl	DelayTime
  95:../tp.c       **** 	for( i=0; i<10; i++ )
 2996              		.loc 1 95 0
 2997 0270 0030A0E3 		mov	r3, #0
 2998 0274 20300BE5 		str	r3, [fp, #-32]
 2999 0278 210000EA 		b	.L12
 3000              	.L15:
  96:../tp.c       **** 	{
  97:../tp.c       ****     	rADCCON |= 0x1;             // Start Y-position conversion
 3001              		.loc 1 97 0
 3002 027c 7537A0E3 		mov	r3, #30670848
 3003 0280 7527A0E3 		mov	r2, #30670848
 3004 0284 002092E5 		ldr	r2, [r2, #0]
 3005 0288 012082E3 		orr	r2, r2, #1
 3006 028c 002083E5 		str	r2, [r3, #0]
  98:../tp.c       **** 	    while( rADCCON & 0x1 );     // Check if Enable_start is low
 3007              		.loc 1 98 0
 3008 0290 0000A0E1 		mov	r0, r0	@ nop
 3009              	.L13:
 3010              		.loc 1 98 0 is_stmt 0 discriminator 1
 3011 0294 7537A0E3 		mov	r3, #30670848
 3012 0298 003093E5 		ldr	r3, [r3, #0]
 3013 029c 013003E2 		and	r3, r3, #1
 3014 02a0 FF3003E2 		and	r3, r3, #255
 3015 02a4 000053E3 		cmp	r3, #0
 3016 02a8 F9FFFF1A 		bne	.L13
  99:../tp.c       ****     	while( !(rADCCON & 0x40) ); // Check ECFLG
 3017              		.loc 1 99 0 is_stmt 1
 3018 02ac 0000A0E1 		mov	r0, r0	@ nop
 3019              	.L14:
 3020              		.loc 1 99 0 is_stmt 0 discriminator 1
 3021 02b0 7537A0E3 		mov	r3, #30670848
 3022 02b4 003093E5 		ldr	r3, [r3, #0]
 3023 02b8 403003E2 		and	r3, r3, #64
 3024 02bc 000053E3 		cmp	r3, #0
 3025 02c0 FAFFFF0A 		beq	.L14
 100:../tp.c       **** 	    Pt[i] = (0x3ff&rADCDAT);
 3026              		.loc 1 100 0 is_stmt 1
 3027 02c4 F4329FE5 		ldr	r3, .L23+4
 3028 02c8 003093E5 		ldr	r3, [r3, #0]
 3029 02cc 033BA0E1 		mov	r3, r3, asl #22
 3030 02d0 233BA0E1 		mov	r3, r3, lsr #22
 3031 02d4 20101BE5 		ldr	r1, [fp, #-32]
 3032 02d8 3B20E0E3 		mvn	r2, #59
 3033 02dc 0111A0E1 		mov	r1, r1, asl #2
 3034 02e0 1C004BE2 		sub	r0, fp, #28
 3035 02e4 011080E0 		add	r1, r0, r1
 3036 02e8 022081E0 		add	r2, r1, r2
 3037 02ec 003082E5 		str	r3, [r2, #0]
 101:../tp.c       **** 	    DelayTime(100);             // Pequeño delay entre lecturas
 3038              		.loc 1 101 0
 3039 02f0 6400A0E3 		mov	r0, #100
 3040 02f4 FEFFFFEB 		bl	DelayTime
  95:../tp.c       **** 	for( i=0; i<10; i++ )
 3041              		.loc 1 95 0
 3042 02f8 20301BE5 		ldr	r3, [fp, #-32]
 3043 02fc 013083E2 		add	r3, r3, #1
 3044 0300 20300BE5 		str	r3, [fp, #-32]
 3045              	.L12:
  95:../tp.c       **** 	for( i=0; i<10; i++ )
 3046              		.loc 1 95 0 is_stmt 0 discriminator 1
 3047 0304 20301BE5 		ldr	r3, [fp, #-32]
 3048 0308 090053E3 		cmp	r3, #9
 3049 030c DAFFFFDA 		ble	.L15
 102:../tp.c       **** 	}
 103:../tp.c       **** 	
 104:../tp.c       **** 	// Ordenar muestras para eliminar extremos
 105:../tp.c       **** 	for (i = 0; i < 9; i++) {
 3050              		.loc 1 105 0 is_stmt 1
 3051 0310 0030A0E3 		mov	r3, #0
 3052 0314 20300BE5 		str	r3, [fp, #-32]
 3053 0318 3E0000EA 		b	.L16
 3054              	.L20:
 106:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 3055              		.loc 1 106 0
 3056 031c 0030A0E3 		mov	r3, #0
 3057 0320 24300BE5 		str	r3, [fp, #-36]
 3058 0324 330000EA 		b	.L17
 3059              	.L19:
 107:../tp.c       **** 	        if (Pt[j] > Pt[j + 1]) {
 3060              		.loc 1 107 0
 3061 0328 24201BE5 		ldr	r2, [fp, #-36]
 3062 032c 3B30E0E3 		mvn	r3, #59
 3063 0330 0221A0E1 		mov	r2, r2, asl #2
 3064 0334 1C104BE2 		sub	r1, fp, #28
 3065 0338 022081E0 		add	r2, r1, r2
 3066 033c 033082E0 		add	r3, r2, r3
 3067 0340 002093E5 		ldr	r2, [r3, #0]
 3068 0344 24301BE5 		ldr	r3, [fp, #-36]
 3069 0348 011083E2 		add	r1, r3, #1
 3070 034c 3B30E0E3 		mvn	r3, #59
 3071 0350 0111A0E1 		mov	r1, r1, asl #2
 3072 0354 1C004BE2 		sub	r0, fp, #28
 3073 0358 011080E0 		add	r1, r0, r1
 3074 035c 033081E0 		add	r3, r1, r3
 3075 0360 003093E5 		ldr	r3, [r3, #0]
 3076 0364 030052E1 		cmp	r2, r3
 3077 0368 1F00009A 		bls	.L18
 108:../tp.c       **** 	            swap = Pt[j];
 3078              		.loc 1 108 0
 3079 036c 24201BE5 		ldr	r2, [fp, #-36]
 3080 0370 3B30E0E3 		mvn	r3, #59
 3081 0374 0221A0E1 		mov	r2, r2, asl #2
 3082 0378 1C104BE2 		sub	r1, fp, #28
 3083 037c 022081E0 		add	r2, r1, r2
 3084 0380 033082E0 		add	r3, r2, r3
 3085 0384 003093E5 		ldr	r3, [r3, #0]
 3086 0388 2C300BE5 		str	r3, [fp, #-44]
 109:../tp.c       **** 	            Pt[j] = Pt[j + 1];
 3087              		.loc 1 109 0
 3088 038c 24301BE5 		ldr	r3, [fp, #-36]
 3089 0390 012083E2 		add	r2, r3, #1
 3090 0394 3B30E0E3 		mvn	r3, #59
 3091 0398 0221A0E1 		mov	r2, r2, asl #2
 3092 039c 1C004BE2 		sub	r0, fp, #28
 3093 03a0 022080E0 		add	r2, r0, r2
 3094 03a4 033082E0 		add	r3, r2, r3
 3095 03a8 002093E5 		ldr	r2, [r3, #0]
 3096 03ac 24101BE5 		ldr	r1, [fp, #-36]
 3097 03b0 3B30E0E3 		mvn	r3, #59
 3098 03b4 0111A0E1 		mov	r1, r1, asl #2
 3099 03b8 1C004BE2 		sub	r0, fp, #28
 3100 03bc 011080E0 		add	r1, r0, r1
 3101 03c0 033081E0 		add	r3, r1, r3
 3102 03c4 002083E5 		str	r2, [r3, #0]
 110:../tp.c       **** 	            Pt[j + 1] = swap;
 3103              		.loc 1 110 0
 3104 03c8 24301BE5 		ldr	r3, [fp, #-36]
 3105 03cc 012083E2 		add	r2, r3, #1
 3106 03d0 3B30E0E3 		mvn	r3, #59
 3107 03d4 0221A0E1 		mov	r2, r2, asl #2
 3108 03d8 1C104BE2 		sub	r1, fp, #28
 3109 03dc 022081E0 		add	r2, r1, r2
 3110 03e0 033082E0 		add	r3, r2, r3
 3111 03e4 2C201BE5 		ldr	r2, [fp, #-44]
 3112 03e8 002083E5 		str	r2, [r3, #0]
 3113              	.L18:
 106:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 3114              		.loc 1 106 0
 3115 03ec 24301BE5 		ldr	r3, [fp, #-36]
 3116 03f0 013083E2 		add	r3, r3, #1
 3117 03f4 24300BE5 		str	r3, [fp, #-36]
 3118              	.L17:
 106:../tp.c       **** 	    for (j = 0; j < 9 - i; j++) {
 3119              		.loc 1 106 0 is_stmt 0 discriminator 1
 3120 03f8 20301BE5 		ldr	r3, [fp, #-32]
 3121 03fc 092063E2 		rsb	r2, r3, #9
 3122 0400 24301BE5 		ldr	r3, [fp, #-36]
 3123 0404 030052E1 		cmp	r2, r3
 3124 0408 C6FFFFCA 		bgt	.L19
 105:../tp.c       **** 	for (i = 0; i < 9; i++) {
 3125              		.loc 1 105 0 is_stmt 1
 3126 040c 20301BE5 		ldr	r3, [fp, #-32]
 3127 0410 013083E2 		add	r3, r3, #1
 3128 0414 20300BE5 		str	r3, [fp, #-32]
 3129              	.L16:
 105:../tp.c       **** 	for (i = 0; i < 9; i++) {
 3130              		.loc 1 105 0 is_stmt 0 discriminator 1
 3131 0418 20301BE5 		ldr	r3, [fp, #-32]
 3132 041c 080053E3 		cmp	r3, #8
 3133 0420 BDFFFFDA 		ble	.L20
 111:../tp.c       **** 	        }
 112:../tp.c       **** 	    }
 113:../tp.c       **** 	}
 114:../tp.c       **** 	// Promedio de las 6 muestras centrales (descartando 2 máximas y 2 mínimas)
 115:../tp.c       **** 	Pt[10] = (Pt[2] + Pt[3] + Pt[4] + Pt[5] + Pt[6] + Pt[7]) / 6;
 3134              		.loc 1 115 0 is_stmt 1
 3135 0424 50201BE5 		ldr	r2, [fp, #-80]
 3136 0428 4C301BE5 		ldr	r3, [fp, #-76]
 3137 042c 032082E0 		add	r2, r2, r3
 3138 0430 48301BE5 		ldr	r3, [fp, #-72]
 3139 0434 032082E0 		add	r2, r2, r3
 3140 0438 44301BE5 		ldr	r3, [fp, #-68]
 3141 043c 032082E0 		add	r2, r2, r3
 3142 0440 40301BE5 		ldr	r3, [fp, #-64]
 3143 0444 032082E0 		add	r2, r2, r3
 3144 0448 3C301BE5 		ldr	r3, [fp, #-60]
 3145 044c 032082E0 		add	r2, r2, r3
 3146 0450 6C319FE5 		ldr	r3, .L23+8
 3147 0454 920383E0 		umull	r0, r3, r2, r3
 3148 0458 2331A0E1 		mov	r3, r3, lsr #2
 3149 045c 30300BE5 		str	r3, [fp, #-48]
 116:../tp.c       **** 	
 117:../tp.c       **** 	// Reportar coordenadas crudas para calibración
 118:../tp.c       **** 	report_touch_data(tmp, Pt[10]);
 3150              		.loc 1 118 0
 3151 0460 28201BE5 		ldr	r2, [fp, #-40]
 3152 0464 30301BE5 		ldr	r3, [fp, #-48]
 3153 0468 0200A0E1 		mov	r0, r2
 3154 046c 0310A0E1 		mov	r1, r3
 3155 0470 FEFFFFEB 		bl	report_touch_data
 119:../tp.c       ****      
 120:../tp.c       **** 	if(!(CheckTSP || (tmp < Xmin) || (tmp > Xmax) || (Pt[10] < Ymin) || (Pt[10] > Ymax)))   // Is vali
 3156              		.loc 1 120 0
 3157 0474 4C319FE5 		ldr	r3, .L23+12
 3158 0478 003093E5 		ldr	r3, [r3, #0]
 3159 047c 000053E3 		cmp	r3, #0
 3160 0480 3900001A 		bne	.L21
 3161              		.loc 1 120 0 is_stmt 0 discriminator 1
 3162 0484 40319FE5 		ldr	r3, .L23+16
 3163 0488 003093E5 		ldr	r3, [r3, #0]
 3164 048c 28201BE5 		ldr	r2, [fp, #-40]
 3165 0490 030052E1 		cmp	r2, r3
 3166 0494 3400003A 		bcc	.L21
 3167 0498 30319FE5 		ldr	r3, .L23+20
 3168 049c 003093E5 		ldr	r3, [r3, #0]
 3169 04a0 28201BE5 		ldr	r2, [fp, #-40]
 3170 04a4 030052E1 		cmp	r2, r3
 3171 04a8 2F00008A 		bhi	.L21
 3172 04ac 30201BE5 		ldr	r2, [fp, #-48]
 3173 04b0 1C319FE5 		ldr	r3, .L23+24
 3174 04b4 003093E5 		ldr	r3, [r3, #0]
 3175 04b8 030052E1 		cmp	r2, r3
 3176 04bc 2A00003A 		bcc	.L21
 3177 04c0 30201BE5 		ldr	r2, [fp, #-48]
 3178 04c4 0C319FE5 		ldr	r3, .L23+28
 3179 04c8 003093E5 		ldr	r3, [r3, #0]
 3180 04cc 030052E1 		cmp	r2, r3
 3181 04d0 2500008A 		bhi	.L21
 121:../tp.c       **** 	  {
 122:../tp.c       **** 		tmp = 320*(tmp - Xmin)/(Xmax - Xmin);   // X - position
 3182              		.loc 1 122 0 is_stmt 1
 3183 04d4 F0309FE5 		ldr	r3, .L23+16
 3184 04d8 003093E5 		ldr	r3, [r3, #0]
 3185 04dc 28201BE5 		ldr	r2, [fp, #-40]
 3186 04e0 022063E0 		rsb	r2, r3, r2
 3187 04e4 0230A0E1 		mov	r3, r2
 3188 04e8 0331A0E1 		mov	r3, r3, asl #2
 3189 04ec 023083E0 		add	r3, r3, r2
 3190 04f0 0333A0E1 		mov	r3, r3, asl #6
 3191 04f4 0320A0E1 		mov	r2, r3
 3192 04f8 D0309FE5 		ldr	r3, .L23+20
 3193 04fc 001093E5 		ldr	r1, [r3, #0]
 3194 0500 C4309FE5 		ldr	r3, .L23+16
 3195 0504 003093E5 		ldr	r3, [r3, #0]
 3196 0508 013063E0 		rsb	r3, r3, r1
 3197 050c 0200A0E1 		mov	r0, r2
 3198 0510 0310A0E1 		mov	r1, r3
 3199 0514 FEFFFFEB 		bl	__aeabi_uidiv
 3200 0518 0030A0E1 		mov	r3, r0
 3201 051c 28300BE5 		str	r3, [fp, #-40]
 123:../tp.c       **** //		Uart_Printf("X-Posion[AIN1] is %04d   ", tmp);
 124:../tp.c       **** 			
 125:../tp.c       **** 		Pt[10] = 240*(Pt[10] - Xmin)/(Ymax - Ymin);
 3202              		.loc 1 125 0
 3203 0520 30201BE5 		ldr	r2, [fp, #-48]
 3204 0524 A0309FE5 		ldr	r3, .L23+16
 3205 0528 003093E5 		ldr	r3, [r3, #0]
 3206 052c 022063E0 		rsb	r2, r3, r2
 3207 0530 0230A0E1 		mov	r3, r2
 3208 0534 0332A0E1 		mov	r3, r3, asl #4
 3209 0538 033062E0 		rsb	r3, r2, r3
 3210 053c 0332A0E1 		mov	r3, r3, asl #4
 3211 0540 0320A0E1 		mov	r2, r3
 3212 0544 8C309FE5 		ldr	r3, .L23+28
 3213 0548 001093E5 		ldr	r1, [r3, #0]
 3214 054c 80309FE5 		ldr	r3, .L23+24
 3215 0550 003093E5 		ldr	r3, [r3, #0]
 3216 0554 013063E0 		rsb	r3, r3, r1
 3217 0558 0200A0E1 		mov	r0, r2
 3218 055c 0310A0E1 		mov	r1, r3
 3219 0560 FEFFFFEB 		bl	__aeabi_uidiv
 3220 0564 0030A0E1 		mov	r3, r0
 3221 0568 30300BE5 		str	r3, [fp, #-48]
 3222              	.L21:
 126:../tp.c       **** //		Uart_Printf("  Y-Posion[AIN0] is %04d\n", Pt[10]);
 127:../tp.c       ****       }
 128:../tp.c       **** 
 129:../tp.c       ****     if(CheckTSP)
 3223              		.loc 1 129 0
 3224 056c 54309FE5 		ldr	r3, .L23+12
 3225 0570 003093E5 		ldr	r3, [r3, #0]
 3226 0574 000053E3 		cmp	r3, #0
 3227 0578 0300000A 		beq	.L22
 130:../tp.c       ****  	/*----------- check to ensure Xmax Ymax Xmin Ymin ------------*/
 131:../tp.c       ****  	    DesignREC(tmp,Pt[5]);
 3228              		.loc 1 131 0
 3229 057c 44301BE5 		ldr	r3, [fp, #-68]
 3230 0580 28001BE5 		ldr	r0, [fp, #-40]
 3231 0584 0310A0E1 		mov	r1, r3
 3232 0588 FEFFFFEB 		bl	DesignREC
 3233              	.L22:
 132:../tp.c       **** 
 133:../tp.c       **** 	rPDATE = 0xb8;                  // should be enabled	
 3234              		.loc 1 133 0
 3235 058c 28309FE5 		ldr	r3, .L23
 3236 0590 B820A0E3 		mov	r2, #184
 3237 0594 002083E5 		str	r2, [r3, #0]
 134:../tp.c       **** 	DelayTime(3000);                // delay to set up the next channel	
 3238              		.loc 1 134 0
 3239 0598 3C009FE5 		ldr	r0, .L23+32
 3240 059c FEFFFFEB 		bl	DelayTime
 135:../tp.c       **** 
 136:../tp.c       ****     rI_ISPC = BIT_EINT2;            // clear pending_bit
 3241              		.loc 1 136 0
 3242 05a0 38309FE5 		ldr	r3, .L23+36
 3243 05a4 0225A0E3 		mov	r2, #8388608
 3244 05a8 002083E5 		str	r2, [r3, #0]
 137:../tp.c       **** }
 3245              		.loc 1 137 0
 3246 05ac 1CD04BE2 		sub	sp, fp, #28
 3247 05b0 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 3248 05b4 04C09DE4 		ldmfd	sp!, {ip}
 3249 05b8 04F05EE2 		subs	pc, lr, #4
 3250              	.L24:
 3251              		.align	2
 3252              	.L23:
 3253 05bc 2C00D201 		.word	30539820
 3254 05c0 0800D401 		.word	30670856
 3255 05c4 ABAAAAAA 		.word	-1431655765
 3256 05c8 00000000 		.word	CheckTSP
 3257 05cc 00000000 		.word	Xmin
 3258 05d0 00000000 		.word	Xmax
 3259 05d4 00000000 		.word	Ymin
 3260 05d8 00000000 		.word	Ymax
 3261 05dc B80B0000 		.word	3000
 3262 05e0 2400E001 		.word	31457316
 3263              		.cfi_endproc
 3264              	.LFE1:
 3266              		.align	2
 3267              		.global	TS_init
 3269              	TS_init:
 3270              	.LFB2:
 138:../tp.c       **** 			
 139:../tp.c       **** /*********************************************************************************************
 140:../tp.c       **** * name:		TS_init
 141:../tp.c       **** * func:		initialize TouchScreen
 142:../tp.c       **** * para:		none
 143:../tp.c       **** * ret:		none
 144:../tp.c       **** * modify:
 145:../tp.c       **** * comment:		
 146:../tp.c       **** *********************************************************************************************/
 147:../tp.c       **** void TS_init(void)
 148:../tp.c       **** {
 3271              		.loc 1 148 0
 3272              		.cfi_startproc
 3273              		@ Function supports interworking.
 3274              		@ args = 0, pretend = 0, frame = 0
 3275              		@ frame_needed = 1, uses_anonymous_args = 0
 3276 05e4 0DC0A0E1 		mov	ip, sp
 3277              	.LCFI4:
 3278              		.cfi_def_cfa_register 12
 3279 05e8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3280 05ec 04B04CE2 		sub	fp, ip, #4
 3281              		.cfi_offset 14, -8
 3282              		.cfi_offset 13, -12
 3283              		.cfi_offset 11, -16
 3284              	.LCFI5:
 3285              		.cfi_def_cfa 11, 4
 149:../tp.c       ****     /* enable interrupt */
 150:../tp.c       **** 	rINTMOD=0x0;
 3286              		.loc 1 150 0
 3287 05f0 A8309FE5 		ldr	r3, .L26
 3288 05f4 0020A0E3 		mov	r2, #0
 3289 05f8 002083E5 		str	r2, [r3, #0]
 151:../tp.c       **** 	rINTCON=0x1;
 3290              		.loc 1 151 0
 3291 05fc 1E36A0E3 		mov	r3, #31457280
 3292 0600 0120A0E3 		mov	r2, #1
 3293 0604 002083E5 		str	r2, [r3, #0]
 152:../tp.c       ****     rI_ISPC |= BIT_EINT2;            // clear pending_bit
 3294              		.loc 1 152 0
 3295 0608 94309FE5 		ldr	r3, .L26+4
 3296 060c 90209FE5 		ldr	r2, .L26+4
 3297 0610 002092E5 		ldr	r2, [r2, #0]
 3298 0614 022582E3 		orr	r2, r2, #8388608
 3299 0618 002083E5 		str	r2, [r3, #0]
 153:../tp.c       **** 	
 154:../tp.c       **** 	// TSPX(GPE4_Q4(-)) TSPY(GPE5_Q3(-)) TSMY(GPE6_Q2(-)) TSMX(GPE7_Q1(+)) 
 155:../tp.c       **** 	//          1               1                0                 1
 156:../tp.c       ****     rPUPE  = 0x0;	                 // Pull up
 3300              		.loc 1 156 0
 3301 061c 84309FE5 		ldr	r3, .L26+8
 3302 0620 0020A0E3 		mov	r2, #0
 3303 0624 002083E5 		str	r2, [r3, #0]
 157:../tp.c       ****     rPDATE = 0xb8;                   // should be enabled	
 3304              		.loc 1 157 0
 3305 0628 7C309FE5 		ldr	r3, .L26+12
 3306 062c B820A0E3 		mov	r2, #184
 3307 0630 002083E5 		str	r2, [r3, #0]
 158:../tp.c       ****     DelayTime(100); 
 3308              		.loc 1 158 0
 3309 0634 6400A0E3 		mov	r0, #100
 3310 0638 FEFFFFEB 		bl	DelayTime
 159:../tp.c       ****     
 160:../tp.c       ****     rEXTINT |= 0x200;                // falling edge trigger
 3311              		.loc 1 160 0
 3312 063c 6C309FE5 		ldr	r3, .L26+16
 3313 0640 68209FE5 		ldr	r2, .L26+16
 3314 0644 002092E5 		ldr	r2, [r2, #0]
 3315 0648 022C82E3 		orr	r2, r2, #512
 3316 064c 002083E5 		str	r2, [r3, #0]
 161:../tp.c       ****     pISR_EINT2=(unsigned)TSInt;       // set interrupt handler
 3317              		.loc 1 161 0
 3318 0650 5C309FE5 		ldr	r3, .L26+20
 3319 0654 5C209FE5 		ldr	r2, .L26+24
 3320 0658 002083E5 		str	r2, [r3, #0]
 162:../tp.c       ****     
 163:../tp.c       ****     rCLKCON = 0x7ff8;                // enable clock
 3321              		.loc 1 163 0
 3322 065c 58309FE5 		ldr	r3, .L26+28
 3323 0660 58209FE5 		ldr	r2, .L26+32
 3324 0664 002083E5 		str	r2, [r3, #0]
 164:../tp.c       ****     rADCPSR = 0x1;//0x4;             // A/D prescaler
 3325              		.loc 1 164 0
 3326 0668 54309FE5 		ldr	r3, .L26+36
 3327 066c 0120A0E3 		mov	r2, #1
 3328 0670 002083E5 		str	r2, [r3, #0]
 165:../tp.c       ****     rINTMSK &= ~(BIT_EINT2);
 3329              		.loc 1 165 0
 3330 0674 4C309FE5 		ldr	r3, .L26+40
 3331 0678 48209FE5 		ldr	r2, .L26+40
 3332 067c 002092E5 		ldr	r2, [r2, #0]
 3333 0680 0225C2E3 		bic	r2, r2, #8388608
 3334 0684 002083E5 		str	r2, [r3, #0]
 166:../tp.c       **** 
 167:../tp.c       ****     oneTouch = 0;
 3335              		.loc 1 167 0
 3336 0688 3C309FE5 		ldr	r3, .L26+44
 3337 068c 0020A0E3 		mov	r2, #0
 3338 0690 002083E5 		str	r2, [r3, #0]
 168:../tp.c       **** }
 3339              		.loc 1 168 0
 3340 0694 0CD04BE2 		sub	sp, fp, #12
 3341 0698 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3342 069c 1EFF2FE1 		bx	lr
 3343              	.L27:
 3344              		.align	2
 3345              	.L26:
 3346 06a0 0800E001 		.word	31457288
 3347 06a4 2400E001 		.word	31457316
 3348 06a8 3000D201 		.word	30539824
 3349 06ac 2C00D201 		.word	30539820
 3350 06b0 5000D201 		.word	30539856
 3351 06b4 7CFF7F0C 		.word	209715068
 3352 06b8 00000000 		.word	TSInt
 3353 06bc 0400D801 		.word	30932996
 3354 06c0 F87F0000 		.word	32760
 3355 06c4 0400D401 		.word	30670852
 3356 06c8 0C00E001 		.word	31457292
 3357 06cc 00000000 		.word	oneTouch
 3358              		.cfi_endproc
 3359              	.LFE2:
 3361              		.align	2
 3362              		.global	TS_close
 3364              	TS_close:
 3365              	.LFB3:
 169:../tp.c       **** 
 170:../tp.c       **** /*********************************************************************************************
 171:../tp.c       **** * name:		TS_close
 172:../tp.c       **** * func:		close TouchScreen
 173:../tp.c       **** * para:		none
 174:../tp.c       **** * ret:		none
 175:../tp.c       **** * modify:
 176:../tp.c       **** * comment:		
 177:../tp.c       **** *********************************************************************************************/
 178:../tp.c       **** void TS_close(void)
 179:../tp.c       **** {
 3366              		.loc 1 179 0
 3367              		.cfi_startproc
 3368              		@ Function supports interworking.
 3369              		@ args = 0, pretend = 0, frame = 0
 3370              		@ frame_needed = 1, uses_anonymous_args = 0
 3371 06d0 0DC0A0E1 		mov	ip, sp
 3372              	.LCFI6:
 3373              		.cfi_def_cfa_register 12
 3374 06d4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3375 06d8 04B04CE2 		sub	fp, ip, #4
 3376              		.cfi_offset 14, -8
 3377              		.cfi_offset 13, -12
 3378              		.cfi_offset 11, -16
 3379              	.LCFI7:
 3380              		.cfi_def_cfa 11, 4
 180:../tp.c       **** 	/* Mask interrupt */
 181:../tp.c       **** 	rINTMSK |=BIT_GLOBAL|BIT_EINT2;
 3381              		.loc 1 181 0
 3382 06dc 24309FE5 		ldr	r3, .L29
 3383 06e0 20209FE5 		ldr	r2, .L29
 3384 06e4 002092E5 		ldr	r2, [r2, #0]
 3385 06e8 122582E3 		orr	r2, r2, #75497472
 3386 06ec 002083E5 		str	r2, [r3, #0]
 182:../tp.c       **** 	pISR_EINT2 = (int)NULL;
 3387              		.loc 1 182 0
 3388 06f0 14309FE5 		ldr	r3, .L29+4
 3389 06f4 0020A0E3 		mov	r2, #0
 3390 06f8 002083E5 		str	r2, [r3, #0]
 183:../tp.c       **** }
 3391              		.loc 1 183 0
 3392 06fc 0CD04BE2 		sub	sp, fp, #12
 3393 0700 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3394 0704 1EFF2FE1 		bx	lr
 3395              	.L30:
 3396              		.align	2
 3397              	.L29:
 3398 0708 0C00E001 		.word	31457292
 3399 070c 7CFF7F0C 		.word	209715068
 3400              		.cfi_endproc
 3401              	.LFE3:
 3403              		.section	.rodata
 3404              		.align	2
 3405              	.LC0:
 3406 0000 3000     		.ascii	"0\000"
 3407 0002 0000     		.align	2
 3408              	.LC1:
 3409 0004 3100     		.ascii	"1\000"
 3410 0006 0000     		.align	2
 3411              	.LC2:
 3412 0008 3200     		.ascii	"2\000"
 3413 000a 0000     		.align	2
 3414              	.LC3:
 3415 000c 3300     		.ascii	"3\000"
 3416 000e 0000     		.align	2
 3417              	.LC4:
 3418 0010 3400     		.ascii	"4\000"
 3419 0012 0000     		.align	2
 3420              	.LC5:
 3421 0014 3500     		.ascii	"5\000"
 3422 0016 0000     		.align	2
 3423              	.LC6:
 3424 0018 3600     		.ascii	"6\000"
 3425 001a 0000     		.align	2
 3426              	.LC7:
 3427 001c 3700     		.ascii	"7\000"
 3428 001e 0000     		.align	2
 3429              	.LC8:
 3430 0020 3800     		.ascii	"8\000"
 3431 0022 0000     		.align	2
 3432              	.LC9:
 3433 0024 3900     		.ascii	"9\000"
 3434 0026 0000     		.align	2
 3435              	.LC10:
 3436 0028 4100     		.ascii	"A\000"
 3437 002a 0000     		.align	2
 3438              	.LC11:
 3439 002c 4200     		.ascii	"B\000"
 3440 002e 0000     		.align	2
 3441              	.LC12:
 3442 0030 4300     		.ascii	"C\000"
 3443 0032 0000     		.align	2
 3444              	.LC13:
 3445 0034 4400     		.ascii	"D\000"
 3446 0036 0000     		.align	2
 3447              	.LC14:
 3448 0038 4500     		.ascii	"E\000"
 3449 003a 0000     		.align	2
 3450              	.LC15:
 3451 003c 4600     		.ascii	"F\000"
 3452              		.text
 3453              		.align	2
 3454              		.global	Lcd_TC
 3456              	Lcd_TC:
 3457              	.LFB4:
 184:../tp.c       **** 
 185:../tp.c       **** void Lcd_TC(void)
 186:../tp.c       **** {
 3458              		.loc 1 186 0
 3459              		.cfi_startproc
 3460              		@ Function supports interworking.
 3461              		@ args = 0, pretend = 0, frame = 0
 3462              		@ frame_needed = 1, uses_anonymous_args = 0
 3463 0710 0DC0A0E1 		mov	ip, sp
 3464              	.LCFI8:
 3465              		.cfi_def_cfa_register 12
 3466 0714 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3467 0718 04B04CE2 		sub	fp, ip, #4
 3468              		.cfi_offset 14, -8
 3469              		.cfi_offset 13, -12
 3470              		.cfi_offset 11, -16
 3471              	.LCFI9:
 3472              		.cfi_def_cfa 11, 4
 3473 071c 08D04DE2 		sub	sp, sp, #8
 187:../tp.c       **** 	/* initial LCD controller */
 188:../tp.c       **** 	Lcd_Init();
 3474              		.loc 1 188 0
 3475 0720 FEFFFFEB 		bl	Lcd_Init
 189:../tp.c       **** 	/* clear screen */
 190:../tp.c       **** 	Lcd_Clr();
 3476              		.loc 1 190 0
 3477 0724 FEFFFFEB 		bl	Lcd_Clr
 191:../tp.c       **** 	Lcd_Active_Clr();
 3478              		.loc 1 191 0
 3479 0728 FEFFFFEB 		bl	Lcd_Active_Clr
 192:../tp.c       **** 	/* draw rectangle pattern */ 
 193:../tp.c       **** 	Lcd_Draw_Box(0,0,80,60,15);
 3480              		.loc 1 193 0
 3481 072c 0F30A0E3 		mov	r3, #15
 3482 0730 00308DE5 		str	r3, [sp, #0]
 3483 0734 0000A0E3 		mov	r0, #0
 3484 0738 0010A0E3 		mov	r1, #0
 3485 073c 5020A0E3 		mov	r2, #80
 3486 0740 3C30A0E3 		mov	r3, #60
 3487 0744 FEFFFFEB 		bl	Lcd_Draw_Box
 194:../tp.c       **** 	Lcd_Draw_Box(80,0,160,60,15);
 3488              		.loc 1 194 0
 3489 0748 0F30A0E3 		mov	r3, #15
 3490 074c 00308DE5 		str	r3, [sp, #0]
 3491 0750 5000A0E3 		mov	r0, #80
 3492 0754 0010A0E3 		mov	r1, #0
 3493 0758 A020A0E3 		mov	r2, #160
 3494 075c 3C30A0E3 		mov	r3, #60
 3495 0760 FEFFFFEB 		bl	Lcd_Draw_Box
 195:../tp.c       **** 	Lcd_Draw_Box(160,0,240,60,15);
 3496              		.loc 1 195 0
 3497 0764 0F30A0E3 		mov	r3, #15
 3498 0768 00308DE5 		str	r3, [sp, #0]
 3499 076c A000A0E3 		mov	r0, #160
 3500 0770 0010A0E3 		mov	r1, #0
 3501 0774 F020A0E3 		mov	r2, #240
 3502 0778 3C30A0E3 		mov	r3, #60
 3503 077c FEFFFFEB 		bl	Lcd_Draw_Box
 196:../tp.c       **** 	Lcd_Draw_Box(240,0,320,60,15);
 3504              		.loc 1 196 0
 3505 0780 0F30A0E3 		mov	r3, #15
 3506 0784 00308DE5 		str	r3, [sp, #0]
 3507 0788 F000A0E3 		mov	r0, #240
 3508 078c 0010A0E3 		mov	r1, #0
 3509 0790 052DA0E3 		mov	r2, #320
 3510 0794 3C30A0E3 		mov	r3, #60
 3511 0798 FEFFFFEB 		bl	Lcd_Draw_Box
 197:../tp.c       **** 	Lcd_Draw_Box(0,60,80,120,15);
 3512              		.loc 1 197 0
 3513 079c 0F30A0E3 		mov	r3, #15
 3514 07a0 00308DE5 		str	r3, [sp, #0]
 3515 07a4 0000A0E3 		mov	r0, #0
 3516 07a8 3C10A0E3 		mov	r1, #60
 3517 07ac 5020A0E3 		mov	r2, #80
 3518 07b0 7830A0E3 		mov	r3, #120
 3519 07b4 FEFFFFEB 		bl	Lcd_Draw_Box
 198:../tp.c       **** 	Lcd_Draw_Box(80,60,160,120,15);
 3520              		.loc 1 198 0
 3521 07b8 0F30A0E3 		mov	r3, #15
 3522 07bc 00308DE5 		str	r3, [sp, #0]
 3523 07c0 5000A0E3 		mov	r0, #80
 3524 07c4 3C10A0E3 		mov	r1, #60
 3525 07c8 A020A0E3 		mov	r2, #160
 3526 07cc 7830A0E3 		mov	r3, #120
 3527 07d0 FEFFFFEB 		bl	Lcd_Draw_Box
 199:../tp.c       **** 	Lcd_Draw_Box(160,60,240,120,15);
 3528              		.loc 1 199 0
 3529 07d4 0F30A0E3 		mov	r3, #15
 3530 07d8 00308DE5 		str	r3, [sp, #0]
 3531 07dc A000A0E3 		mov	r0, #160
 3532 07e0 3C10A0E3 		mov	r1, #60
 3533 07e4 F020A0E3 		mov	r2, #240
 3534 07e8 7830A0E3 		mov	r3, #120
 3535 07ec FEFFFFEB 		bl	Lcd_Draw_Box
 200:../tp.c       **** 	Lcd_Draw_Box(240,60,320,120,15);
 3536              		.loc 1 200 0
 3537 07f0 0F30A0E3 		mov	r3, #15
 3538 07f4 00308DE5 		str	r3, [sp, #0]
 3539 07f8 F000A0E3 		mov	r0, #240
 3540 07fc 3C10A0E3 		mov	r1, #60
 3541 0800 052DA0E3 		mov	r2, #320
 3542 0804 7830A0E3 		mov	r3, #120
 3543 0808 FEFFFFEB 		bl	Lcd_Draw_Box
 201:../tp.c       **** 	Lcd_Draw_Box(0,120,80,180,15);
 3544              		.loc 1 201 0
 3545 080c 0F30A0E3 		mov	r3, #15
 3546 0810 00308DE5 		str	r3, [sp, #0]
 3547 0814 0000A0E3 		mov	r0, #0
 3548 0818 7810A0E3 		mov	r1, #120
 3549 081c 5020A0E3 		mov	r2, #80
 3550 0820 B430A0E3 		mov	r3, #180
 3551 0824 FEFFFFEB 		bl	Lcd_Draw_Box
 202:../tp.c       **** 	Lcd_Draw_Box(80,120,160,180,15);
 3552              		.loc 1 202 0
 3553 0828 0F30A0E3 		mov	r3, #15
 3554 082c 00308DE5 		str	r3, [sp, #0]
 3555 0830 5000A0E3 		mov	r0, #80
 3556 0834 7810A0E3 		mov	r1, #120
 3557 0838 A020A0E3 		mov	r2, #160
 3558 083c B430A0E3 		mov	r3, #180
 3559 0840 FEFFFFEB 		bl	Lcd_Draw_Box
 203:../tp.c       **** 	Lcd_Draw_Box(160,120,240,180,15);
 3560              		.loc 1 203 0
 3561 0844 0F30A0E3 		mov	r3, #15
 3562 0848 00308DE5 		str	r3, [sp, #0]
 3563 084c A000A0E3 		mov	r0, #160
 3564 0850 7810A0E3 		mov	r1, #120
 3565 0854 F020A0E3 		mov	r2, #240
 3566 0858 B430A0E3 		mov	r3, #180
 3567 085c FEFFFFEB 		bl	Lcd_Draw_Box
 204:../tp.c       **** 	Lcd_Draw_Box(240,120,320,180,15);
 3568              		.loc 1 204 0
 3569 0860 0F30A0E3 		mov	r3, #15
 3570 0864 00308DE5 		str	r3, [sp, #0]
 3571 0868 F000A0E3 		mov	r0, #240
 3572 086c 7810A0E3 		mov	r1, #120
 3573 0870 052DA0E3 		mov	r2, #320
 3574 0874 B430A0E3 		mov	r3, #180
 3575 0878 FEFFFFEB 		bl	Lcd_Draw_Box
 205:../tp.c       **** 	Lcd_Draw_Box(0,180,80,240,15);
 3576              		.loc 1 205 0
 3577 087c 0F30A0E3 		mov	r3, #15
 3578 0880 00308DE5 		str	r3, [sp, #0]
 3579 0884 0000A0E3 		mov	r0, #0
 3580 0888 B410A0E3 		mov	r1, #180
 3581 088c 5020A0E3 		mov	r2, #80
 3582 0890 F030A0E3 		mov	r3, #240
 3583 0894 FEFFFFEB 		bl	Lcd_Draw_Box
 206:../tp.c       **** 	Lcd_Draw_Box(80,180,160,240,15);
 3584              		.loc 1 206 0
 3585 0898 0F30A0E3 		mov	r3, #15
 3586 089c 00308DE5 		str	r3, [sp, #0]
 3587 08a0 5000A0E3 		mov	r0, #80
 3588 08a4 B410A0E3 		mov	r1, #180
 3589 08a8 A020A0E3 		mov	r2, #160
 3590 08ac F030A0E3 		mov	r3, #240
 3591 08b0 FEFFFFEB 		bl	Lcd_Draw_Box
 207:../tp.c       **** 	Lcd_Draw_Box(160,180,240,240,15);
 3592              		.loc 1 207 0
 3593 08b4 0F30A0E3 		mov	r3, #15
 3594 08b8 00308DE5 		str	r3, [sp, #0]
 3595 08bc A000A0E3 		mov	r0, #160
 3596 08c0 B410A0E3 		mov	r1, #180
 3597 08c4 F020A0E3 		mov	r2, #240
 3598 08c8 F030A0E3 		mov	r3, #240
 3599 08cc FEFFFFEB 		bl	Lcd_Draw_Box
 208:../tp.c       **** 	Lcd_Draw_Box(240,180,320,240,15);
 3600              		.loc 1 208 0
 3601 08d0 0F30A0E3 		mov	r3, #15
 3602 08d4 00308DE5 		str	r3, [sp, #0]
 3603 08d8 F000A0E3 		mov	r0, #240
 3604 08dc B410A0E3 		mov	r1, #180
 3605 08e0 052DA0E3 		mov	r2, #320
 3606 08e4 F030A0E3 		mov	r3, #240
 3607 08e8 FEFFFFEB 		bl	Lcd_Draw_Box
 209:../tp.c       **** 	/* output ASCII symbol */
 210:../tp.c       **** 	Lcd_DspAscII6x8(37,26,BLACK,(INT8U*)"0");
 3608              		.loc 1 210 0
 3609 08ec 2500A0E3 		mov	r0, #37
 3610 08f0 1A10A0E3 		mov	r1, #26
 3611 08f4 0F20A0E3 		mov	r2, #15
 3612 08f8 44319FE5 		ldr	r3, .L32
 3613 08fc FEFFFFEB 		bl	Lcd_DspAscII6x8
 211:../tp.c       **** 	Lcd_DspAscII6x8(117,26,BLACK,(INT8U*)"1");
 3614              		.loc 1 211 0
 3615 0900 7500A0E3 		mov	r0, #117
 3616 0904 1A10A0E3 		mov	r1, #26
 3617 0908 0F20A0E3 		mov	r2, #15
 3618 090c 34319FE5 		ldr	r3, .L32+4
 3619 0910 FEFFFFEB 		bl	Lcd_DspAscII6x8
 212:../tp.c       **** 	Lcd_DspAscII6x8(197,26,BLACK,(INT8U*)"2");
 3620              		.loc 1 212 0
 3621 0914 C500A0E3 		mov	r0, #197
 3622 0918 1A10A0E3 		mov	r1, #26
 3623 091c 0F20A0E3 		mov	r2, #15
 3624 0920 24319FE5 		ldr	r3, .L32+8
 3625 0924 FEFFFFEB 		bl	Lcd_DspAscII6x8
 213:../tp.c       **** 	Lcd_DspAscII6x8(277,26,BLACK,(INT8U*)"3");
 3626              		.loc 1 213 0
 3627 0928 20019FE5 		ldr	r0, .L32+12
 3628 092c 1A10A0E3 		mov	r1, #26
 3629 0930 0F20A0E3 		mov	r2, #15
 3630 0934 18319FE5 		ldr	r3, .L32+16
 3631 0938 FEFFFFEB 		bl	Lcd_DspAscII6x8
 214:../tp.c       **** 	Lcd_DspAscII6x8(37,86,BLACK,(INT8U*)"4");
 3632              		.loc 1 214 0
 3633 093c 2500A0E3 		mov	r0, #37
 3634 0940 5610A0E3 		mov	r1, #86
 3635 0944 0F20A0E3 		mov	r2, #15
 3636 0948 08319FE5 		ldr	r3, .L32+20
 3637 094c FEFFFFEB 		bl	Lcd_DspAscII6x8
 215:../tp.c       **** 	Lcd_DspAscII6x8(117,86,BLACK,(INT8U*)"5");
 3638              		.loc 1 215 0
 3639 0950 7500A0E3 		mov	r0, #117
 3640 0954 5610A0E3 		mov	r1, #86
 3641 0958 0F20A0E3 		mov	r2, #15
 3642 095c F8309FE5 		ldr	r3, .L32+24
 3643 0960 FEFFFFEB 		bl	Lcd_DspAscII6x8
 216:../tp.c       **** 	Lcd_DspAscII6x8(197,86,BLACK,(INT8U*)"6");
 3644              		.loc 1 216 0
 3645 0964 C500A0E3 		mov	r0, #197
 3646 0968 5610A0E3 		mov	r1, #86
 3647 096c 0F20A0E3 		mov	r2, #15
 3648 0970 E8309FE5 		ldr	r3, .L32+28
 3649 0974 FEFFFFEB 		bl	Lcd_DspAscII6x8
 217:../tp.c       **** 	Lcd_DspAscII6x8(277,86,BLACK,(INT8U*)"7");
 3650              		.loc 1 217 0
 3651 0978 D0009FE5 		ldr	r0, .L32+12
 3652 097c 5610A0E3 		mov	r1, #86
 3653 0980 0F20A0E3 		mov	r2, #15
 3654 0984 D8309FE5 		ldr	r3, .L32+32
 3655 0988 FEFFFFEB 		bl	Lcd_DspAscII6x8
 218:../tp.c       **** 	Lcd_DspAscII6x8(37,146,BLACK,(INT8U*)"8");
 3656              		.loc 1 218 0
 3657 098c 2500A0E3 		mov	r0, #37
 3658 0990 9210A0E3 		mov	r1, #146
 3659 0994 0F20A0E3 		mov	r2, #15
 3660 0998 C8309FE5 		ldr	r3, .L32+36
 3661 099c FEFFFFEB 		bl	Lcd_DspAscII6x8
 219:../tp.c       **** 	Lcd_DspAscII6x8(117,146,BLACK,(INT8U*)"9");
 3662              		.loc 1 219 0
 3663 09a0 7500A0E3 		mov	r0, #117
 3664 09a4 9210A0E3 		mov	r1, #146
 3665 09a8 0F20A0E3 		mov	r2, #15
 3666 09ac B8309FE5 		ldr	r3, .L32+40
 3667 09b0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 220:../tp.c       **** 	Lcd_DspAscII6x8(197,146,BLACK,(INT8U*)"A");
 3668              		.loc 1 220 0
 3669 09b4 C500A0E3 		mov	r0, #197
 3670 09b8 9210A0E3 		mov	r1, #146
 3671 09bc 0F20A0E3 		mov	r2, #15
 3672 09c0 A8309FE5 		ldr	r3, .L32+44
 3673 09c4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 221:../tp.c       **** 	Lcd_DspAscII6x8(277,146,BLACK,(INT8U*)"B");
 3674              		.loc 1 221 0
 3675 09c8 80009FE5 		ldr	r0, .L32+12
 3676 09cc 9210A0E3 		mov	r1, #146
 3677 09d0 0F20A0E3 		mov	r2, #15
 3678 09d4 98309FE5 		ldr	r3, .L32+48
 3679 09d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 222:../tp.c       **** 	Lcd_DspAscII6x8(37,206,BLACK,(INT8U*)"C");
 3680              		.loc 1 222 0
 3681 09dc 2500A0E3 		mov	r0, #37
 3682 09e0 CE10A0E3 		mov	r1, #206
 3683 09e4 0F20A0E3 		mov	r2, #15
 3684 09e8 88309FE5 		ldr	r3, .L32+52
 3685 09ec FEFFFFEB 		bl	Lcd_DspAscII6x8
 223:../tp.c       **** 	Lcd_DspAscII6x8(117,206,BLACK,(INT8U*)"D");
 3686              		.loc 1 223 0
 3687 09f0 7500A0E3 		mov	r0, #117
 3688 09f4 CE10A0E3 		mov	r1, #206
 3689 09f8 0F20A0E3 		mov	r2, #15
 3690 09fc 78309FE5 		ldr	r3, .L32+56
 3691 0a00 FEFFFFEB 		bl	Lcd_DspAscII6x8
 224:../tp.c       **** 	Lcd_DspAscII6x8(197,206,BLACK,(INT8U*)"E");
 3692              		.loc 1 224 0
 3693 0a04 C500A0E3 		mov	r0, #197
 3694 0a08 CE10A0E3 		mov	r1, #206
 3695 0a0c 0F20A0E3 		mov	r2, #15
 3696 0a10 68309FE5 		ldr	r3, .L32+60
 3697 0a14 FEFFFFEB 		bl	Lcd_DspAscII6x8
 225:../tp.c       **** 	Lcd_DspAscII6x8(277,206,BLACK,(INT8U*)"F");
 3698              		.loc 1 225 0
 3699 0a18 30009FE5 		ldr	r0, .L32+12
 3700 0a1c CE10A0E3 		mov	r1, #206
 3701 0a20 0F20A0E3 		mov	r2, #15
 3702 0a24 58309FE5 		ldr	r3, .L32+64
 3703 0a28 FEFFFFEB 		bl	Lcd_DspAscII6x8
 226:../tp.c       **** 	Lcd_Dma_Trans();
 3704              		.loc 1 226 0
 3705 0a2c FEFFFFEB 		bl	Lcd_Dma_Trans
 227:../tp.c       **** 	Delay(100);
 3706              		.loc 1 227 0
 3707 0a30 6400A0E3 		mov	r0, #100
 3708 0a34 FEFFFFEB 		bl	Delay
 228:../tp.c       **** }
 3709              		.loc 1 228 0
 3710 0a38 0CD04BE2 		sub	sp, fp, #12
 3711 0a3c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3712 0a40 1EFF2FE1 		bx	lr
 3713              	.L33:
 3714              		.align	2
 3715              	.L32:
 3716 0a44 00000000 		.word	.LC0
 3717 0a48 04000000 		.word	.LC1
 3718 0a4c 08000000 		.word	.LC2
 3719 0a50 15010000 		.word	277
 3720 0a54 0C000000 		.word	.LC3
 3721 0a58 10000000 		.word	.LC4
 3722 0a5c 14000000 		.word	.LC5
 3723 0a60 18000000 		.word	.LC6
 3724 0a64 1C000000 		.word	.LC7
 3725 0a68 20000000 		.word	.LC8
 3726 0a6c 24000000 		.word	.LC9
 3727 0a70 28000000 		.word	.LC10
 3728 0a74 2C000000 		.word	.LC11
 3729 0a78 30000000 		.word	.LC12
 3730 0a7c 34000000 		.word	.LC13
 3731 0a80 38000000 		.word	.LC14
 3732 0a84 3C000000 		.word	.LC15
 3733              		.cfi_endproc
 3734              	.LFE4:
 3736              		.align	2
 3737              		.global	DesignREC
 3739              	DesignREC:
 3740              	.LFB5:
 229:../tp.c       **** 
 230:../tp.c       **** /*********************************************************************************************
 231:../tp.c       **** * name:		DesignREC
 232:../tp.c       **** * func:		confirm the coordinate rang
 233:../tp.c       **** * para:		none
 234:../tp.c       **** * ret:		none
 235:../tp.c       **** * modify:
 236:../tp.c       **** * comment:		
 237:../tp.c       **** *********************************************************************************************/
 238:../tp.c       **** void DesignREC(ULONG tx, ULONG ty)
 239:../tp.c       **** {
 3741              		.loc 1 239 0
 3742              		.cfi_startproc
 3743              		@ Function supports interworking.
 3744              		@ args = 0, pretend = 0, frame = 16
 3745              		@ frame_needed = 1, uses_anonymous_args = 0
 3746 0a88 0DC0A0E1 		mov	ip, sp
 3747              	.LCFI10:
 3748              		.cfi_def_cfa_register 12
 3749 0a8c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3750 0a90 04B04CE2 		sub	fp, ip, #4
 3751              		.cfi_offset 14, -8
 3752              		.cfi_offset 13, -12
 3753              		.cfi_offset 11, -16
 3754              	.LCFI11:
 3755              		.cfi_def_cfa 11, 4
 3756 0a94 10D04DE2 		sub	sp, sp, #16
 3757 0a98 18000BE5 		str	r0, [fp, #-24]
 3758 0a9c 1C100BE5 		str	r1, [fp, #-28]
 240:../tp.c       ****     int tm;
 241:../tp.c       ****     
 242:../tp.c       **** //  Uart_Printf("\n\r User touch coordinate(X,Y) is :");
 243:../tp.c       **** //	Uart_Printf("(%04d",tx);	
 244:../tp.c       **** //	Uart_Printf(",%04d)\n",ty);    
 245:../tp.c       ****     if(oneTouch == 0)
 3759              		.loc 1 245 0
 3760 0aa0 F4309FE5 		ldr	r3, .L39
 3761 0aa4 003093E5 		ldr	r3, [r3, #0]
 3762 0aa8 000053E3 		cmp	r3, #0
 3763 0aac 0900001A 		bne	.L35
 246:../tp.c       ****      {
 247:../tp.c       ****        Vx = tx;                   // Vx as Xmax
 3764              		.loc 1 247 0
 3765 0ab0 E8309FE5 		ldr	r3, .L39+4
 3766 0ab4 18201BE5 		ldr	r2, [fp, #-24]
 3767 0ab8 002083E5 		str	r2, [r3, #0]
 248:../tp.c       ****        Vy = ty;                   // Vy as Ymax
 3768              		.loc 1 248 0
 3769 0abc E0309FE5 		ldr	r3, .L39+8
 3770 0ac0 1C201BE5 		ldr	r2, [fp, #-28]
 3771 0ac4 002083E5 		str	r2, [r3, #0]
 249:../tp.c       ****        oneTouch = 1;       		           
 3772              		.loc 1 249 0
 3773 0ac8 CC309FE5 		ldr	r3, .L39
 3774 0acc 0120A0E3 		mov	r2, #1
 3775 0ad0 002083E5 		str	r2, [r3, #0]
 3776 0ad4 2D0000EA 		b	.L34
 3777              	.L35:
 250:../tp.c       ****     }else{
 251:../tp.c       ****     
 252:../tp.c       ****     if(Vx < tx )
 3778              		.loc 1 252 0
 3779 0ad8 C0309FE5 		ldr	r3, .L39+4
 3780 0adc 002093E5 		ldr	r2, [r3, #0]
 3781 0ae0 18301BE5 		ldr	r3, [fp, #-24]
 3782 0ae4 030052E1 		cmp	r2, r3
 3783 0ae8 0700002A 		bcs	.L37
 253:../tp.c       ****      {
 254:../tp.c       ****        tm = tx; tx = Vx; Vx = tm; // tx as Xmin
 3784              		.loc 1 254 0
 3785 0aec 18301BE5 		ldr	r3, [fp, #-24]
 3786 0af0 10300BE5 		str	r3, [fp, #-16]
 3787 0af4 A4309FE5 		ldr	r3, .L39+4
 3788 0af8 003093E5 		ldr	r3, [r3, #0]
 3789 0afc 18300BE5 		str	r3, [fp, #-24]
 3790 0b00 10201BE5 		ldr	r2, [fp, #-16]
 3791 0b04 94309FE5 		ldr	r3, .L39+4
 3792 0b08 002083E5 		str	r2, [r3, #0]
 3793              	.L37:
 255:../tp.c       ****      }
 256:../tp.c       ****     if(Vy < ty )
 3794              		.loc 1 256 0
 3795 0b0c 90309FE5 		ldr	r3, .L39+8
 3796 0b10 002093E5 		ldr	r2, [r3, #0]
 3797 0b14 1C301BE5 		ldr	r3, [fp, #-28]
 3798 0b18 030052E1 		cmp	r2, r3
 3799 0b1c 0700002A 		bcs	.L38
 257:../tp.c       ****      { 
 258:../tp.c       ****        tm = ty; ty = Vy; Vy = tm; // ty as Ymin
 3800              		.loc 1 258 0
 3801 0b20 1C301BE5 		ldr	r3, [fp, #-28]
 3802 0b24 10300BE5 		str	r3, [fp, #-16]
 3803 0b28 74309FE5 		ldr	r3, .L39+8
 3804 0b2c 003093E5 		ldr	r3, [r3, #0]
 3805 0b30 1C300BE5 		str	r3, [fp, #-28]
 3806 0b34 10201BE5 		ldr	r2, [fp, #-16]
 3807 0b38 64309FE5 		ldr	r3, .L39+8
 3808 0b3c 002083E5 		str	r2, [r3, #0]
 3809              	.L38:
 259:../tp.c       ****      }
 260:../tp.c       ****      
 261:../tp.c       ****     Xmax = Vx;    Xmin = tx;
 3810              		.loc 1 261 0
 3811 0b40 58309FE5 		ldr	r3, .L39+4
 3812 0b44 002093E5 		ldr	r2, [r3, #0]
 3813 0b48 58309FE5 		ldr	r3, .L39+12
 3814 0b4c 002083E5 		str	r2, [r3, #0]
 3815 0b50 54309FE5 		ldr	r3, .L39+16
 3816 0b54 18201BE5 		ldr	r2, [fp, #-24]
 3817 0b58 002083E5 		str	r2, [r3, #0]
 262:../tp.c       ****     Ymax = Vy;    Ymin = ty;
 3818              		.loc 1 262 0
 3819 0b5c 40309FE5 		ldr	r3, .L39+8
 3820 0b60 002093E5 		ldr	r2, [r3, #0]
 3821 0b64 44309FE5 		ldr	r3, .L39+20
 3822 0b68 002083E5 		str	r2, [r3, #0]
 3823 0b6c 40309FE5 		ldr	r3, .L39+24
 3824 0b70 1C201BE5 		ldr	r2, [fp, #-28]
 3825 0b74 002083E5 		str	r2, [r3, #0]
 263:../tp.c       ****     
 264:../tp.c       ****     oneTouch = 0;
 3826              		.loc 1 264 0
 3827 0b78 1C309FE5 		ldr	r3, .L39
 3828 0b7c 0020A0E3 		mov	r2, #0
 3829 0b80 002083E5 		str	r2, [r3, #0]
 265:../tp.c       **** 	CheckTSP = 0;// has checked
 3830              		.loc 1 265 0
 3831 0b84 2C309FE5 		ldr	r3, .L39+28
 3832 0b88 0020A0E3 		mov	r2, #0
 3833 0b8c 002083E5 		str	r2, [r3, #0]
 3834              	.L34:
 266:../tp.c       **** 	
 267:../tp.c       **** 	}// end if(oneTouch == 0)
 268:../tp.c       **** 
 269:../tp.c       **** }
 3835              		.loc 1 269 0
 3836 0b90 0CD04BE2 		sub	sp, fp, #12
 3837 0b94 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3838 0b98 1EFF2FE1 		bx	lr
 3839              	.L40:
 3840              		.align	2
 3841              	.L39:
 3842 0b9c 00000000 		.word	oneTouch
 3843 0ba0 00000000 		.word	Vx
 3844 0ba4 00000000 		.word	Vy
 3845 0ba8 00000000 		.word	Xmax
 3846 0bac 00000000 		.word	Xmin
 3847 0bb0 00000000 		.word	Ymax
 3848 0bb4 00000000 		.word	Ymin
 3849 0bb8 00000000 		.word	CheckTSP
 3850              		.cfi_endproc
 3851              	.LFE5:
 3853              		.align	2
 3854              		.global	Check_Sel
 3856              	Check_Sel:
 3857              	.LFB6:
 270:../tp.c       **** 
 271:../tp.c       **** void Check_Sel(void)
 272:../tp.c       **** {
 3858              		.loc 1 272 0
 3859              		.cfi_startproc
 3860              		@ Function supports interworking.
 3861              		@ args = 0, pretend = 0, frame = 8
 3862              		@ frame_needed = 1, uses_anonymous_args = 0
 3863 0bbc 0DC0A0E1 		mov	ip, sp
 3864              	.LCFI12:
 3865              		.cfi_def_cfa_register 12
 3866 0bc0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3867 0bc4 04B04CE2 		sub	fp, ip, #4
 3868              		.cfi_offset 14, -8
 3869              		.cfi_offset 13, -12
 3870              		.cfi_offset 11, -16
 3871              	.LCFI13:
 3872              		.cfi_def_cfa 11, 4
 3873 0bc8 08D04DE2 		sub	sp, sp, #8
 3874              	.L45:
 273:../tp.c       **** 	char yn;
 274:../tp.c       ****     
 275:../tp.c       **** 	do{
 276:../tp.c       **** 	  
 277:../tp.c       **** 	  rINTMSK |=BIT_GLOBAL|BIT_EINT2;
 3875              		.loc 1 277 0
 3876 0bcc CC309FE5 		ldr	r3, .L47
 3877 0bd0 C8209FE5 		ldr	r2, .L47
 3878 0bd4 002092E5 		ldr	r2, [r2, #0]
 3879 0bd8 122582E3 		orr	r2, r2, #75497472
 3880 0bdc 002083E5 		str	r2, [r3, #0]
 278:../tp.c       **** //    Uart_Printf("\n\r Touch Screen coordinate Rang in:\n");
 279:../tp.c       **** //    Uart_Printf("   (Xmin,Ymin) is :(%04d,%04d)\n",Xmin,Ymin);	
 280:../tp.c       **** //	  Uart_Printf("   (Xmax,Ymax) is :(%04d,%04d)\n",Xmax,Ymax);	
 281:../tp.c       **** //	  Uart_Printf("\n  To use current settings. Press N/n key. ");
 282:../tp.c       **** //	  Uart_Printf("\n\n\r  Want to Set Again(Y/N)? ");	        	      
 283:../tp.c       **** //	  yn = Uart_Getch();
 284:../tp.c       ****       rI_ISPC = BIT_EINT2;              // clear pending_bit
 3881              		.loc 1 284 0
 3882 0be0 BC309FE5 		ldr	r3, .L47+4
 3883 0be4 0225A0E3 		mov	r2, #8388608
 3884 0be8 002083E5 		str	r2, [r3, #0]
 285:../tp.c       ****       rINTMSK =~(BIT_GLOBAL|BIT_EINT2);
 3885              		.loc 1 285 0
 3886 0bec AC309FE5 		ldr	r3, .L47
 3887 0bf0 1225E0E3 		mvn	r2, #75497472
 3888 0bf4 002083E5 		str	r2, [r3, #0]
 286:../tp.c       **** //	  if((yn == 0x59)|(yn == 0x79)|(yn == 0x4E)|(yn == 0x6E)) Uart_SendByte(yn);	  
 287:../tp.c       **** 	  if((yn == 0x59)|(yn == 0x79))
 3889              		.loc 1 287 0
 3890 0bf8 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 3891 0bfc 590053E3 		cmp	r3, #89
 3892 0c00 0030A013 		movne	r3, #0
 3893 0c04 0130A003 		moveq	r3, #1
 3894 0c08 FF2003E2 		and	r2, r3, #255
 3895 0c0c 0D305BE5 		ldrb	r3, [fp, #-13]	@ zero_extendqisi2
 3896 0c10 790053E3 		cmp	r3, #121
 3897 0c14 0030A013 		movne	r3, #0
 3898 0c18 0130A003 		moveq	r3, #1
 3899 0c1c FF3003E2 		and	r3, r3, #255
 3900 0c20 033082E1 		orr	r3, r2, r3
 3901 0c24 FF3003E2 		and	r3, r3, #255
 3902 0c28 000053E3 		cmp	r3, #0
 3903 0c2c 1700000A 		beq	.L46
 288:../tp.c       **** 	    {
 289:../tp.c       **** //	      Uart_Printf("\n\n Touch TSP's Cornor to ensure Xmax,Ymax,Xmax,Xmin");	      
 290:../tp.c       **** 
 291:../tp.c       ****          //Init X Y rectangle
 292:../tp.c       ****           Xmax = 750;    Xmin = 200;
 3904              		.loc 1 292 0
 3905 0c30 70309FE5 		ldr	r3, .L47+8
 3906 0c34 70209FE5 		ldr	r2, .L47+12
 3907 0c38 002083E5 		str	r2, [r3, #0]
 3908 0c3c 6C309FE5 		ldr	r3, .L47+16
 3909 0c40 C820A0E3 		mov	r2, #200
 3910 0c44 002083E5 		str	r2, [r3, #0]
 293:../tp.c       ****           Ymax = 620;    Ymin = 120;
 3911              		.loc 1 293 0
 3912 0c48 64309FE5 		ldr	r3, .L47+20
 3913 0c4c 9B2FA0E3 		mov	r2, #620
 3914 0c50 002083E5 		str	r2, [r3, #0]
 3915 0c54 5C309FE5 		ldr	r3, .L47+24
 3916 0c58 7820A0E3 		mov	r2, #120
 3917 0c5c 002083E5 		str	r2, [r3, #0]
 294:../tp.c       **** 
 295:../tp.c       **** 	      oneTouch = 0;
 3918              		.loc 1 295 0
 3919 0c60 54309FE5 		ldr	r3, .L47+28
 3920 0c64 0020A0E3 		mov	r2, #0
 3921 0c68 002083E5 		str	r2, [r3, #0]
 296:../tp.c       **** 	      CheckTSP = 1; // mask to check
 3922              		.loc 1 296 0
 3923 0c6c 4C309FE5 		ldr	r3, .L47+32
 3924 0c70 0120A0E3 		mov	r2, #1
 3925 0c74 002083E5 		str	r2, [r3, #0]
 297:../tp.c       **** 	      while(CheckTSP);
 3926              		.loc 1 297 0
 3927 0c78 0000A0E1 		mov	r0, r0	@ nop
 3928              	.L43:
 3929              		.loc 1 297 0 is_stmt 0 discriminator 1
 3930 0c7c 3C309FE5 		ldr	r3, .L47+32
 3931 0c80 003093E5 		ldr	r3, [r3, #0]
 3932 0c84 000053E3 		cmp	r3, #0
 3933 0c88 FBFFFF1A 		bne	.L43
 298:../tp.c       **** 	      
 299:../tp.c       **** 	    }else break;	    
 300:../tp.c       **** 	  
 301:../tp.c       **** 	}while(1);
 3934              		.loc 1 301 0 is_stmt 1
 3935 0c8c CEFFFFEA 		b	.L45
 3936              	.L46:
 302:../tp.c       **** 	
 303:../tp.c       **** }
 3937              		.loc 1 303 0
 3938 0c90 0000A0E1 		mov	r0, r0	@ nop
 3939              	.L41:
 3940 0c94 0CD04BE2 		sub	sp, fp, #12
 3941 0c98 00689DE8 		ldmfd	sp, {fp, sp, lr}
 3942 0c9c 1EFF2FE1 		bx	lr
 3943              	.L48:
 3944              		.align	2
 3945              	.L47:
 3946 0ca0 0C00E001 		.word	31457292
 3947 0ca4 2400E001 		.word	31457316
 3948 0ca8 00000000 		.word	Xmax
 3949 0cac EE020000 		.word	750
 3950 0cb0 00000000 		.word	Xmin
 3951 0cb4 00000000 		.word	Ymax
 3952 0cb8 00000000 		.word	Ymin
 3953 0cbc 00000000 		.word	oneTouch
 3954 0cc0 00000000 		.word	CheckTSP
 3955              		.cfi_endproc
 3956              	.LFE6:
 3958              		.align	2
 3960              	clamp:
 3961              	.LFB7:
 304:../tp.c       **** 
 305:../tp.c       **** /*===================================================================================
 306:../tp.c       ****  * FUNCIONES DE CALIBRACIÓN DE 5 PUNTOS
 307:../tp.c       ****  *===================================================================================*/
 308:../tp.c       **** 
 309:../tp.c       **** /*********************************************************************************************
 310:../tp.c       **** * name:     clamp
 311:../tp.c       **** * func:     Limita un valor entre mínimo y máximo
 312:../tp.c       **** *********************************************************************************************/
 313:../tp.c       **** static int clamp(int val, int min, int max)
 314:../tp.c       **** {
 3962              		.loc 1 314 0
 3963              		.cfi_startproc
 3964              		@ Function supports interworking.
 3965              		@ args = 0, pretend = 0, frame = 16
 3966              		@ frame_needed = 1, uses_anonymous_args = 0
 3967 0cc4 0DC0A0E1 		mov	ip, sp
 3968              	.LCFI14:
 3969              		.cfi_def_cfa_register 12
 3970 0cc8 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 3971 0ccc 04B04CE2 		sub	fp, ip, #4
 3972              		.cfi_offset 14, -8
 3973              		.cfi_offset 13, -12
 3974              		.cfi_offset 11, -16
 3975              	.LCFI15:
 3976              		.cfi_def_cfa 11, 4
 3977 0cd0 10D04DE2 		sub	sp, sp, #16
 3978 0cd4 10000BE5 		str	r0, [fp, #-16]
 3979 0cd8 14100BE5 		str	r1, [fp, #-20]
 3980 0cdc 18200BE5 		str	r2, [fp, #-24]
 315:../tp.c       ****     if (val < min) return min;
 3981              		.loc 1 315 0
 3982 0ce0 10201BE5 		ldr	r2, [fp, #-16]
 3983 0ce4 14301BE5 		ldr	r3, [fp, #-20]
 3984 0ce8 030052E1 		cmp	r2, r3
 3985 0cec 010000AA 		bge	.L50
 3986              		.loc 1 315 0 is_stmt 0 discriminator 1
 3987 0cf0 14301BE5 		ldr	r3, [fp, #-20]
 3988 0cf4 060000EA 		b	.L51
 3989              	.L50:
 316:../tp.c       ****     if (val > max) return max;
 3990              		.loc 1 316 0 is_stmt 1
 3991 0cf8 10201BE5 		ldr	r2, [fp, #-16]
 3992 0cfc 18301BE5 		ldr	r3, [fp, #-24]
 3993 0d00 030052E1 		cmp	r2, r3
 3994 0d04 010000DA 		ble	.L52
 3995              		.loc 1 316 0 is_stmt 0 discriminator 1
 3996 0d08 18301BE5 		ldr	r3, [fp, #-24]
 3997 0d0c 000000EA 		b	.L51
 3998              	.L52:
 317:../tp.c       ****     return val;
 3999              		.loc 1 317 0 is_stmt 1
 4000 0d10 10301BE5 		ldr	r3, [fp, #-16]
 4001              	.L51:
 318:../tp.c       **** }
 4002              		.loc 1 318 0
 4003 0d14 0300A0E1 		mov	r0, r3
 4004 0d18 0CD04BE2 		sub	sp, fp, #12
 4005 0d1c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4006 0d20 1EFF2FE1 		bx	lr
 4007              		.cfi_endproc
 4008              	.LFE7:
 4010              		.align	2
 4012              	draw_cross:
 4013              	.LFB8:
 319:../tp.c       **** 
 320:../tp.c       **** /*********************************************************************************************
 321:../tp.c       **** * name:     draw_cross
 322:../tp.c       **** * func:     Dibuja una cruz en las coordenadas especificadas
 323:../tp.c       **** *********************************************************************************************/
 324:../tp.c       **** static void draw_cross(int x, int y)
 325:../tp.c       **** {
 4014              		.loc 1 325 0
 4015              		.cfi_startproc
 4016              		@ Function supports interworking.
 4017              		@ args = 0, pretend = 0, frame = 16
 4018              		@ frame_needed = 1, uses_anonymous_args = 0
 4019 0d24 0DC0A0E1 		mov	ip, sp
 4020              	.LCFI16:
 4021              		.cfi_def_cfa_register 12
 4022 0d28 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4023 0d2c 04B04CE2 		sub	fp, ip, #4
 4024              		.cfi_offset 14, -8
 4025              		.cfi_offset 13, -12
 4026              		.cfi_offset 11, -16
 4027              	.LCFI17:
 4028              		.cfi_def_cfa 11, 4
 4029 0d30 10D04DE2 		sub	sp, sp, #16
 4030 0d34 18000BE5 		str	r0, [fp, #-24]
 4031 0d38 1C100BE5 		str	r1, [fp, #-28]
 326:../tp.c       ****     int i;
 327:../tp.c       ****     // Línea horizontal
 328:../tp.c       ****     for (i = -10; i <= 10; i++)
 4032              		.loc 1 328 0
 4033 0d3c 0930E0E3 		mvn	r3, #9
 4034 0d40 10300BE5 		str	r3, [fp, #-16]
 4035 0d44 500000EA 		b	.L54
 4036              	.L56:
 329:../tp.c       ****     {
 330:../tp.c       ****         if (x + i >= 0 && x + i < SCR_XSIZE)
 4037              		.loc 1 330 0
 4038 0d48 18201BE5 		ldr	r2, [fp, #-24]
 4039 0d4c 10301BE5 		ldr	r3, [fp, #-16]
 4040 0d50 033082E0 		add	r3, r2, r3
 4041 0d54 000053E3 		cmp	r3, #0
 4042 0d58 480000BA 		blt	.L55
 4043              		.loc 1 330 0 is_stmt 0 discriminator 1
 4044 0d5c 18201BE5 		ldr	r2, [fp, #-24]
 4045 0d60 10301BE5 		ldr	r3, [fp, #-16]
 4046 0d64 032082E0 		add	r2, r2, r3
 4047 0d68 7C329FE5 		ldr	r3, .L60
 4048 0d6c 030052E1 		cmp	r2, r3
 4049 0d70 420000CA 		bgt	.L55
 331:../tp.c       ****             (LCD_PutPixel(x + i, y, 0xf));
 4050              		.loc 1 331 0 is_stmt 1
 4051 0d74 1C201BE5 		ldr	r2, [fp, #-28]
 4052 0d78 0230A0E1 		mov	r3, r2
 4053 0d7c 0331A0E1 		mov	r3, r3, asl #2
 4054 0d80 023083E0 		add	r3, r3, r2
 4055 0d84 0333A0E1 		mov	r3, r3, asl #6
 4056 0d88 A32FA0E1 		mov	r2, r3, lsr #31
 4057 0d8c 033082E0 		add	r3, r2, r3
 4058 0d90 C330A0E1 		mov	r3, r3, asr #1
 4059 0d94 C32683E2 		add	r2, r3, #204472320
 4060 0d98 962C82E2 		add	r2, r2, #38400
 4061 0d9c 18101BE5 		ldr	r1, [fp, #-24]
 4062 0da0 10301BE5 		ldr	r3, [fp, #-16]
 4063 0da4 033081E0 		add	r3, r1, r3
 4064 0da8 071083E2 		add	r1, r3, #7
 4065 0dac 000053E3 		cmp	r3, #0
 4066 0db0 0130A0B1 		movlt	r3, r1
 4067 0db4 C331A0E1 		mov	r3, r3, asr #3
 4068 0db8 0331A0E1 		mov	r3, r3, asl #2
 4069 0dbc 033082E0 		add	r3, r2, r3
 4070 0dc0 0310A0E1 		mov	r1, r3
 4071 0dc4 1C201BE5 		ldr	r2, [fp, #-28]
 4072 0dc8 0230A0E1 		mov	r3, r2
 4073 0dcc 0331A0E1 		mov	r3, r3, asl #2
 4074 0dd0 023083E0 		add	r3, r3, r2
 4075 0dd4 0333A0E1 		mov	r3, r3, asl #6
 4076 0dd8 A32FA0E1 		mov	r2, r3, lsr #31
 4077 0ddc 033082E0 		add	r3, r2, r3
 4078 0de0 C330A0E1 		mov	r3, r3, asr #1
 4079 0de4 C32683E2 		add	r2, r3, #204472320
 4080 0de8 962C82E2 		add	r2, r2, #38400
 4081 0dec 18001BE5 		ldr	r0, [fp, #-24]
 4082 0df0 10301BE5 		ldr	r3, [fp, #-16]
 4083 0df4 033080E0 		add	r3, r0, r3
 4084 0df8 070083E2 		add	r0, r3, #7
 4085 0dfc 000053E3 		cmp	r3, #0
 4086 0e00 0030A0B1 		movlt	r3, r0
 4087 0e04 C331A0E1 		mov	r3, r3, asr #3
 4088 0e08 0331A0E1 		mov	r3, r3, asl #2
 4089 0e0c 033082E0 		add	r3, r2, r3
 4090 0e10 000093E5 		ldr	r0, [r3, #0]
 4091 0e14 18201BE5 		ldr	r2, [fp, #-24]
 4092 0e18 10301BE5 		ldr	r3, [fp, #-16]
 4093 0e1c 032082E0 		add	r2, r2, r3
 4094 0e20 C23FA0E1 		mov	r3, r2, asr #31
 4095 0e24 A33EA0E1 		mov	r3, r3, lsr #29
 4096 0e28 032082E0 		add	r2, r2, r3
 4097 0e2c 072002E2 		and	r2, r2, #7
 4098 0e30 023063E0 		rsb	r3, r3, r2
 4099 0e34 0331A0E1 		mov	r3, r3, asl #2
 4100 0e38 0F22A0E3 		mov	r2, #-268435456
 4101 0e3c 3233A0E1 		mov	r3, r2, lsr r3
 4102 0e40 0330E0E1 		mvn	r3, r3
 4103 0e44 030000E0 		and	r0, r0, r3
 4104 0e48 18201BE5 		ldr	r2, [fp, #-24]
 4105 0e4c 10301BE5 		ldr	r3, [fp, #-16]
 4106 0e50 032082E0 		add	r2, r2, r3
 4107 0e54 C23FA0E1 		mov	r3, r2, asr #31
 4108 0e58 A33EA0E1 		mov	r3, r3, lsr #29
 4109 0e5c 032082E0 		add	r2, r2, r3
 4110 0e60 072002E2 		and	r2, r2, #7
 4111 0e64 023063E0 		rsb	r3, r3, r2
 4112 0e68 073063E2 		rsb	r3, r3, #7
 4113 0e6c 0331A0E1 		mov	r3, r3, asl #2
 4114 0e70 0F20A0E3 		mov	r2, #15
 4115 0e74 1233A0E1 		mov	r3, r2, asl r3
 4116 0e78 033080E1 		orr	r3, r0, r3
 4117 0e7c 003081E5 		str	r3, [r1, #0]
 4118              	.L55:
 328:../tp.c       ****     for (i = -10; i <= 10; i++)
 4119              		.loc 1 328 0
 4120 0e80 10301BE5 		ldr	r3, [fp, #-16]
 4121 0e84 013083E2 		add	r3, r3, #1
 4122 0e88 10300BE5 		str	r3, [fp, #-16]
 4123              	.L54:
 328:../tp.c       ****     for (i = -10; i <= 10; i++)
 4124              		.loc 1 328 0 is_stmt 0 discriminator 1
 4125 0e8c 10301BE5 		ldr	r3, [fp, #-16]
 4126 0e90 0A0053E3 		cmp	r3, #10
 4127 0e94 ABFFFFDA 		ble	.L56
 332:../tp.c       ****     }
 333:../tp.c       ****     // Línea vertical
 334:../tp.c       ****     for (i = -10; i <= 10; i++)
 4128              		.loc 1 334 0 is_stmt 1
 4129 0e98 0930E0E3 		mvn	r3, #9
 4130 0e9c 10300BE5 		str	r3, [fp, #-16]
 4131 0ea0 4B0000EA 		b	.L57
 4132              	.L59:
 335:../tp.c       ****     {
 336:../tp.c       ****         if (y + i >= 0 && y + i < SCR_YSIZE)
 4133              		.loc 1 336 0
 4134 0ea4 1C201BE5 		ldr	r2, [fp, #-28]
 4135 0ea8 10301BE5 		ldr	r3, [fp, #-16]
 4136 0eac 033082E0 		add	r3, r2, r3
 4137 0eb0 000053E3 		cmp	r3, #0
 4138 0eb4 430000BA 		blt	.L58
 4139              		.loc 1 336 0 is_stmt 0 discriminator 1
 4140 0eb8 1C201BE5 		ldr	r2, [fp, #-28]
 4141 0ebc 10301BE5 		ldr	r3, [fp, #-16]
 4142 0ec0 033082E0 		add	r3, r2, r3
 4143 0ec4 EF0053E3 		cmp	r3, #239
 4144 0ec8 3E0000CA 		bgt	.L58
 337:../tp.c       ****             (LCD_PutPixel(x, y + i, 0xf));
 4145              		.loc 1 337 0 is_stmt 1
 4146 0ecc 1C201BE5 		ldr	r2, [fp, #-28]
 4147 0ed0 10301BE5 		ldr	r3, [fp, #-16]
 4148 0ed4 032082E0 		add	r2, r2, r3
 4149 0ed8 0230A0E1 		mov	r3, r2
 4150 0edc 0331A0E1 		mov	r3, r3, asl #2
 4151 0ee0 023083E0 		add	r3, r3, r2
 4152 0ee4 0333A0E1 		mov	r3, r3, asl #6
 4153 0ee8 A32FA0E1 		mov	r2, r3, lsr #31
 4154 0eec 033082E0 		add	r3, r2, r3
 4155 0ef0 C330A0E1 		mov	r3, r3, asr #1
 4156 0ef4 C32683E2 		add	r2, r3, #204472320
 4157 0ef8 962C82E2 		add	r2, r2, #38400
 4158 0efc 18301BE5 		ldr	r3, [fp, #-24]
 4159 0f00 071083E2 		add	r1, r3, #7
 4160 0f04 000053E3 		cmp	r3, #0
 4161 0f08 0130A0B1 		movlt	r3, r1
 4162 0f0c C331A0E1 		mov	r3, r3, asr #3
 4163 0f10 0331A0E1 		mov	r3, r3, asl #2
 4164 0f14 033082E0 		add	r3, r2, r3
 4165 0f18 0310A0E1 		mov	r1, r3
 4166 0f1c 1C201BE5 		ldr	r2, [fp, #-28]
 4167 0f20 10301BE5 		ldr	r3, [fp, #-16]
 4168 0f24 032082E0 		add	r2, r2, r3
 4169 0f28 0230A0E1 		mov	r3, r2
 4170 0f2c 0331A0E1 		mov	r3, r3, asl #2
 4171 0f30 023083E0 		add	r3, r3, r2
 4172 0f34 0333A0E1 		mov	r3, r3, asl #6
 4173 0f38 A32FA0E1 		mov	r2, r3, lsr #31
 4174 0f3c 033082E0 		add	r3, r2, r3
 4175 0f40 C330A0E1 		mov	r3, r3, asr #1
 4176 0f44 C32683E2 		add	r2, r3, #204472320
 4177 0f48 962C82E2 		add	r2, r2, #38400
 4178 0f4c 18301BE5 		ldr	r3, [fp, #-24]
 4179 0f50 070083E2 		add	r0, r3, #7
 4180 0f54 000053E3 		cmp	r3, #0
 4181 0f58 0030A0B1 		movlt	r3, r0
 4182 0f5c C331A0E1 		mov	r3, r3, asr #3
 4183 0f60 0331A0E1 		mov	r3, r3, asl #2
 4184 0f64 033082E0 		add	r3, r2, r3
 4185 0f68 000093E5 		ldr	r0, [r3, #0]
 4186 0f6c 18201BE5 		ldr	r2, [fp, #-24]
 4187 0f70 C23FA0E1 		mov	r3, r2, asr #31
 4188 0f74 A33EA0E1 		mov	r3, r3, lsr #29
 4189 0f78 032082E0 		add	r2, r2, r3
 4190 0f7c 072002E2 		and	r2, r2, #7
 4191 0f80 023063E0 		rsb	r3, r3, r2
 4192 0f84 0331A0E1 		mov	r3, r3, asl #2
 4193 0f88 0F22A0E3 		mov	r2, #-268435456
 4194 0f8c 3233A0E1 		mov	r3, r2, lsr r3
 4195 0f90 0330E0E1 		mvn	r3, r3
 4196 0f94 030000E0 		and	r0, r0, r3
 4197 0f98 18201BE5 		ldr	r2, [fp, #-24]
 4198 0f9c C23FA0E1 		mov	r3, r2, asr #31
 4199 0fa0 A33EA0E1 		mov	r3, r3, lsr #29
 4200 0fa4 032082E0 		add	r2, r2, r3
 4201 0fa8 072002E2 		and	r2, r2, #7
 4202 0fac 023063E0 		rsb	r3, r3, r2
 4203 0fb0 073063E2 		rsb	r3, r3, #7
 4204 0fb4 0331A0E1 		mov	r3, r3, asl #2
 4205 0fb8 0F20A0E3 		mov	r2, #15
 4206 0fbc 1233A0E1 		mov	r3, r2, asl r3
 4207 0fc0 033080E1 		orr	r3, r0, r3
 4208 0fc4 003081E5 		str	r3, [r1, #0]
 4209              	.L58:
 334:../tp.c       ****     for (i = -10; i <= 10; i++)
 4210              		.loc 1 334 0
 4211 0fc8 10301BE5 		ldr	r3, [fp, #-16]
 4212 0fcc 013083E2 		add	r3, r3, #1
 4213 0fd0 10300BE5 		str	r3, [fp, #-16]
 4214              	.L57:
 334:../tp.c       ****     for (i = -10; i <= 10; i++)
 4215              		.loc 1 334 0 is_stmt 0 discriminator 1
 4216 0fd4 10301BE5 		ldr	r3, [fp, #-16]
 4217 0fd8 0A0053E3 		cmp	r3, #10
 4218 0fdc B0FFFFDA 		ble	.L59
 338:../tp.c       ****     }
 339:../tp.c       **** }
 4219              		.loc 1 339 0 is_stmt 1
 4220 0fe0 0CD04BE2 		sub	sp, fp, #12
 4221 0fe4 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4222 0fe8 1EFF2FE1 		bx	lr
 4223              	.L61:
 4224              		.align	2
 4225              	.L60:
 4226 0fec 3F010000 		.word	319
 4227              		.cfi_endproc
 4228              	.LFE8:
 4230              		.align	2
 4231              		.global	report_touch_data
 4233              	report_touch_data:
 4234              	.LFB9:
 340:../tp.c       **** 
 341:../tp.c       **** /*********************************************************************************************
 342:../tp.c       **** * name:     report_touch_data
 343:../tp.c       **** * func:     Llamada desde TSInt() para reportar coordenadas crudas
 344:../tp.c       **** *           Implementa antirrebote: ignora toques muy rápidos (< 300ms desde último toque)
 345:../tp.c       **** *********************************************************************************************/
 346:../tp.c       **** void report_touch_data(int x, int y)
 347:../tp.c       **** {
 4235              		.loc 1 347 0
 4236              		.cfi_startproc
 4237              		@ Function supports interworking.
 4238              		@ args = 0, pretend = 0, frame = 16
 4239              		@ frame_needed = 1, uses_anonymous_args = 0
 4240 0ff0 0DC0A0E1 		mov	ip, sp
 4241              	.LCFI18:
 4242              		.cfi_def_cfa_register 12
 4243 0ff4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4244 0ff8 04B04CE2 		sub	fp, ip, #4
 4245              		.cfi_offset 14, -8
 4246              		.cfi_offset 13, -12
 4247              		.cfi_offset 11, -16
 4248              	.LCFI19:
 4249              		.cfi_def_cfa 11, 4
 4250 0ffc 10D04DE2 		sub	sp, sp, #16
 4251 1000 18000BE5 		str	r0, [fp, #-24]
 4252 1004 1C100BE5 		str	r1, [fp, #-28]
 348:../tp.c       ****     unsigned int current_time = timer2_count();
 4253              		.loc 1 348 0
 4254 1008 FEFFFFEB 		bl	timer2_count
 4255 100c 14000BE5 		str	r0, [fp, #-20]
 349:../tp.c       ****     unsigned int time_diff;
 350:../tp.c       ****     
 351:../tp.c       ****     /* Calcular diferencia de tiempo (manejando overflow del contador) */
 352:../tp.c       ****     if (current_time >= g_last_touch_time)
 4256              		.loc 1 352 0
 4257 1010 9C309FE5 		ldr	r3, .L66
 4258 1014 003093E5 		ldr	r3, [r3, #0]
 4259 1018 14201BE5 		ldr	r2, [fp, #-20]
 4260 101c 030052E1 		cmp	r2, r3
 4261 1020 0500003A 		bcc	.L63
 353:../tp.c       ****         time_diff = current_time - g_last_touch_time;
 4262              		.loc 1 353 0
 4263 1024 88309FE5 		ldr	r3, .L66
 4264 1028 003093E5 		ldr	r3, [r3, #0]
 4265 102c 14201BE5 		ldr	r2, [fp, #-20]
 4266 1030 023063E0 		rsb	r3, r3, r2
 4267 1034 10300BE5 		str	r3, [fp, #-16]
 4268 1038 060000EA 		b	.L64
 4269              	.L63:
 354:../tp.c       ****     else
 355:../tp.c       ****         time_diff = (0xFFFFFFFF - g_last_touch_time) + current_time + 1;
 4270              		.loc 1 355 0
 4271 103c 70309FE5 		ldr	r3, .L66
 4272 1040 003093E5 		ldr	r3, [r3, #0]
 4273 1044 0320E0E1 		mvn	r2, r3
 4274 1048 14301BE5 		ldr	r3, [fp, #-20]
 4275 104c 033082E0 		add	r3, r2, r3
 4276 1050 013083E2 		add	r3, r3, #1
 4277 1054 10300BE5 		str	r3, [fp, #-16]
 4278              	.L64:
 356:../tp.c       ****     
 357:../tp.c       ****     /* Solo aceptar el toque si ha pasado suficiente tiempo desde el último */
 358:../tp.c       ****     if (g_ts_ready == 0 && time_diff >= TOUCH_DEBOUNCE_TIME)
 4279              		.loc 1 358 0
 4280 1058 58309FE5 		ldr	r3, .L66+4
 4281 105c 003093E5 		ldr	r3, [r3, #0]
 4282 1060 000053E3 		cmp	r3, #0
 4283 1064 0F00001A 		bne	.L62
 4284              		.loc 1 358 0 is_stmt 0 discriminator 1
 4285 1068 10201BE5 		ldr	r2, [fp, #-16]
 4286 106c 48309FE5 		ldr	r3, .L66+8
 4287 1070 030052E1 		cmp	r2, r3
 4288 1074 0B00009A 		bls	.L62
 359:../tp.c       ****     {
 360:../tp.c       ****         g_ts_raw_x = x;
 4289              		.loc 1 360 0 is_stmt 1
 4290 1078 40309FE5 		ldr	r3, .L66+12
 4291 107c 18201BE5 		ldr	r2, [fp, #-24]
 4292 1080 002083E5 		str	r2, [r3, #0]
 361:../tp.c       ****         g_ts_raw_y = y;
 4293              		.loc 1 361 0
 4294 1084 38309FE5 		ldr	r3, .L66+16
 4295 1088 1C201BE5 		ldr	r2, [fp, #-28]
 4296 108c 002083E5 		str	r2, [r3, #0]
 362:../tp.c       ****         g_ts_ready = 1;
 4297              		.loc 1 362 0
 4298 1090 20309FE5 		ldr	r3, .L66+4
 4299 1094 0120A0E3 		mov	r2, #1
 4300 1098 002083E5 		str	r2, [r3, #0]
 363:../tp.c       ****         g_last_touch_time = current_time;  /* Actualizar tiempo del último toque */
 4301              		.loc 1 363 0
 4302 109c 10309FE5 		ldr	r3, .L66
 4303 10a0 14201BE5 		ldr	r2, [fp, #-20]
 4304 10a4 002083E5 		str	r2, [r3, #0]
 4305              	.L62:
 364:../tp.c       ****     }
 365:../tp.c       **** }
 4306              		.loc 1 365 0
 4307 10a8 0CD04BE2 		sub	sp, fp, #12
 4308 10ac 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4309 10b0 1EFF2FE1 		bx	lr
 4310              	.L67:
 4311              		.align	2
 4312              	.L66:
 4313 10b4 28000000 		.word	g_last_touch_time
 4314 10b8 1C000000 		.word	g_ts_ready
 4315 10bc DF930400 		.word	299999
 4316 10c0 20000000 		.word	g_ts_raw_x
 4317 10c4 24000000 		.word	g_ts_raw_y
 4318              		.cfi_endproc
 4319              	.LFE9:
 4321              		.align	2
 4323              	ts_wait_for_touch:
 4324              	.LFB10:
 366:../tp.c       **** 
 367:../tp.c       **** /*********************************************************************************************
 368:../tp.c       **** * name:     ts_wait_for_touch
 369:../tp.c       **** * func:     Espera hasta detectar un toque
 370:../tp.c       **** *********************************************************************************************/
 371:../tp.c       **** static void ts_wait_for_touch(void)
 372:../tp.c       **** {
 4325              		.loc 1 372 0
 4326              		.cfi_startproc
 4327              		@ Function supports interworking.
 4328              		@ args = 0, pretend = 0, frame = 0
 4329              		@ frame_needed = 1, uses_anonymous_args = 0
 4330 10c8 0DC0A0E1 		mov	ip, sp
 4331              	.LCFI20:
 4332              		.cfi_def_cfa_register 12
 4333 10cc 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4334 10d0 04B04CE2 		sub	fp, ip, #4
 4335              		.cfi_offset 14, -8
 4336              		.cfi_offset 13, -12
 4337              		.cfi_offset 11, -16
 4338              	.LCFI21:
 4339              		.cfi_def_cfa 11, 4
 373:../tp.c       ****     g_ts_ready = 0;
 4340              		.loc 1 373 0
 4341 10d4 24309FE5 		ldr	r3, .L70
 4342 10d8 0020A0E3 		mov	r2, #0
 4343 10dc 002083E5 		str	r2, [r3, #0]
 374:../tp.c       ****     while (g_ts_ready == 0)
 4344              		.loc 1 374 0
 4345 10e0 0000A0E1 		mov	r0, r0	@ nop
 4346              	.L69:
 4347              		.loc 1 374 0 is_stmt 0 discriminator 1
 4348 10e4 14309FE5 		ldr	r3, .L70
 4349 10e8 003093E5 		ldr	r3, [r3, #0]
 4350 10ec 000053E3 		cmp	r3, #0
 4351 10f0 FBFFFF0A 		beq	.L69
 375:../tp.c       ****     {
 376:../tp.c       ****         // Esperar interrupción
 377:../tp.c       ****     }
 378:../tp.c       **** }
 4352              		.loc 1 378 0 is_stmt 1
 4353 10f4 0CD04BE2 		sub	sp, fp, #12
 4354 10f8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4355 10fc 1EFF2FE1 		bx	lr
 4356              	.L71:
 4357              		.align	2
 4358              	.L70:
 4359 1100 1C000000 		.word	g_ts_ready
 4360              		.cfi_endproc
 4361              	.LFE10:
 4363              		.align	2
 4365              	ts_read_raw:
 4366              	.LFB11:
 379:../tp.c       **** 
 380:../tp.c       **** /*********************************************************************************************
 381:../tp.c       **** * name:     ts_read_raw
 382:../tp.c       **** * func:     Lee coordenadas crudas del ADC (bloqueante)
 383:../tp.c       **** *********************************************************************************************/
 384:../tp.c       **** static void ts_read_raw(int *xr, int *yr)
 385:../tp.c       **** {
 4367              		.loc 1 385 0
 4368              		.cfi_startproc
 4369              		@ Function supports interworking.
 4370              		@ args = 0, pretend = 0, frame = 8
 4371              		@ frame_needed = 1, uses_anonymous_args = 0
 4372 1104 0DC0A0E1 		mov	ip, sp
 4373              	.LCFI22:
 4374              		.cfi_def_cfa_register 12
 4375 1108 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4376 110c 04B04CE2 		sub	fp, ip, #4
 4377              		.cfi_offset 14, -8
 4378              		.cfi_offset 13, -12
 4379              		.cfi_offset 11, -16
 4380              	.LCFI23:
 4381              		.cfi_def_cfa 11, 4
 4382 1110 08D04DE2 		sub	sp, sp, #8
 4383 1114 10000BE5 		str	r0, [fp, #-16]
 4384 1118 14100BE5 		str	r1, [fp, #-20]
 386:../tp.c       ****     ts_wait_for_touch();
 4385              		.loc 1 386 0
 4386 111c E9FFFFEB 		bl	ts_wait_for_touch
 387:../tp.c       ****     *xr = g_ts_raw_x;
 4387              		.loc 1 387 0
 4388 1120 24309FE5 		ldr	r3, .L73
 4389 1124 002093E5 		ldr	r2, [r3, #0]
 4390 1128 10301BE5 		ldr	r3, [fp, #-16]
 4391 112c 002083E5 		str	r2, [r3, #0]
 388:../tp.c       ****     *yr = g_ts_raw_y;
 4392              		.loc 1 388 0
 4393 1130 18309FE5 		ldr	r3, .L73+4
 4394 1134 002093E5 		ldr	r2, [r3, #0]
 4395 1138 14301BE5 		ldr	r3, [fp, #-20]
 4396 113c 002083E5 		str	r2, [r3, #0]
 389:../tp.c       **** }
 4397              		.loc 1 389 0
 4398 1140 0CD04BE2 		sub	sp, fp, #12
 4399 1144 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4400 1148 1EFF2FE1 		bx	lr
 4401              	.L74:
 4402              		.align	2
 4403              	.L73:
 4404 114c 20000000 		.word	g_ts_raw_x
 4405 1150 24000000 		.word	g_ts_raw_y
 4406              		.cfi_endproc
 4407              	.LFE11:
 4409              		.align	2
 4411              	get_cal_point:
 4412              	.LFB12:
 390:../tp.c       **** 
 391:../tp.c       **** /*********************************************************************************************
 392:../tp.c       **** * name:     get_cal_point
 393:../tp.c       **** * func:     Muestra cruz, espera 12 toques y captura promedio con filtrado de extremos
 394:../tp.c       **** *********************************************************************************************/
 395:../tp.c       **** static void get_cal_point(int lcd_x, int lcd_y, int *ts_x, int *ts_y)
 396:../tp.c       **** {
 4413              		.loc 1 396 0
 4414              		.cfi_startproc
 4415              		@ Function supports interworking.
 4416              		@ args = 0, pretend = 0, frame = 136
 4417              		@ frame_needed = 1, uses_anonymous_args = 0
 4418 1154 0DC0A0E1 		mov	ip, sp
 4419              	.LCFI24:
 4420              		.cfi_def_cfa_register 12
 4421 1158 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 4422 115c 04B04CE2 		sub	fp, ip, #4
 4423              		.cfi_offset 14, -8
 4424              		.cfi_offset 13, -12
 4425              		.cfi_offset 11, -16
 4426              	.LCFI25:
 4427              		.cfi_def_cfa 11, 4
 4428 1160 88D04DE2 		sub	sp, sp, #136
 4429 1164 88000BE5 		str	r0, [fp, #-136]
 4430 1168 8C100BE5 		str	r1, [fp, #-140]
 4431 116c 90200BE5 		str	r2, [fp, #-144]
 4432 1170 94300BE5 		str	r3, [fp, #-148]
 397:../tp.c       ****     int i, j;
 398:../tp.c       ****     int samples_x[12], samples_y[12];
 399:../tp.c       ****     int sum_x = 0, sum_y = 0;
 4433              		.loc 1 399 0
 4434 1174 0030A0E3 		mov	r3, #0
 4435 1178 18300BE5 		str	r3, [fp, #-24]
 4436 117c 0030A0E3 		mov	r3, #0
 4437 1180 1C300BE5 		str	r3, [fp, #-28]
 400:../tp.c       ****     int temp;
 401:../tp.c       ****     
 402:../tp.c       ****     draw_cross(lcd_x, lcd_y);
 4438              		.loc 1 402 0
 4439 1184 88001BE5 		ldr	r0, [fp, #-136]
 4440 1188 8C101BE5 		ldr	r1, [fp, #-140]
 4441 118c E4FEFFEB 		bl	draw_cross
 403:../tp.c       ****     Lcd_Dma_Trans();
 4442              		.loc 1 403 0
 4443 1190 FEFFFFEB 		bl	Lcd_Dma_Trans
 404:../tp.c       ****     Delay(80);  // Delay más largo para permitir posicionamiento preciso
 4444              		.loc 1 404 0
 4445 1194 5000A0E3 		mov	r0, #80
 4446 1198 FEFFFFEB 		bl	Delay
 405:../tp.c       ****     
 406:../tp.c       ****     // Tomar 12 muestras
 407:../tp.c       ****     for (i = 0; i < 12; i++)
 4447              		.loc 1 407 0
 4448 119c 0030A0E3 		mov	r3, #0
 4449 11a0 10300BE5 		str	r3, [fp, #-16]
 4450 11a4 0F0000EA 		b	.L76
 4451              	.L77:
 408:../tp.c       ****     {
 409:../tp.c       ****         ts_read_raw(&samples_x[i], &samples_y[i]);
 4452              		.loc 1 409 0 discriminator 2
 4453 11a8 10301BE5 		ldr	r3, [fp, #-16]
 4454 11ac 0331A0E1 		mov	r3, r3, asl #2
 4455 11b0 50204BE2 		sub	r2, fp, #80
 4456 11b4 032082E0 		add	r2, r2, r3
 4457 11b8 10301BE5 		ldr	r3, [fp, #-16]
 4458 11bc 0331A0E1 		mov	r3, r3, asl #2
 4459 11c0 80104BE2 		sub	r1, fp, #128
 4460 11c4 033081E0 		add	r3, r1, r3
 4461 11c8 0200A0E1 		mov	r0, r2
 4462 11cc 0310A0E1 		mov	r1, r3
 4463 11d0 CBFFFFEB 		bl	ts_read_raw
 410:../tp.c       ****         Delay(25);  // Pausa entre muestras para mejor estabilización
 4464              		.loc 1 410 0 discriminator 2
 4465 11d4 1900A0E3 		mov	r0, #25
 4466 11d8 FEFFFFEB 		bl	Delay
 407:../tp.c       ****     for (i = 0; i < 12; i++)
 4467              		.loc 1 407 0 discriminator 2
 4468 11dc 10301BE5 		ldr	r3, [fp, #-16]
 4469 11e0 013083E2 		add	r3, r3, #1
 4470 11e4 10300BE5 		str	r3, [fp, #-16]
 4471              	.L76:
 407:../tp.c       ****     for (i = 0; i < 12; i++)
 4472              		.loc 1 407 0 is_stmt 0 discriminator 1
 4473 11e8 10301BE5 		ldr	r3, [fp, #-16]
 4474 11ec 0B0053E3 		cmp	r3, #11
 4475 11f0 ECFFFFDA 		ble	.L77
 411:../tp.c       ****     }
 412:../tp.c       ****     
 413:../tp.c       ****     // Ordenar muestras X (bubble sort)
 414:../tp.c       ****     for (i = 0; i < 11; i++) {
 4476              		.loc 1 414 0 is_stmt 1
 4477 11f4 0030A0E3 		mov	r3, #0
 4478 11f8 10300BE5 		str	r3, [fp, #-16]
 4479 11fc 3E0000EA 		b	.L78
 4480              	.L82:
 415:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4481              		.loc 1 415 0
 4482 1200 0030A0E3 		mov	r3, #0
 4483 1204 14300BE5 		str	r3, [fp, #-20]
 4484 1208 330000EA 		b	.L79
 4485              	.L81:
 416:../tp.c       ****             if (samples_x[j] > samples_x[j + 1]) {
 4486              		.loc 1 416 0
 4487 120c 14201BE5 		ldr	r2, [fp, #-20]
 4488 1210 4330E0E3 		mvn	r3, #67
 4489 1214 0221A0E1 		mov	r2, r2, asl #2
 4490 1218 0C004BE2 		sub	r0, fp, #12
 4491 121c 022080E0 		add	r2, r0, r2
 4492 1220 033082E0 		add	r3, r2, r3
 4493 1224 002093E5 		ldr	r2, [r3, #0]
 4494 1228 14301BE5 		ldr	r3, [fp, #-20]
 4495 122c 011083E2 		add	r1, r3, #1
 4496 1230 4330E0E3 		mvn	r3, #67
 4497 1234 0111A0E1 		mov	r1, r1, asl #2
 4498 1238 0C004BE2 		sub	r0, fp, #12
 4499 123c 011080E0 		add	r1, r0, r1
 4500 1240 033081E0 		add	r3, r1, r3
 4501 1244 003093E5 		ldr	r3, [r3, #0]
 4502 1248 030052E1 		cmp	r2, r3
 4503 124c 1F0000DA 		ble	.L80
 417:../tp.c       ****                 temp = samples_x[j];
 4504              		.loc 1 417 0
 4505 1250 14201BE5 		ldr	r2, [fp, #-20]
 4506 1254 4330E0E3 		mvn	r3, #67
 4507 1258 0221A0E1 		mov	r2, r2, asl #2
 4508 125c 0C104BE2 		sub	r1, fp, #12
 4509 1260 022081E0 		add	r2, r1, r2
 4510 1264 033082E0 		add	r3, r2, r3
 4511 1268 003093E5 		ldr	r3, [r3, #0]
 4512 126c 20300BE5 		str	r3, [fp, #-32]
 418:../tp.c       ****                 samples_x[j] = samples_x[j + 1];
 4513              		.loc 1 418 0
 4514 1270 14301BE5 		ldr	r3, [fp, #-20]
 4515 1274 012083E2 		add	r2, r3, #1
 4516 1278 4330E0E3 		mvn	r3, #67
 4517 127c 0221A0E1 		mov	r2, r2, asl #2
 4518 1280 0C004BE2 		sub	r0, fp, #12
 4519 1284 022080E0 		add	r2, r0, r2
 4520 1288 033082E0 		add	r3, r2, r3
 4521 128c 002093E5 		ldr	r2, [r3, #0]
 4522 1290 14101BE5 		ldr	r1, [fp, #-20]
 4523 1294 4330E0E3 		mvn	r3, #67
 4524 1298 0111A0E1 		mov	r1, r1, asl #2
 4525 129c 0C004BE2 		sub	r0, fp, #12
 4526 12a0 011080E0 		add	r1, r0, r1
 4527 12a4 033081E0 		add	r3, r1, r3
 4528 12a8 002083E5 		str	r2, [r3, #0]
 419:../tp.c       ****                 samples_x[j + 1] = temp;
 4529              		.loc 1 419 0
 4530 12ac 14301BE5 		ldr	r3, [fp, #-20]
 4531 12b0 012083E2 		add	r2, r3, #1
 4532 12b4 4330E0E3 		mvn	r3, #67
 4533 12b8 0221A0E1 		mov	r2, r2, asl #2
 4534 12bc 0C104BE2 		sub	r1, fp, #12
 4535 12c0 022081E0 		add	r2, r1, r2
 4536 12c4 033082E0 		add	r3, r2, r3
 4537 12c8 20201BE5 		ldr	r2, [fp, #-32]
 4538 12cc 002083E5 		str	r2, [r3, #0]
 4539              	.L80:
 415:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4540              		.loc 1 415 0
 4541 12d0 14301BE5 		ldr	r3, [fp, #-20]
 4542 12d4 013083E2 		add	r3, r3, #1
 4543 12d8 14300BE5 		str	r3, [fp, #-20]
 4544              	.L79:
 415:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4545              		.loc 1 415 0 is_stmt 0 discriminator 1
 4546 12dc 10301BE5 		ldr	r3, [fp, #-16]
 4547 12e0 0B2063E2 		rsb	r2, r3, #11
 4548 12e4 14301BE5 		ldr	r3, [fp, #-20]
 4549 12e8 030052E1 		cmp	r2, r3
 4550 12ec C6FFFFCA 		bgt	.L81
 414:../tp.c       ****     for (i = 0; i < 11; i++) {
 4551              		.loc 1 414 0 is_stmt 1
 4552 12f0 10301BE5 		ldr	r3, [fp, #-16]
 4553 12f4 013083E2 		add	r3, r3, #1
 4554 12f8 10300BE5 		str	r3, [fp, #-16]
 4555              	.L78:
 414:../tp.c       ****     for (i = 0; i < 11; i++) {
 4556              		.loc 1 414 0 is_stmt 0 discriminator 1
 4557 12fc 10301BE5 		ldr	r3, [fp, #-16]
 4558 1300 0A0053E3 		cmp	r3, #10
 4559 1304 BDFFFFDA 		ble	.L82
 420:../tp.c       ****             }
 421:../tp.c       ****         }
 422:../tp.c       ****     }
 423:../tp.c       ****     
 424:../tp.c       ****     // Ordenar muestras Y
 425:../tp.c       ****     for (i = 0; i < 11; i++) {
 4560              		.loc 1 425 0 is_stmt 1
 4561 1308 0030A0E3 		mov	r3, #0
 4562 130c 10300BE5 		str	r3, [fp, #-16]
 4563 1310 3E0000EA 		b	.L83
 4564              	.L87:
 426:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4565              		.loc 1 426 0
 4566 1314 0030A0E3 		mov	r3, #0
 4567 1318 14300BE5 		str	r3, [fp, #-20]
 4568 131c 330000EA 		b	.L84
 4569              	.L86:
 427:../tp.c       ****             if (samples_y[j] > samples_y[j + 1]) {
 4570              		.loc 1 427 0
 4571 1320 14201BE5 		ldr	r2, [fp, #-20]
 4572 1324 7330E0E3 		mvn	r3, #115
 4573 1328 0221A0E1 		mov	r2, r2, asl #2
 4574 132c 0C004BE2 		sub	r0, fp, #12
 4575 1330 022080E0 		add	r2, r0, r2
 4576 1334 033082E0 		add	r3, r2, r3
 4577 1338 002093E5 		ldr	r2, [r3, #0]
 4578 133c 14301BE5 		ldr	r3, [fp, #-20]
 4579 1340 011083E2 		add	r1, r3, #1
 4580 1344 7330E0E3 		mvn	r3, #115
 4581 1348 0111A0E1 		mov	r1, r1, asl #2
 4582 134c 0C004BE2 		sub	r0, fp, #12
 4583 1350 011080E0 		add	r1, r0, r1
 4584 1354 033081E0 		add	r3, r1, r3
 4585 1358 003093E5 		ldr	r3, [r3, #0]
 4586 135c 030052E1 		cmp	r2, r3
 4587 1360 1F0000DA 		ble	.L85
 428:../tp.c       ****                 temp = samples_y[j];
 4588              		.loc 1 428 0
 4589 1364 14201BE5 		ldr	r2, [fp, #-20]
 4590 1368 7330E0E3 		mvn	r3, #115
 4591 136c 0221A0E1 		mov	r2, r2, asl #2
 4592 1370 0C104BE2 		sub	r1, fp, #12
 4593 1374 022081E0 		add	r2, r1, r2
 4594 1378 033082E0 		add	r3, r2, r3
 4595 137c 003093E5 		ldr	r3, [r3, #0]
 4596 1380 20300BE5 		str	r3, [fp, #-32]
 429:../tp.c       ****                 samples_y[j] = samples_y[j + 1];
 4597              		.loc 1 429 0
 4598 1384 14301BE5 		ldr	r3, [fp, #-20]
 4599 1388 012083E2 		add	r2, r3, #1
 4600 138c 7330E0E3 		mvn	r3, #115
 4601 1390 0221A0E1 		mov	r2, r2, asl #2
 4602 1394 0C004BE2 		sub	r0, fp, #12
 4603 1398 022080E0 		add	r2, r0, r2
 4604 139c 033082E0 		add	r3, r2, r3
 4605 13a0 002093E5 		ldr	r2, [r3, #0]
 4606 13a4 14101BE5 		ldr	r1, [fp, #-20]
 4607 13a8 7330E0E3 		mvn	r3, #115
 4608 13ac 0111A0E1 		mov	r1, r1, asl #2
 4609 13b0 0C004BE2 		sub	r0, fp, #12
 4610 13b4 011080E0 		add	r1, r0, r1
 4611 13b8 033081E0 		add	r3, r1, r3
 4612 13bc 002083E5 		str	r2, [r3, #0]
 430:../tp.c       ****                 samples_y[j + 1] = temp;
 4613              		.loc 1 430 0
 4614 13c0 14301BE5 		ldr	r3, [fp, #-20]
 4615 13c4 012083E2 		add	r2, r3, #1
 4616 13c8 7330E0E3 		mvn	r3, #115
 4617 13cc 0221A0E1 		mov	r2, r2, asl #2
 4618 13d0 0C104BE2 		sub	r1, fp, #12
 4619 13d4 022081E0 		add	r2, r1, r2
 4620 13d8 033082E0 		add	r3, r2, r3
 4621 13dc 20201BE5 		ldr	r2, [fp, #-32]
 4622 13e0 002083E5 		str	r2, [r3, #0]
 4623              	.L85:
 426:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4624              		.loc 1 426 0
 4625 13e4 14301BE5 		ldr	r3, [fp, #-20]
 4626 13e8 013083E2 		add	r3, r3, #1
 4627 13ec 14300BE5 		str	r3, [fp, #-20]
 4628              	.L84:
 426:../tp.c       ****         for (j = 0; j < 11 - i; j++) {
 4629              		.loc 1 426 0 is_stmt 0 discriminator 1
 4630 13f0 10301BE5 		ldr	r3, [fp, #-16]
 4631 13f4 0B2063E2 		rsb	r2, r3, #11
 4632 13f8 14301BE5 		ldr	r3, [fp, #-20]
 4633 13fc 030052E1 		cmp	r2, r3
 4634 1400 C6FFFFCA 		bgt	.L86
 425:../tp.c       ****     for (i = 0; i < 11; i++) {
 4635              		.loc 1 425 0 is_stmt 1
 4636 1404 10301BE5 		ldr	r3, [fp, #-16]
 4637 1408 013083E2 		add	r3, r3, #1
 4638 140c 10300BE5 		str	r3, [fp, #-16]
 4639              	.L83:
 425:../tp.c       ****     for (i = 0; i < 11; i++) {
 4640              		.loc 1 425 0 is_stmt 0 discriminator 1
 4641 1410 10301BE5 		ldr	r3, [fp, #-16]
 4642 1414 0A0053E3 		cmp	r3, #10
 4643 1418 BDFFFFDA 		ble	.L87
 431:../tp.c       ****             }
 432:../tp.c       ****         }
 433:../tp.c       ****     }
 434:../tp.c       ****     
 435:../tp.c       ****     // Promediar las 8 muestras centrales (descartando 2 mínimas y 2 máximas)
 436:../tp.c       ****     for (i = 2; i < 10; i++) {
 4644              		.loc 1 436 0 is_stmt 1
 4645 141c 0230A0E3 		mov	r3, #2
 4646 1420 10300BE5 		str	r3, [fp, #-16]
 4647 1424 160000EA 		b	.L88
 4648              	.L89:
 437:../tp.c       ****         sum_x += samples_x[i];
 4649              		.loc 1 437 0 discriminator 2
 4650 1428 10201BE5 		ldr	r2, [fp, #-16]
 4651 142c 4330E0E3 		mvn	r3, #67
 4652 1430 0221A0E1 		mov	r2, r2, asl #2
 4653 1434 0C004BE2 		sub	r0, fp, #12
 4654 1438 022080E0 		add	r2, r0, r2
 4655 143c 033082E0 		add	r3, r2, r3
 4656 1440 003093E5 		ldr	r3, [r3, #0]
 4657 1444 18201BE5 		ldr	r2, [fp, #-24]
 4658 1448 033082E0 		add	r3, r2, r3
 4659 144c 18300BE5 		str	r3, [fp, #-24]
 438:../tp.c       ****         sum_y += samples_y[i];
 4660              		.loc 1 438 0 discriminator 2
 4661 1450 10201BE5 		ldr	r2, [fp, #-16]
 4662 1454 7330E0E3 		mvn	r3, #115
 4663 1458 0221A0E1 		mov	r2, r2, asl #2
 4664 145c 0C104BE2 		sub	r1, fp, #12
 4665 1460 022081E0 		add	r2, r1, r2
 4666 1464 033082E0 		add	r3, r2, r3
 4667 1468 003093E5 		ldr	r3, [r3, #0]
 4668 146c 1C201BE5 		ldr	r2, [fp, #-28]
 4669 1470 033082E0 		add	r3, r2, r3
 4670 1474 1C300BE5 		str	r3, [fp, #-28]
 436:../tp.c       ****     for (i = 2; i < 10; i++) {
 4671              		.loc 1 436 0 discriminator 2
 4672 1478 10301BE5 		ldr	r3, [fp, #-16]
 4673 147c 013083E2 		add	r3, r3, #1
 4674 1480 10300BE5 		str	r3, [fp, #-16]
 4675              	.L88:
 436:../tp.c       ****     for (i = 2; i < 10; i++) {
 4676              		.loc 1 436 0 is_stmt 0 discriminator 1
 4677 1484 10301BE5 		ldr	r3, [fp, #-16]
 4678 1488 090053E3 		cmp	r3, #9
 4679 148c E5FFFFDA 		ble	.L89
 439:../tp.c       ****     }
 440:../tp.c       ****     
 441:../tp.c       ****     *ts_x = sum_x / 8;
 4680              		.loc 1 441 0 is_stmt 1
 4681 1490 18301BE5 		ldr	r3, [fp, #-24]
 4682 1494 072083E2 		add	r2, r3, #7
 4683 1498 000053E3 		cmp	r3, #0
 4684 149c 0230A0B1 		movlt	r3, r2
 4685 14a0 C331A0E1 		mov	r3, r3, asr #3
 4686 14a4 0320A0E1 		mov	r2, r3
 4687 14a8 90301BE5 		ldr	r3, [fp, #-144]
 4688 14ac 002083E5 		str	r2, [r3, #0]
 442:../tp.c       ****     *ts_y = sum_y / 8;
 4689              		.loc 1 442 0
 4690 14b0 1C301BE5 		ldr	r3, [fp, #-28]
 4691 14b4 072083E2 		add	r2, r3, #7
 4692 14b8 000053E3 		cmp	r3, #0
 4693 14bc 0230A0B1 		movlt	r3, r2
 4694 14c0 C331A0E1 		mov	r3, r3, asr #3
 4695 14c4 0320A0E1 		mov	r2, r3
 4696 14c8 94301BE5 		ldr	r3, [fp, #-148]
 4697 14cc 002083E5 		str	r2, [r3, #0]
 443:../tp.c       ****     
 444:../tp.c       ****     Delay(50);
 4698              		.loc 1 444 0
 4699 14d0 3200A0E3 		mov	r0, #50
 4700 14d4 FEFFFFEB 		bl	Delay
 445:../tp.c       ****     draw_cross(lcd_x, lcd_y);
 4701              		.loc 1 445 0
 4702 14d8 88001BE5 		ldr	r0, [fp, #-136]
 4703 14dc 8C101BE5 		ldr	r1, [fp, #-140]
 4704 14e0 0FFEFFEB 		bl	draw_cross
 446:../tp.c       ****     Lcd_Dma_Trans();
 4705              		.loc 1 446 0
 4706 14e4 FEFFFFEB 		bl	Lcd_Dma_Trans
 447:../tp.c       **** }
 4707              		.loc 1 447 0
 4708 14e8 0CD04BE2 		sub	sp, fp, #12
 4709 14ec 00689DE8 		ldmfd	sp, {fp, sp, lr}
 4710 14f0 1EFF2FE1 		bx	lr
 4711              		.cfi_endproc
 4712              	.LFE12:
 4714              		.section	.rodata
 4715 003e 0000     		.align	2
 4716              	.LC16:
 4717 0040 43616C69 		.ascii	"Calibracion 5pts\000"
 4717      62726163 
 4717      696F6E20 
 4717      35707473 
 4717      00
 4718 0051 000000   		.align	2
 4719              	.LC17:
 4720 0054 546F6361 		.ascii	"Toca punto A\000"
 4720      2070756E 
 4720      746F2041 
 4720      00
 4721 0061 000000   		.align	2
 4722              	.LC18:
 4723 0064 546F6361 		.ascii	"Toca punto B\000"
 4723      2070756E 
 4723      746F2042 
 4723      00
 4724 0071 000000   		.align	2
 4725              	.LC19:
 4726 0074 546F6361 		.ascii	"Toca punto C\000"
 4726      2070756E 
 4726      746F2043 
 4726      00
 4727 0081 000000   		.align	2
 4728              	.LC20:
 4729 0084 546F6361 		.ascii	"Toca punto D\000"
 4729      2070756E 
 4729      746F2044 
 4729      00
 4730 0091 000000   		.align	2
 4731              	.LC21:
 4732 0094 546F6361 		.ascii	"Toca centro E\000"
 4732      2063656E 
 4732      74726F20 
 4732      4500
 4733              		.global	__aeabi_ldivmod
 4734 00a2 0000     		.align	2
 4735              	.LC22:
 4736 00a4 3D3D3D20 		.ascii	"=== CALIBRACION OK ===\000"
 4736      43414C49 
 4736      42524143 
 4736      494F4E20 
 4736      4F4B203D 
 4737 00bb 00       		.align	2
 4738              	.LC23:
 4739 00bc 53776170 		.ascii	"Swap XY: SI\000"
 4739      2058593A 
 4739      20534900 
 4740              		.align	2
 4741              	.LC24:
 4742 00c8 53776170 		.ascii	"Swap XY: NO\000"
 4742      2058593A 
 4742      204E4F00 
 4743              		.align	2
 4744              	.LC25:
 4745 00d4 50756E74 		.ascii	"Puntos capturados OK\000"
 4745      6F732063 
 4745      61707475 
 4745      7261646F 
 4745      73204F4B 
 4746 00e9 000000   		.align	2
 4747              	.LC26:
 4748 00ec 46616374 		.ascii	"Factores calculados\000"
 4748      6F726573 
 4748      2063616C 
 4748      63756C61 
 4748      646F7300 
 4749              		.align	2
 4750              	.LC27:
 4751 0100 6B783A20 		.ascii	"kx: POSITIVO\000"
 4751      504F5349 
 4751      5449564F 
 4751      00
 4752 010d 000000   		.align	2
 4753              	.LC28:
 4754 0110 6B783A20 		.ascii	"kx: NEGATIVO\000"
 4754      4E454741 
 4754      5449564F 
 4754      00
 4755 011d 000000   		.align	2
 4756              	.LC29:
 4757 0120 6B793A20 		.ascii	"ky: POSITIVO\000"
 4757      504F5349 
 4757      5449564F 
 4757      00
 4758 012d 000000   		.align	2
 4759              	.LC30:
 4760 0130 6B793A20 		.ascii	"ky: NEGATIVO\000"
 4760      4E454741 
 4760      5449564F 
 4760      00
 4761 013d 000000   		.align	2
 4762              	.LC31:
 4763 0140 5B546F63 		.ascii	"[Toca para continuar]\000"
 4763      61207061 
 4763      72612063 
 4763      6F6E7469 
 4763      6E756172 
 4764              		.text
 4765              		.align	2
 4766              		.global	ts_calibrate_5pt
 4768              	ts_calibrate_5pt:
 4769              	.LFB13:
 448:../tp.c       **** 
 449:../tp.c       **** /*********************************************************************************************
 450:../tp.c       **** * name:     ts_calibrate_5pt
 451:../tp.c       **** * func:     Calibración de 5 puntos del touchscreen
 452:../tp.c       **** * para:     XRES - resolución horizontal, YRES - vertical, M - margen
 453:../tp.c       **** * comment:  Implementa método con detección swap XY y escalas con signo (fixed-point 16.16)
 454:../tp.c       **** *********************************************************************************************/
 455:../tp.c       **** void ts_calibrate_5pt(int XRES, int YRES, int M)
 456:../tp.c       **** {
 4770              		.loc 1 456 0
 4771              		.cfi_startproc
 4772              		@ Function supports interworking.
 4773              		@ args = 0, pretend = 0, frame = 144
 4774              		@ frame_needed = 1, uses_anonymous_args = 0
 4775 14f4 0DC0A0E1 		mov	ip, sp
 4776              	.LCFI26:
 4777              		.cfi_def_cfa_register 12
 4778 14f8 10D82DE9 		stmfd	sp!, {r4, fp, ip, lr, pc}
 4779 14fc 04B04CE2 		sub	fp, ip, #4
 4780              		.cfi_offset 14, -8
 4781              		.cfi_offset 13, -12
 4782              		.cfi_offset 11, -16
 4783              		.cfi_offset 4, -20
 4784              	.LCFI27:
 4785              		.cfi_def_cfa 11, 4
 4786 1500 94D04DE2 		sub	sp, sp, #148
 4787 1504 98000BE5 		str	r0, [fp, #-152]
 4788 1508 9C100BE5 		str	r1, [fp, #-156]
 4789 150c A0200BE5 		str	r2, [fp, #-160]
 457:../tp.c       ****     int A_lcd_x, A_lcd_y, A_ts_x, A_ts_y;
 458:../tp.c       ****     int B_lcd_x, B_lcd_y, B_ts_x, B_ts_y;
 459:../tp.c       ****     int C_lcd_x, C_lcd_y, C_ts_x, C_ts_y;
 460:../tp.c       ****     int D_lcd_x, D_lcd_y, D_ts_x, D_ts_y;
 461:../tp.c       ****     int E_lcd_x, E_lcd_y, E_ts_x, E_ts_y;
 462:../tp.c       ****     
 463:../tp.c       ****     int dx, dy;
 464:../tp.c       ****     int lcd_s, lcd_d;
 465:../tp.c       ****     int ts_s1, ts_s2, ts_d1, ts_d2;
 466:../tp.c       ****     long long temp;
 467:../tp.c       ****     
 468:../tp.c       ****     Lcd_Clr();
 4790              		.loc 1 468 0
 4791 1510 FEFFFFEB 		bl	Lcd_Clr
 469:../tp.c       ****     Lcd_Active_Clr();
 4792              		.loc 1 469 0
 4793 1514 FEFFFFEB 		bl	Lcd_Active_Clr
 470:../tp.c       ****     Lcd_DspAscII8x16(60, 110, BLACK, (unsigned char *)"Calibracion 5pts");
 4794              		.loc 1 470 0
 4795 1518 3C00A0E3 		mov	r0, #60
 4796 151c 6E10A0E3 		mov	r1, #110
 4797 1520 0F20A0E3 		mov	r2, #15
 4798 1524 88359FE5 		ldr	r3, .L101
 4799 1528 FEFFFFEB 		bl	Lcd_DspAscII8x16
 471:../tp.c       ****     Lcd_Dma_Trans();
 4800              		.loc 1 471 0
 4801 152c FEFFFFEB 		bl	Lcd_Dma_Trans
 472:../tp.c       ****     Delay(100);
 4802              		.loc 1 472 0
 4803 1530 6400A0E3 		mov	r0, #100
 4804 1534 FEFFFFEB 		bl	Delay
 473:../tp.c       ****     
 474:../tp.c       ****     Lcd_Clr();
 4805              		.loc 1 474 0
 4806 1538 FEFFFFEB 		bl	Lcd_Clr
 475:../tp.c       ****     Lcd_Dma_Trans();
 4807              		.loc 1 475 0
 4808 153c FEFFFFEB 		bl	Lcd_Dma_Trans
 476:../tp.c       ****     
 477:../tp.c       ****     // Definir posiciones LCD de los 5 puntos
 478:../tp.c       ****     A_lcd_x = M;            A_lcd_y = M;
 4809              		.loc 1 478 0
 4810 1540 A0301BE5 		ldr	r3, [fp, #-160]
 4811 1544 20300BE5 		str	r3, [fp, #-32]
 4812 1548 A0301BE5 		ldr	r3, [fp, #-160]
 4813 154c 24300BE5 		str	r3, [fp, #-36]
 479:../tp.c       ****     B_lcd_x = XRES - M;     B_lcd_y = M;
 4814              		.loc 1 479 0
 4815 1550 98201BE5 		ldr	r2, [fp, #-152]
 4816 1554 A0301BE5 		ldr	r3, [fp, #-160]
 4817 1558 023063E0 		rsb	r3, r3, r2
 4818 155c 28300BE5 		str	r3, [fp, #-40]
 4819 1560 A0301BE5 		ldr	r3, [fp, #-160]
 4820 1564 2C300BE5 		str	r3, [fp, #-44]
 480:../tp.c       ****     C_lcd_x = XRES - M;     C_lcd_y = YRES - M;
 4821              		.loc 1 480 0
 4822 1568 98201BE5 		ldr	r2, [fp, #-152]
 4823 156c A0301BE5 		ldr	r3, [fp, #-160]
 4824 1570 023063E0 		rsb	r3, r3, r2
 4825 1574 30300BE5 		str	r3, [fp, #-48]
 4826 1578 9C201BE5 		ldr	r2, [fp, #-156]
 4827 157c A0301BE5 		ldr	r3, [fp, #-160]
 4828 1580 023063E0 		rsb	r3, r3, r2
 4829 1584 34300BE5 		str	r3, [fp, #-52]
 481:../tp.c       ****     D_lcd_x = M;            D_lcd_y = YRES - M;
 4830              		.loc 1 481 0
 4831 1588 A0301BE5 		ldr	r3, [fp, #-160]
 4832 158c 38300BE5 		str	r3, [fp, #-56]
 4833 1590 9C201BE5 		ldr	r2, [fp, #-156]
 4834 1594 A0301BE5 		ldr	r3, [fp, #-160]
 4835 1598 023063E0 		rsb	r3, r3, r2
 4836 159c 3C300BE5 		str	r3, [fp, #-60]
 482:../tp.c       ****     E_lcd_x = XRES / 2;     E_lcd_y = YRES / 2;
 4837              		.loc 1 482 0
 4838 15a0 98301BE5 		ldr	r3, [fp, #-152]
 4839 15a4 A32FA0E1 		mov	r2, r3, lsr #31
 4840 15a8 033082E0 		add	r3, r2, r3
 4841 15ac C330A0E1 		mov	r3, r3, asr #1
 4842 15b0 40300BE5 		str	r3, [fp, #-64]
 4843 15b4 9C301BE5 		ldr	r3, [fp, #-156]
 4844 15b8 A32FA0E1 		mov	r2, r3, lsr #31
 4845 15bc 033082E0 		add	r3, r2, r3
 4846 15c0 C330A0E1 		mov	r3, r3, asr #1
 4847 15c4 44300BE5 		str	r3, [fp, #-68]
 483:../tp.c       ****     
 484:../tp.c       ****     // Capturar punto A
 485:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto A");
 4848              		.loc 1 485 0
 4849 15c8 0A00A0E3 		mov	r0, #10
 4850 15cc 0A10A0E3 		mov	r1, #10
 4851 15d0 0F20A0E3 		mov	r2, #15
 4852 15d4 DC349FE5 		ldr	r3, .L101+4
 4853 15d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 486:../tp.c       ****     Lcd_Dma_Trans();
 4854              		.loc 1 486 0
 4855 15dc FEFFFFEB 		bl	Lcd_Dma_Trans
 487:../tp.c       ****     get_cal_point(A_lcd_x, A_lcd_y, &A_ts_x, &A_ts_y);
 4856              		.loc 1 487 0
 4857 15e0 70204BE2 		sub	r2, fp, #112
 4858 15e4 74304BE2 		sub	r3, fp, #116
 4859 15e8 20001BE5 		ldr	r0, [fp, #-32]
 4860 15ec 24101BE5 		ldr	r1, [fp, #-36]
 4861 15f0 D7FEFFEB 		bl	get_cal_point
 488:../tp.c       ****     
 489:../tp.c       ****     // Capturar punto B
 490:../tp.c       ****     Lcd_Clr();
 4862              		.loc 1 490 0
 4863 15f4 FEFFFFEB 		bl	Lcd_Clr
 491:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto B");
 4864              		.loc 1 491 0
 4865 15f8 0A00A0E3 		mov	r0, #10
 4866 15fc 0A10A0E3 		mov	r1, #10
 4867 1600 0F20A0E3 		mov	r2, #15
 4868 1604 B0349FE5 		ldr	r3, .L101+8
 4869 1608 FEFFFFEB 		bl	Lcd_DspAscII6x8
 492:../tp.c       ****     Lcd_Dma_Trans();
 4870              		.loc 1 492 0
 4871 160c FEFFFFEB 		bl	Lcd_Dma_Trans
 493:../tp.c       ****     get_cal_point(B_lcd_x, B_lcd_y, &B_ts_x, &B_ts_y);
 4872              		.loc 1 493 0
 4873 1610 78204BE2 		sub	r2, fp, #120
 4874 1614 7C304BE2 		sub	r3, fp, #124
 4875 1618 28001BE5 		ldr	r0, [fp, #-40]
 4876 161c 2C101BE5 		ldr	r1, [fp, #-44]
 4877 1620 CBFEFFEB 		bl	get_cal_point
 494:../tp.c       ****     
 495:../tp.c       ****     // Capturar punto C
 496:../tp.c       ****     Lcd_Clr();
 4878              		.loc 1 496 0
 4879 1624 FEFFFFEB 		bl	Lcd_Clr
 497:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto C");
 4880              		.loc 1 497 0
 4881 1628 0A00A0E3 		mov	r0, #10
 4882 162c 0A10A0E3 		mov	r1, #10
 4883 1630 0F20A0E3 		mov	r2, #15
 4884 1634 84349FE5 		ldr	r3, .L101+12
 4885 1638 FEFFFFEB 		bl	Lcd_DspAscII6x8
 498:../tp.c       ****     Lcd_Dma_Trans();
 4886              		.loc 1 498 0
 4887 163c FEFFFFEB 		bl	Lcd_Dma_Trans
 499:../tp.c       ****     get_cal_point(C_lcd_x, C_lcd_y, &C_ts_x, &C_ts_y);
 4888              		.loc 1 499 0
 4889 1640 80204BE2 		sub	r2, fp, #128
 4890 1644 84304BE2 		sub	r3, fp, #132
 4891 1648 30001BE5 		ldr	r0, [fp, #-48]
 4892 164c 34101BE5 		ldr	r1, [fp, #-52]
 4893 1650 BFFEFFEB 		bl	get_cal_point
 500:../tp.c       ****     
 501:../tp.c       ****     // Capturar punto D
 502:../tp.c       ****     Lcd_Clr();
 4894              		.loc 1 502 0
 4895 1654 FEFFFFEB 		bl	Lcd_Clr
 503:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca punto D");
 4896              		.loc 1 503 0
 4897 1658 0A00A0E3 		mov	r0, #10
 4898 165c 0A10A0E3 		mov	r1, #10
 4899 1660 0F20A0E3 		mov	r2, #15
 4900 1664 58349FE5 		ldr	r3, .L101+16
 4901 1668 FEFFFFEB 		bl	Lcd_DspAscII6x8
 504:../tp.c       ****     Lcd_Dma_Trans();
 4902              		.loc 1 504 0
 4903 166c FEFFFFEB 		bl	Lcd_Dma_Trans
 505:../tp.c       ****     get_cal_point(D_lcd_x, D_lcd_y, &D_ts_x, &D_ts_y);
 4904              		.loc 1 505 0
 4905 1670 88204BE2 		sub	r2, fp, #136
 4906 1674 8C304BE2 		sub	r3, fp, #140
 4907 1678 38001BE5 		ldr	r0, [fp, #-56]
 4908 167c 3C101BE5 		ldr	r1, [fp, #-60]
 4909 1680 B3FEFFEB 		bl	get_cal_point
 506:../tp.c       ****     
 507:../tp.c       ****     // Capturar punto E (centro)
 508:../tp.c       ****     Lcd_Clr();
 4910              		.loc 1 508 0
 4911 1684 FEFFFFEB 		bl	Lcd_Clr
 509:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"Toca centro E");
 4912              		.loc 1 509 0
 4913 1688 0A00A0E3 		mov	r0, #10
 4914 168c 0A10A0E3 		mov	r1, #10
 4915 1690 0F20A0E3 		mov	r2, #15
 4916 1694 2C349FE5 		ldr	r3, .L101+20
 4917 1698 FEFFFFEB 		bl	Lcd_DspAscII6x8
 510:../tp.c       ****     Lcd_Dma_Trans();
 4918              		.loc 1 510 0
 4919 169c FEFFFFEB 		bl	Lcd_Dma_Trans
 511:../tp.c       ****     get_cal_point(E_lcd_x, E_lcd_y, &E_ts_x, &E_ts_y);
 4920              		.loc 1 511 0
 4921 16a0 90204BE2 		sub	r2, fp, #144
 4922 16a4 94304BE2 		sub	r3, fp, #148
 4923 16a8 40001BE5 		ldr	r0, [fp, #-64]
 4924 16ac 44101BE5 		ldr	r1, [fp, #-68]
 4925 16b0 A7FEFFEB 		bl	get_cal_point
 512:../tp.c       ****     
 513:../tp.c       ****     // DETECCIÓN DE SWAP XY
 514:../tp.c       ****     dx = B_ts_x - A_ts_x;
 4926              		.loc 1 514 0
 4927 16b4 78201BE5 		ldr	r2, [fp, #-120]
 4928 16b8 70301BE5 		ldr	r3, [fp, #-112]
 4929 16bc 023063E0 		rsb	r3, r3, r2
 4930 16c0 18300BE5 		str	r3, [fp, #-24]
 515:../tp.c       ****     dy = B_ts_y - A_ts_y;
 4931              		.loc 1 515 0
 4932 16c4 7C201BE5 		ldr	r2, [fp, #-124]
 4933 16c8 74301BE5 		ldr	r3, [fp, #-116]
 4934 16cc 023063E0 		rsb	r3, r3, r2
 4935 16d0 1C300BE5 		str	r3, [fp, #-28]
 516:../tp.c       ****     if (dx < 0) dx = -dx;
 4936              		.loc 1 516 0
 4937 16d4 18301BE5 		ldr	r3, [fp, #-24]
 4938 16d8 000053E3 		cmp	r3, #0
 4939 16dc 020000AA 		bge	.L91
 4940              		.loc 1 516 0 is_stmt 0 discriminator 1
 4941 16e0 18301BE5 		ldr	r3, [fp, #-24]
 4942 16e4 003063E2 		rsb	r3, r3, #0
 4943 16e8 18300BE5 		str	r3, [fp, #-24]
 4944              	.L91:
 517:../tp.c       ****     if (dy < 0) dy = -dy;
 4945              		.loc 1 517 0 is_stmt 1
 4946 16ec 1C301BE5 		ldr	r3, [fp, #-28]
 4947 16f0 000053E3 		cmp	r3, #0
 4948 16f4 020000AA 		bge	.L92
 4949              		.loc 1 517 0 is_stmt 0 discriminator 1
 4950 16f8 1C301BE5 		ldr	r3, [fp, #-28]
 4951 16fc 003063E2 		rsb	r3, r3, #0
 4952 1700 1C300BE5 		str	r3, [fp, #-28]
 4953              	.L92:
 518:../tp.c       ****     
 519:../tp.c       ****     if (dx > dy)
 4954              		.loc 1 519 0 is_stmt 1
 4955 1704 18201BE5 		ldr	r2, [fp, #-24]
 4956 1708 1C301BE5 		ldr	r3, [fp, #-28]
 4957 170c 030052E1 		cmp	r2, r3
 4958 1710 030000DA 		ble	.L93
 520:../tp.c       ****     {
 521:../tp.c       ****         g_swap_xy = 0;
 4959              		.loc 1 521 0
 4960 1714 B0339FE5 		ldr	r3, .L101+24
 4961 1718 0020A0E3 		mov	r2, #0
 4962 171c 002083E5 		str	r2, [r3, #0]
 4963 1720 200000EA 		b	.L94
 4964              	.L93:
 4965              	.LBB2:
 522:../tp.c       ****     }
 523:../tp.c       ****     else
 524:../tp.c       ****     {
 525:../tp.c       ****         g_swap_xy = 1;
 4966              		.loc 1 525 0
 4967 1724 A0339FE5 		ldr	r3, .L101+24
 4968 1728 0120A0E3 		mov	r2, #1
 4969 172c 002083E5 		str	r2, [r3, #0]
 526:../tp.c       ****         int tmp;
 527:../tp.c       ****         #define SWAP(a, b) { tmp = a; a = b; b = tmp; }
 528:../tp.c       ****         SWAP(A_ts_x, A_ts_y);
 4970              		.loc 1 528 0
 4971 1730 70301BE5 		ldr	r3, [fp, #-112]
 4972 1734 48300BE5 		str	r3, [fp, #-72]
 4973 1738 74301BE5 		ldr	r3, [fp, #-116]
 4974 173c 70300BE5 		str	r3, [fp, #-112]
 4975 1740 48301BE5 		ldr	r3, [fp, #-72]
 4976 1744 74300BE5 		str	r3, [fp, #-116]
 529:../tp.c       ****         SWAP(B_ts_x, B_ts_y);
 4977              		.loc 1 529 0
 4978 1748 78301BE5 		ldr	r3, [fp, #-120]
 4979 174c 48300BE5 		str	r3, [fp, #-72]
 4980 1750 7C301BE5 		ldr	r3, [fp, #-124]
 4981 1754 78300BE5 		str	r3, [fp, #-120]
 4982 1758 48301BE5 		ldr	r3, [fp, #-72]
 4983 175c 7C300BE5 		str	r3, [fp, #-124]
 530:../tp.c       ****         SWAP(C_ts_x, C_ts_y);
 4984              		.loc 1 530 0
 4985 1760 80301BE5 		ldr	r3, [fp, #-128]
 4986 1764 48300BE5 		str	r3, [fp, #-72]
 4987 1768 84301BE5 		ldr	r3, [fp, #-132]
 4988 176c 80300BE5 		str	r3, [fp, #-128]
 4989 1770 48301BE5 		ldr	r3, [fp, #-72]
 4990 1774 84300BE5 		str	r3, [fp, #-132]
 531:../tp.c       ****         SWAP(D_ts_x, D_ts_y);
 4991              		.loc 1 531 0
 4992 1778 88301BE5 		ldr	r3, [fp, #-136]
 4993 177c 48300BE5 		str	r3, [fp, #-72]
 4994 1780 8C301BE5 		ldr	r3, [fp, #-140]
 4995 1784 88300BE5 		str	r3, [fp, #-136]
 4996 1788 48301BE5 		ldr	r3, [fp, #-72]
 4997 178c 8C300BE5 		str	r3, [fp, #-140]
 532:../tp.c       ****         SWAP(E_ts_x, E_ts_y);
 4998              		.loc 1 532 0
 4999 1790 90301BE5 		ldr	r3, [fp, #-144]
 5000 1794 48300BE5 		str	r3, [fp, #-72]
 5001 1798 94301BE5 		ldr	r3, [fp, #-148]
 5002 179c 90300BE5 		str	r3, [fp, #-144]
 5003 17a0 48301BE5 		ldr	r3, [fp, #-72]
 5004 17a4 94300BE5 		str	r3, [fp, #-148]
 5005              	.L94:
 5006              	.LBE2:
 533:../tp.c       ****     }
 534:../tp.c       ****     
 535:../tp.c       ****     // CÁLCULO DEL CENTRO - usar promedio de los 4 puntos para mayor precisión
 536:../tp.c       ****     g_ts_xc = (A_ts_x + B_ts_x + C_ts_x + D_ts_x) / 4;
 5007              		.loc 1 536 0
 5008 17a8 70201BE5 		ldr	r2, [fp, #-112]
 5009 17ac 78301BE5 		ldr	r3, [fp, #-120]
 5010 17b0 032082E0 		add	r2, r2, r3
 5011 17b4 80301BE5 		ldr	r3, [fp, #-128]
 5012 17b8 032082E0 		add	r2, r2, r3
 5013 17bc 88301BE5 		ldr	r3, [fp, #-136]
 5014 17c0 033082E0 		add	r3, r2, r3
 5015 17c4 032083E2 		add	r2, r3, #3
 5016 17c8 000053E3 		cmp	r3, #0
 5017 17cc 0230A0B1 		movlt	r3, r2
 5018 17d0 4331A0E1 		mov	r3, r3, asr #2
 5019 17d4 0320A0E1 		mov	r2, r3
 5020 17d8 F0329FE5 		ldr	r3, .L101+28
 5021 17dc 002083E5 		str	r2, [r3, #0]
 537:../tp.c       ****     g_ts_yc = (A_ts_y + B_ts_y + C_ts_y + D_ts_y) / 4;
 5022              		.loc 1 537 0
 5023 17e0 74201BE5 		ldr	r2, [fp, #-116]
 5024 17e4 7C301BE5 		ldr	r3, [fp, #-124]
 5025 17e8 032082E0 		add	r2, r2, r3
 5026 17ec 84301BE5 		ldr	r3, [fp, #-132]
 5027 17f0 032082E0 		add	r2, r2, r3
 5028 17f4 8C301BE5 		ldr	r3, [fp, #-140]
 5029 17f8 033082E0 		add	r3, r2, r3
 5030 17fc 032083E2 		add	r2, r3, #3
 5031 1800 000053E3 		cmp	r3, #0
 5032 1804 0230A0B1 		movlt	r3, r2
 5033 1808 4331A0E1 		mov	r3, r3, asr #2
 5034 180c 0320A0E1 		mov	r2, r3
 5035 1810 BC329FE5 		ldr	r3, .L101+32
 5036 1814 002083E5 		str	r2, [r3, #0]
 538:../tp.c       ****     g_lcd_xc = XRES / 2;
 5037              		.loc 1 538 0
 5038 1818 98301BE5 		ldr	r3, [fp, #-152]
 5039 181c A32FA0E1 		mov	r2, r3, lsr #31
 5040 1820 033082E0 		add	r3, r2, r3
 5041 1824 C330A0E1 		mov	r3, r3, asr #1
 5042 1828 0320A0E1 		mov	r2, r3
 5043 182c A4329FE5 		ldr	r3, .L101+36
 5044 1830 002083E5 		str	r2, [r3, #0]
 539:../tp.c       ****     g_lcd_yc = YRES / 2;
 5045              		.loc 1 539 0
 5046 1834 9C301BE5 		ldr	r3, [fp, #-156]
 5047 1838 A32FA0E1 		mov	r2, r3, lsr #31
 5048 183c 033082E0 		add	r3, r2, r3
 5049 1840 C330A0E1 		mov	r3, r3, asr #1
 5050 1844 0320A0E1 		mov	r2, r3
 5051 1848 8C329FE5 		ldr	r3, .L101+40
 5052 184c 002083E5 		str	r2, [r3, #0]
 540:../tp.c       ****     
 541:../tp.c       ****     // CÁLCULO DE kx y ky (CON SIGNO - fixed-point 16.16)
 542:../tp.c       ****     lcd_s = XRES - 2 * M;
 5053              		.loc 1 542 0
 5054 1850 A0201BE5 		ldr	r2, [fp, #-160]
 5055 1854 0230A0E1 		mov	r3, r2
 5056 1858 833FA0E1 		mov	r3, r3, asl #31
 5057 185c 033062E0 		rsb	r3, r2, r3
 5058 1860 8330A0E1 		mov	r3, r3, asl #1
 5059 1864 0320A0E1 		mov	r2, r3
 5060 1868 98301BE5 		ldr	r3, [fp, #-152]
 5061 186c 033082E0 		add	r3, r2, r3
 5062 1870 4C300BE5 		str	r3, [fp, #-76]
 543:../tp.c       ****     lcd_d = YRES - 2 * M;
 5063              		.loc 1 543 0
 5064 1874 A0201BE5 		ldr	r2, [fp, #-160]
 5065 1878 0230A0E1 		mov	r3, r2
 5066 187c 833FA0E1 		mov	r3, r3, asl #31
 5067 1880 033062E0 		rsb	r3, r2, r3
 5068 1884 8330A0E1 		mov	r3, r3, asl #1
 5069 1888 0320A0E1 		mov	r2, r3
 5070 188c 9C301BE5 		ldr	r3, [fp, #-156]
 5071 1890 033082E0 		add	r3, r2, r3
 5072 1894 50300BE5 		str	r3, [fp, #-80]
 544:../tp.c       ****     
 545:../tp.c       ****     ts_s1 = B_ts_x - A_ts_x;
 5073              		.loc 1 545 0
 5074 1898 78201BE5 		ldr	r2, [fp, #-120]
 5075 189c 70301BE5 		ldr	r3, [fp, #-112]
 5076 18a0 023063E0 		rsb	r3, r3, r2
 5077 18a4 54300BE5 		str	r3, [fp, #-84]
 546:../tp.c       ****     ts_s2 = C_ts_x - D_ts_x;
 5078              		.loc 1 546 0
 5079 18a8 80201BE5 		ldr	r2, [fp, #-128]
 5080 18ac 88301BE5 		ldr	r3, [fp, #-136]
 5081 18b0 023063E0 		rsb	r3, r3, r2
 5082 18b4 58300BE5 		str	r3, [fp, #-88]
 547:../tp.c       ****     ts_d1 = D_ts_y - A_ts_y;
 5083              		.loc 1 547 0
 5084 18b8 8C201BE5 		ldr	r2, [fp, #-140]
 5085 18bc 74301BE5 		ldr	r3, [fp, #-116]
 5086 18c0 023063E0 		rsb	r3, r3, r2
 5087 18c4 5C300BE5 		str	r3, [fp, #-92]
 548:../tp.c       ****     ts_d2 = C_ts_y - B_ts_y;
 5088              		.loc 1 548 0
 5089 18c8 84201BE5 		ldr	r2, [fp, #-132]
 5090 18cc 7C301BE5 		ldr	r3, [fp, #-124]
 5091 18d0 023063E0 		rsb	r3, r3, r2
 5092 18d4 60300BE5 		str	r3, [fp, #-96]
 549:../tp.c       ****     
 550:../tp.c       ****     // Usar promedios para mayor precisión
 551:../tp.c       ****     temp = (long long)lcd_s << 17;  // Multiplicar por 2 usando shift (<<17 = <<16 * 2)
 5093              		.loc 1 551 0
 5094 18d8 4C301BE5 		ldr	r3, [fp, #-76]
 5095 18dc C34FA0E1 		mov	r4, r3, asr #31
 5096 18e0 A327A0E1 		mov	r2, r3, lsr #15
 5097 18e4 8418A0E1 		mov	r1, r4, asl #17
 5098 18e8 022081E1 		orr	r2, r1, r2
 5099 18ec 68200BE5 		str	r2, [fp, #-104]
 5100 18f0 8338A0E1 		mov	r3, r3, asl #17
 5101 18f4 6C300BE5 		str	r3, [fp, #-108]
 552:../tp.c       ****     g_kx_fp = (long)(temp / (ts_s1 + ts_s2));
 5102              		.loc 1 552 0
 5103 18f8 54201BE5 		ldr	r2, [fp, #-84]
 5104 18fc 58301BE5 		ldr	r3, [fp, #-88]
 5105 1900 033082E0 		add	r3, r2, r3
 5106 1904 C34FA0E1 		mov	r4, r3, asr #31
 5107 1908 6C104BE2 		sub	r1, fp, #108
 5108 190c 030091E8 		ldmia	r1, {r0-r1}
 5109 1910 0320A0E1 		mov	r2, r3
 5110 1914 0430A0E1 		mov	r3, r4
 5111 1918 FEFFFFEB 		bl	__aeabi_ldivmod
 5112 191c 0030A0E1 		mov	r3, r0
 5113 1920 0140A0E1 		mov	r4, r1
 5114 1924 0320A0E1 		mov	r2, r3
 5115 1928 B0319FE5 		ldr	r3, .L101+44
 5116 192c 002083E5 		str	r2, [r3, #0]
 553:../tp.c       ****     
 554:../tp.c       ****     temp = (long long)lcd_d << 17;  // Multiplicar por 2 usando shift
 5117              		.loc 1 554 0
 5118 1930 50301BE5 		ldr	r3, [fp, #-80]
 5119 1934 C34FA0E1 		mov	r4, r3, asr #31
 5120 1938 A327A0E1 		mov	r2, r3, lsr #15
 5121 193c 8418A0E1 		mov	r1, r4, asl #17
 5122 1940 022081E1 		orr	r2, r1, r2
 5123 1944 68200BE5 		str	r2, [fp, #-104]
 5124 1948 8338A0E1 		mov	r3, r3, asl #17
 5125 194c 6C300BE5 		str	r3, [fp, #-108]
 555:../tp.c       ****     g_ky_fp = (long)(temp / (ts_d1 + ts_d2));
 5126              		.loc 1 555 0
 5127 1950 5C201BE5 		ldr	r2, [fp, #-92]
 5128 1954 60301BE5 		ldr	r3, [fp, #-96]
 5129 1958 033082E0 		add	r3, r2, r3
 5130 195c C34FA0E1 		mov	r4, r3, asr #31
 5131 1960 6C104BE2 		sub	r1, fp, #108
 5132 1964 030091E8 		ldmia	r1, {r0-r1}
 5133 1968 0320A0E1 		mov	r2, r3
 5134 196c 0430A0E1 		mov	r3, r4
 5135 1970 FEFFFFEB 		bl	__aeabi_ldivmod
 5136 1974 0030A0E1 		mov	r3, r0
 5137 1978 0140A0E1 		mov	r4, r1
 5138 197c 0320A0E1 		mov	r2, r3
 5139 1980 5C319FE5 		ldr	r3, .L101+48
 5140 1984 002083E5 		str	r2, [r3, #0]
 556:../tp.c       ****     
 557:../tp.c       ****     // Mostrar resultados de calibración
 558:../tp.c       ****     Lcd_Clr();
 5141              		.loc 1 558 0
 5142 1988 FEFFFFEB 		bl	Lcd_Clr
 559:../tp.c       ****     
 560:../tp.c       ****     Lcd_DspAscII6x8(10, 10, BLACK, (unsigned char *)"=== CALIBRACION OK ===");
 5143              		.loc 1 560 0
 5144 198c 0A00A0E3 		mov	r0, #10
 5145 1990 0A10A0E3 		mov	r1, #10
 5146 1994 0F20A0E3 		mov	r2, #15
 5147 1998 48319FE5 		ldr	r3, .L101+52
 5148 199c FEFFFFEB 		bl	Lcd_DspAscII6x8
 561:../tp.c       ****     
 562:../tp.c       ****     if (g_swap_xy)
 5149              		.loc 1 562 0
 5150 19a0 24319FE5 		ldr	r3, .L101+24
 5151 19a4 003093E5 		ldr	r3, [r3, #0]
 5152 19a8 000053E3 		cmp	r3, #0
 5153 19ac 0500000A 		beq	.L95
 563:../tp.c       ****         Lcd_DspAscII6x8(10, 30, BLACK, (unsigned char *)"Swap XY: SI");
 5154              		.loc 1 563 0
 5155 19b0 0A00A0E3 		mov	r0, #10
 5156 19b4 1E10A0E3 		mov	r1, #30
 5157 19b8 0F20A0E3 		mov	r2, #15
 5158 19bc 28319FE5 		ldr	r3, .L101+56
 5159 19c0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5160 19c4 040000EA 		b	.L96
 5161              	.L95:
 564:../tp.c       ****     else
 565:../tp.c       ****         Lcd_DspAscII6x8(10, 30, BLACK, (unsigned char *)"Swap XY: NO");
 5162              		.loc 1 565 0
 5163 19c8 0A00A0E3 		mov	r0, #10
 5164 19cc 1E10A0E3 		mov	r1, #30
 5165 19d0 0F20A0E3 		mov	r2, #15
 5166 19d4 14319FE5 		ldr	r3, .L101+60
 5167 19d8 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5168              	.L96:
 566:../tp.c       ****     
 567:../tp.c       ****     Lcd_DspAscII6x8(10, 50, BLACK, (unsigned char *)"Puntos capturados OK");
 5169              		.loc 1 567 0
 5170 19dc 0A00A0E3 		mov	r0, #10
 5171 19e0 3210A0E3 		mov	r1, #50
 5172 19e4 0F20A0E3 		mov	r2, #15
 5173 19e8 04319FE5 		ldr	r3, .L101+64
 5174 19ec FEFFFFEB 		bl	Lcd_DspAscII6x8
 568:../tp.c       ****     Lcd_DspAscII6x8(10, 70, BLACK, (unsigned char *)"Factores calculados");
 5175              		.loc 1 568 0
 5176 19f0 0A00A0E3 		mov	r0, #10
 5177 19f4 4610A0E3 		mov	r1, #70
 5178 19f8 0F20A0E3 		mov	r2, #15
 5179 19fc F4309FE5 		ldr	r3, .L101+68
 5180 1a00 FEFFFFEB 		bl	Lcd_DspAscII6x8
 569:../tp.c       ****     
 570:../tp.c       ****     // Mostrar signo de las escalas
 571:../tp.c       ****     if (g_kx_fp > 0)
 5181              		.loc 1 571 0
 5182 1a04 D4309FE5 		ldr	r3, .L101+44
 5183 1a08 003093E5 		ldr	r3, [r3, #0]
 5184 1a0c 000053E3 		cmp	r3, #0
 5185 1a10 050000DA 		ble	.L97
 572:../tp.c       ****         Lcd_DspAscII6x8(10, 90, BLACK, (unsigned char *)"kx: POSITIVO");
 5186              		.loc 1 572 0
 5187 1a14 0A00A0E3 		mov	r0, #10
 5188 1a18 5A10A0E3 		mov	r1, #90
 5189 1a1c 0F20A0E3 		mov	r2, #15
 5190 1a20 D4309FE5 		ldr	r3, .L101+72
 5191 1a24 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5192 1a28 040000EA 		b	.L98
 5193              	.L97:
 573:../tp.c       ****     else
 574:../tp.c       ****         Lcd_DspAscII6x8(10, 90, BLACK, (unsigned char *)"kx: NEGATIVO");
 5194              		.loc 1 574 0
 5195 1a2c 0A00A0E3 		mov	r0, #10
 5196 1a30 5A10A0E3 		mov	r1, #90
 5197 1a34 0F20A0E3 		mov	r2, #15
 5198 1a38 C0309FE5 		ldr	r3, .L101+76
 5199 1a3c FEFFFFEB 		bl	Lcd_DspAscII6x8
 5200              	.L98:
 575:../tp.c       ****         
 576:../tp.c       ****     if (g_ky_fp > 0)
 5201              		.loc 1 576 0
 5202 1a40 9C309FE5 		ldr	r3, .L101+48
 5203 1a44 003093E5 		ldr	r3, [r3, #0]
 5204 1a48 000053E3 		cmp	r3, #0
 5205 1a4c 050000DA 		ble	.L99
 577:../tp.c       ****         Lcd_DspAscII6x8(10, 110, BLACK, (unsigned char *)"ky: POSITIVO");
 5206              		.loc 1 577 0
 5207 1a50 0A00A0E3 		mov	r0, #10
 5208 1a54 6E10A0E3 		mov	r1, #110
 5209 1a58 0F20A0E3 		mov	r2, #15
 5210 1a5c A0309FE5 		ldr	r3, .L101+80
 5211 1a60 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5212 1a64 040000EA 		b	.L100
 5213              	.L99:
 578:../tp.c       ****     else
 579:../tp.c       ****         Lcd_DspAscII6x8(10, 110, BLACK, (unsigned char *)"ky: NEGATIVO");
 5214              		.loc 1 579 0
 5215 1a68 0A00A0E3 		mov	r0, #10
 5216 1a6c 6E10A0E3 		mov	r1, #110
 5217 1a70 0F20A0E3 		mov	r2, #15
 5218 1a74 8C309FE5 		ldr	r3, .L101+84
 5219 1a78 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5220              	.L100:
 580:../tp.c       ****     
 581:../tp.c       ****     Lcd_DspAscII6x8(10, 140, BLACK, (unsigned char *)"[Toca para continuar]");
 5221              		.loc 1 581 0
 5222 1a7c 0A00A0E3 		mov	r0, #10
 5223 1a80 8C10A0E3 		mov	r1, #140
 5224 1a84 0F20A0E3 		mov	r2, #15
 5225 1a88 7C309FE5 		ldr	r3, .L101+88
 5226 1a8c FEFFFFEB 		bl	Lcd_DspAscII6x8
 582:../tp.c       ****     
 583:../tp.c       ****     Lcd_Dma_Trans();
 5227              		.loc 1 583 0
 5228 1a90 FEFFFFEB 		bl	Lcd_Dma_Trans
 584:../tp.c       ****     
 585:../tp.c       ****     // Esperar toque para continuar
 586:../tp.c       ****     ts_wait_for_touch();
 5229              		.loc 1 586 0
 5230 1a94 8BFDFFEB 		bl	ts_wait_for_touch
 587:../tp.c       ****     Delay(50);
 5231              		.loc 1 587 0
 5232 1a98 3200A0E3 		mov	r0, #50
 5233 1a9c FEFFFFEB 		bl	Delay
 588:../tp.c       ****     
 589:../tp.c       ****     Lcd_Clr();
 5234              		.loc 1 589 0
 5235 1aa0 FEFFFFEB 		bl	Lcd_Clr
 590:../tp.c       ****     Lcd_Dma_Trans();
 5236              		.loc 1 590 0
 5237 1aa4 FEFFFFEB 		bl	Lcd_Dma_Trans
 591:../tp.c       **** }
 5238              		.loc 1 591 0
 5239 1aa8 10D04BE2 		sub	sp, fp, #16
 5240 1aac 10689DE8 		ldmfd	sp, {r4, fp, sp, lr}
 5241 1ab0 1EFF2FE1 		bx	lr
 5242              	.L102:
 5243              		.align	2
 5244              	.L101:
 5245 1ab4 40000000 		.word	.LC16
 5246 1ab8 54000000 		.word	.LC17
 5247 1abc 64000000 		.word	.LC18
 5248 1ac0 74000000 		.word	.LC19
 5249 1ac4 84000000 		.word	.LC20
 5250 1ac8 94000000 		.word	.LC21
 5251 1acc 00000000 		.word	g_swap_xy
 5252 1ad0 0C000000 		.word	g_ts_xc
 5253 1ad4 10000000 		.word	g_ts_yc
 5254 1ad8 14000000 		.word	g_lcd_xc
 5255 1adc 18000000 		.word	g_lcd_yc
 5256 1ae0 04000000 		.word	g_kx_fp
 5257 1ae4 08000000 		.word	g_ky_fp
 5258 1ae8 A4000000 		.word	.LC22
 5259 1aec BC000000 		.word	.LC23
 5260 1af0 C8000000 		.word	.LC24
 5261 1af4 D4000000 		.word	.LC25
 5262 1af8 EC000000 		.word	.LC26
 5263 1afc 00010000 		.word	.LC27
 5264 1b00 10010000 		.word	.LC28
 5265 1b04 20010000 		.word	.LC29
 5266 1b08 30010000 		.word	.LC30
 5267 1b0c 40010000 		.word	.LC31
 5268              		.cfi_endproc
 5269              	.LFE13:
 5271              		.align	2
 5272              		.global	ts_read_calibrated
 5274              	ts_read_calibrated:
 5275              	.LFB14:
 592:../tp.c       **** 
 593:../tp.c       **** /*********************************************************************************************
 594:../tp.c       **** * name:     ts_read_calibrated
 595:../tp.c       **** * func:     Lee coordenadas calibradas del touchscreen
 596:../tp.c       **** * ret:      0 si éxito, -1 si no hay toque
 597:../tp.c       **** *********************************************************************************************/
 598:../tp.c       **** int ts_read_calibrated(int *x, int *y)
 599:../tp.c       **** {
 5276              		.loc 1 599 0
 5277              		.cfi_startproc
 5278              		@ Function supports interworking.
 5279              		@ args = 0, pretend = 0, frame = 40
 5280              		@ frame_needed = 1, uses_anonymous_args = 0
 5281 1b10 0DC0A0E1 		mov	ip, sp
 5282              	.LCFI28:
 5283              		.cfi_def_cfa_register 12
 5284 1b14 F0DF2DE9 		stmfd	sp!, {r4, r5, r6, r7, r8, r9, sl, fp, ip, lr, pc}
 5285 1b18 04B04CE2 		sub	fp, ip, #4
 5286              		.cfi_offset 14, -8
 5287              		.cfi_offset 13, -12
 5288              		.cfi_offset 11, -16
 5289              		.cfi_offset 10, -20
 5290              		.cfi_offset 9, -24
 5291              		.cfi_offset 8, -28
 5292              		.cfi_offset 7, -32
 5293              		.cfi_offset 6, -36
 5294              		.cfi_offset 5, -40
 5295              		.cfi_offset 4, -44
 5296              	.LCFI29:
 5297              		.cfi_def_cfa 11, 4
 5298 1b1c 2CD04DE2 		sub	sp, sp, #44
 5299 1b20 50000BE5 		str	r0, [fp, #-80]
 5300 1b24 54100BE5 		str	r1, [fp, #-84]
 600:../tp.c       ****     int xr, yr;
 601:../tp.c       ****     long long temp_x, temp_y;
 602:../tp.c       ****     
 603:../tp.c       ****     if (g_ts_ready == 0)
 5301              		.loc 1 603 0
 5302 1b28 C0219FE5 		ldr	r2, .L107
 5303 1b2c 002092E5 		ldr	r2, [r2, #0]
 5304 1b30 000052E3 		cmp	r2, #0
 5305 1b34 0100001A 		bne	.L104
 604:../tp.c       ****         return -1;
 5306              		.loc 1 604 0
 5307 1b38 0030E0E3 		mvn	r3, #0
 5308 1b3c 670000EA 		b	.L105
 5309              	.L104:
 605:../tp.c       ****     
 606:../tp.c       ****     xr = g_ts_raw_x;
 5310              		.loc 1 606 0
 5311 1b40 AC219FE5 		ldr	r2, .L107+4
 5312 1b44 002092E5 		ldr	r2, [r2, #0]
 5313 1b48 30200BE5 		str	r2, [fp, #-48]
 607:../tp.c       ****     yr = g_ts_raw_y;
 5314              		.loc 1 607 0
 5315 1b4c A4219FE5 		ldr	r2, .L107+8
 5316 1b50 002092E5 		ldr	r2, [r2, #0]
 5317 1b54 34200BE5 		str	r2, [fp, #-52]
 608:../tp.c       ****     g_ts_ready = 0;
 5318              		.loc 1 608 0
 5319 1b58 90219FE5 		ldr	r2, .L107
 5320 1b5c 0010A0E3 		mov	r1, #0
 5321 1b60 001082E5 		str	r1, [r2, #0]
 609:../tp.c       ****     
 610:../tp.c       ****     // Aplicar swap si necesario
 611:../tp.c       ****     if (g_swap_xy)
 5322              		.loc 1 611 0
 5323 1b64 90219FE5 		ldr	r2, .L107+12
 5324 1b68 002092E5 		ldr	r2, [r2, #0]
 5325 1b6c 000052E3 		cmp	r2, #0
 5326 1b70 0500000A 		beq	.L106
 5327              	.LBB3:
 612:../tp.c       ****     {
 613:../tp.c       ****         int tmp = xr;
 5328              		.loc 1 613 0
 5329 1b74 30201BE5 		ldr	r2, [fp, #-48]
 5330 1b78 38200BE5 		str	r2, [fp, #-56]
 614:../tp.c       ****         xr = yr;
 5331              		.loc 1 614 0
 5332 1b7c 34201BE5 		ldr	r2, [fp, #-52]
 5333 1b80 30200BE5 		str	r2, [fp, #-48]
 615:../tp.c       ****         yr = tmp;
 5334              		.loc 1 615 0
 5335 1b84 38201BE5 		ldr	r2, [fp, #-56]
 5336 1b88 34200BE5 		str	r2, [fp, #-52]
 5337              	.L106:
 5338              	.LBE3:
 616:../tp.c       ****     }
 617:../tp.c       ****     
 618:../tp.c       ****     // CONVERSIÓN con fixed-point 16.16
 619:../tp.c       ****     temp_x = (long long)g_kx_fp * (xr - g_ts_xc);
 5339              		.loc 1 619 0
 5340 1b8c 6C219FE5 		ldr	r2, .L107+16
 5341 1b90 002092E5 		ldr	r2, [r2, #0]
 5342 1b94 0290A0E1 		mov	r9, r2
 5343 1b98 C9AFA0E1 		mov	sl, r9, asr #31
 5344 1b9c 60219FE5 		ldr	r2, .L107+20
 5345 1ba0 002092E5 		ldr	r2, [r2, #0]
 5346 1ba4 30101BE5 		ldr	r1, [fp, #-48]
 5347 1ba8 012062E0 		rsb	r2, r2, r1
 5348 1bac 0270A0E1 		mov	r7, r2
 5349 1bb0 C78FA0E1 		mov	r8, r7, asr #31
 5350 1bb4 970A00E0 		mul	r0, r7, sl
 5351 1bb8 990802E0 		mul	r2, r9, r8
 5352 1bbc 020080E0 		add	r0, r0, r2
 5353 1bc0 991782E0 		umull	r1, r2, r9, r7
 5354 1bc4 020080E0 		add	r0, r0, r2
 5355 1bc8 0020A0E1 		mov	r2, r0
 5356 1bcc 44100BE5 		str	r1, [fp, #-68]
 5357 1bd0 40200BE5 		str	r2, [fp, #-64]
 5358 1bd4 44100BE5 		str	r1, [fp, #-68]
 5359 1bd8 40200BE5 		str	r2, [fp, #-64]
 620:../tp.c       ****     *x = (int)(temp_x >> 16) + g_lcd_xc;
 5360              		.loc 1 620 0
 5361 1bdc 40201BE5 		ldr	r2, [fp, #-64]
 5362 1be0 0228A0E1 		mov	r2, r2, asl #16
 5363 1be4 44101BE5 		ldr	r1, [fp, #-68]
 5364 1be8 2158A0E1 		mov	r5, r1, lsr #16
 5365 1bec 055082E1 		orr	r5, r2, r5
 5366 1bf0 40201BE5 		ldr	r2, [fp, #-64]
 5367 1bf4 4268A0E1 		mov	r6, r2, asr #16
 5368 1bf8 0510A0E1 		mov	r1, r5
 5369 1bfc 04219FE5 		ldr	r2, .L107+24
 5370 1c00 002092E5 		ldr	r2, [r2, #0]
 5371 1c04 021081E0 		add	r1, r1, r2
 5372 1c08 50201BE5 		ldr	r2, [fp, #-80]
 5373 1c0c 001082E5 		str	r1, [r2, #0]
 621:../tp.c       ****     
 622:../tp.c       ****     temp_y = (long long)g_ky_fp * (yr - g_ts_yc);
 5374              		.loc 1 622 0
 5375 1c10 F4209FE5 		ldr	r2, .L107+28
 5376 1c14 002092E5 		ldr	r2, [r2, #0]
 5377 1c18 0270A0E1 		mov	r7, r2
 5378 1c1c C78FA0E1 		mov	r8, r7, asr #31
 5379 1c20 E8209FE5 		ldr	r2, .L107+32
 5380 1c24 002092E5 		ldr	r2, [r2, #0]
 5381 1c28 34101BE5 		ldr	r1, [fp, #-52]
 5382 1c2c 012062E0 		rsb	r2, r2, r1
 5383 1c30 0250A0E1 		mov	r5, r2
 5384 1c34 C56FA0E1 		mov	r6, r5, asr #31
 5385 1c38 950800E0 		mul	r0, r5, r8
 5386 1c3c 970602E0 		mul	r2, r7, r6
 5387 1c40 020080E0 		add	r0, r0, r2
 5388 1c44 971582E0 		umull	r1, r2, r7, r5
 5389 1c48 020080E0 		add	r0, r0, r2
 5390 1c4c 0020A0E1 		mov	r2, r0
 5391 1c50 4C100BE5 		str	r1, [fp, #-76]
 5392 1c54 48200BE5 		str	r2, [fp, #-72]
 5393 1c58 4C100BE5 		str	r1, [fp, #-76]
 5394 1c5c 48200BE5 		str	r2, [fp, #-72]
 623:../tp.c       ****     *y = (int)(temp_y >> 16) + g_lcd_yc;
 5395              		.loc 1 623 0
 5396 1c60 48201BE5 		ldr	r2, [fp, #-72]
 5397 1c64 0228A0E1 		mov	r2, r2, asl #16
 5398 1c68 4C101BE5 		ldr	r1, [fp, #-76]
 5399 1c6c 2138A0E1 		mov	r3, r1, lsr #16
 5400 1c70 033082E1 		orr	r3, r2, r3
 5401 1c74 48201BE5 		ldr	r2, [fp, #-72]
 5402 1c78 4248A0E1 		mov	r4, r2, asr #16
 5403 1c7c 0320A0E1 		mov	r2, r3
 5404 1c80 8C309FE5 		ldr	r3, .L107+36
 5405 1c84 003093E5 		ldr	r3, [r3, #0]
 5406 1c88 032082E0 		add	r2, r2, r3
 5407 1c8c 54301BE5 		ldr	r3, [fp, #-84]
 5408 1c90 002083E5 		str	r2, [r3, #0]
 624:../tp.c       ****     
 625:../tp.c       ****     // Clampear
 626:../tp.c       ****     *x = clamp(*x, 0, SCR_XSIZE - 1);
 5409              		.loc 1 626 0
 5410 1c94 50301BE5 		ldr	r3, [fp, #-80]
 5411 1c98 003093E5 		ldr	r3, [r3, #0]
 5412 1c9c 0300A0E1 		mov	r0, r3
 5413 1ca0 0010A0E3 		mov	r1, #0
 5414 1ca4 6C209FE5 		ldr	r2, .L107+40
 5415 1ca8 05FCFFEB 		bl	clamp
 5416 1cac 0020A0E1 		mov	r2, r0
 5417 1cb0 50301BE5 		ldr	r3, [fp, #-80]
 5418 1cb4 002083E5 		str	r2, [r3, #0]
 627:../tp.c       ****     *y = clamp(*y, 0, SCR_YSIZE - 1);
 5419              		.loc 1 627 0
 5420 1cb8 54301BE5 		ldr	r3, [fp, #-84]
 5421 1cbc 003093E5 		ldr	r3, [r3, #0]
 5422 1cc0 0300A0E1 		mov	r0, r3
 5423 1cc4 0010A0E3 		mov	r1, #0
 5424 1cc8 EF20A0E3 		mov	r2, #239
 5425 1ccc FCFBFFEB 		bl	clamp
 5426 1cd0 0020A0E1 		mov	r2, r0
 5427 1cd4 54301BE5 		ldr	r3, [fp, #-84]
 5428 1cd8 002083E5 		str	r2, [r3, #0]
 628:../tp.c       ****     
 629:../tp.c       ****     return 0;
 5429              		.loc 1 629 0
 5430 1cdc 0030A0E3 		mov	r3, #0
 5431              	.L105:
 630:../tp.c       **** }
 5432              		.loc 1 630 0
 5433 1ce0 0300A0E1 		mov	r0, r3
 5434 1ce4 28D04BE2 		sub	sp, fp, #40
 5435 1ce8 F06F9DE8 		ldmfd	sp, {r4, r5, r6, r7, r8, r9, sl, fp, sp, lr}
 5436 1cec 1EFF2FE1 		bx	lr
 5437              	.L108:
 5438              		.align	2
 5439              	.L107:
 5440 1cf0 1C000000 		.word	g_ts_ready
 5441 1cf4 20000000 		.word	g_ts_raw_x
 5442 1cf8 24000000 		.word	g_ts_raw_y
 5443 1cfc 00000000 		.word	g_swap_xy
 5444 1d00 04000000 		.word	g_kx_fp
 5445 1d04 0C000000 		.word	g_ts_xc
 5446 1d08 14000000 		.word	g_lcd_xc
 5447 1d0c 08000000 		.word	g_ky_fp
 5448 1d10 10000000 		.word	g_ts_yc
 5449 1d14 18000000 		.word	g_lcd_yc
 5450 1d18 3F010000 		.word	319
 5451              		.cfi_endproc
 5452              	.LFE14:
 5454              		.section	.rodata
 5455 0156 0000     		.align	2
 5456              	.LC32:
 5457 0158 44696275 		.ascii	"Dibuja!\000"
 5457      6A612100 
 5458              		.text
 5459              		.align	2
 5460              		.global	ts_test_calibracion
 5462              	ts_test_calibracion:
 5463              	.LFB15:
 631:../tp.c       **** 
 632:../tp.c       **** /*********************************************************************************************
 633:../tp.c       **** * name:     ts_test_calibracion
 634:../tp.c       **** * func:     Función de test completa: calibra y permite dibujar
 635:../tp.c       **** *********************************************************************************************/
 636:../tp.c       **** void ts_test_calibracion(void)
 637:../tp.c       **** {
 5464              		.loc 1 637 0
 5465              		.cfi_startproc
 5466              		@ Function supports interworking.
 5467              		@ args = 0, pretend = 0, frame = 8
 5468              		@ frame_needed = 1, uses_anonymous_args = 0
 5469 1d1c 0DC0A0E1 		mov	ip, sp
 5470              	.LCFI30:
 5471              		.cfi_def_cfa_register 12
 5472 1d20 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5473 1d24 04B04CE2 		sub	fp, ip, #4
 5474              		.cfi_offset 14, -8
 5475              		.cfi_offset 13, -12
 5476              		.cfi_offset 11, -16
 5477              	.LCFI31:
 5478              		.cfi_def_cfa 11, 4
 5479 1d28 08D04DE2 		sub	sp, sp, #8
 638:../tp.c       ****     int x, y;
 639:../tp.c       ****     
 640:../tp.c       ****     Lcd_Init();
 5480              		.loc 1 640 0
 5481 1d2c FEFFFFEB 		bl	Lcd_Init
 641:../tp.c       ****     TS_init();
 5482              		.loc 1 641 0
 5483 1d30 FEFFFFEB 		bl	TS_init
 642:../tp.c       ****     
 643:../tp.c       ****     // Calibrar con margen de 50 píxeles
 644:../tp.c       ****     ts_calibrate_5pt(SCR_XSIZE, SCR_YSIZE, 50);
 5484              		.loc 1 644 0
 5485 1d34 050DA0E3 		mov	r0, #320
 5486 1d38 F010A0E3 		mov	r1, #240
 5487 1d3c 3220A0E3 		mov	r2, #50
 5488 1d40 FEFFFFEB 		bl	ts_calibrate_5pt
 645:../tp.c       ****     
 646:../tp.c       ****     Lcd_Clr();
 5489              		.loc 1 646 0
 5490 1d44 FEFFFFEB 		bl	Lcd_Clr
 647:../tp.c       ****     Lcd_Active_Clr();
 5491              		.loc 1 647 0
 5492 1d48 FEFFFFEB 		bl	Lcd_Active_Clr
 648:../tp.c       ****     Lcd_DspAscII8x16(80, 110, BLACK, (unsigned char *)"Dibuja!");
 5493              		.loc 1 648 0
 5494 1d4c 5000A0E3 		mov	r0, #80
 5495 1d50 6E10A0E3 		mov	r1, #110
 5496 1d54 0F20A0E3 		mov	r2, #15
 5497 1d58 68319FE5 		ldr	r3, .L114
 5498 1d5c FEFFFFEB 		bl	Lcd_DspAscII8x16
 649:../tp.c       ****     Lcd_Dma_Trans();
 5499              		.loc 1 649 0
 5500 1d60 FEFFFFEB 		bl	Lcd_Dma_Trans
 650:../tp.c       ****     Delay(100);
 5501              		.loc 1 650 0
 5502 1d64 6400A0E3 		mov	r0, #100
 5503 1d68 FEFFFFEB 		bl	Delay
 651:../tp.c       ****     
 652:../tp.c       ****     Lcd_Clr();
 5504              		.loc 1 652 0
 5505 1d6c FEFFFFEB 		bl	Lcd_Clr
 653:../tp.c       ****     Lcd_Dma_Trans();
 5506              		.loc 1 653 0
 5507 1d70 FEFFFFEB 		bl	Lcd_Dma_Trans
 5508 1d74 020000EA 		b	.L111
 5509              	.L112:
 654:../tp.c       ****     
 655:../tp.c       ****     // Loop de dibujo
 656:../tp.c       ****     while (1)
 657:../tp.c       ****     {
 658:../tp.c       ****         if (ts_read_calibrated(&x, &y) == 0)
 659:../tp.c       ****         {
 660:../tp.c       ****             (LCD_PutPixel(x, y, 0xf));
 661:../tp.c       ****             
 662:../tp.c       ****             static int count = 0;
 663:../tp.c       ****             if (++count >= 5)
 664:../tp.c       ****             {
 665:../tp.c       ****                 Lcd_Dma_Trans();
 666:../tp.c       ****                 count = 0;
 667:../tp.c       ****             }
 668:../tp.c       ****         }
 669:../tp.c       ****     }
 5510              		.loc 1 669 0
 5511 1d78 0000A0E1 		mov	r0, r0	@ nop
 5512 1d7c 000000EA 		b	.L111
 5513              	.L113:
 5514 1d80 0000A0E1 		mov	r0, r0	@ nop
 5515              	.L111:
 658:../tp.c       ****         if (ts_read_calibrated(&x, &y) == 0)
 5516              		.loc 1 658 0
 5517 1d84 10204BE2 		sub	r2, fp, #16
 5518 1d88 14304BE2 		sub	r3, fp, #20
 5519 1d8c 0200A0E1 		mov	r0, r2
 5520 1d90 0310A0E1 		mov	r1, r3
 5521 1d94 FEFFFFEB 		bl	ts_read_calibrated
 5522 1d98 0030A0E1 		mov	r3, r0
 5523 1d9c 000053E3 		cmp	r3, #0
 5524 1da0 F4FFFF1A 		bne	.L112
 5525              	.LBB4:
 660:../tp.c       ****             (LCD_PutPixel(x, y, 0xf));
 5526              		.loc 1 660 0
 5527 1da4 14201BE5 		ldr	r2, [fp, #-20]
 5528 1da8 0230A0E1 		mov	r3, r2
 5529 1dac 0331A0E1 		mov	r3, r3, asl #2
 5530 1db0 023083E0 		add	r3, r3, r2
 5531 1db4 0333A0E1 		mov	r3, r3, asl #6
 5532 1db8 A32FA0E1 		mov	r2, r3, lsr #31
 5533 1dbc 033082E0 		add	r3, r2, r3
 5534 1dc0 C330A0E1 		mov	r3, r3, asr #1
 5535 1dc4 C32683E2 		add	r2, r3, #204472320
 5536 1dc8 962C82E2 		add	r2, r2, #38400
 5537 1dcc 10301BE5 		ldr	r3, [fp, #-16]
 5538 1dd0 071083E2 		add	r1, r3, #7
 5539 1dd4 000053E3 		cmp	r3, #0
 5540 1dd8 0130A0B1 		movlt	r3, r1
 5541 1ddc C331A0E1 		mov	r3, r3, asr #3
 5542 1de0 0331A0E1 		mov	r3, r3, asl #2
 5543 1de4 033082E0 		add	r3, r2, r3
 5544 1de8 0310A0E1 		mov	r1, r3
 5545 1dec 14201BE5 		ldr	r2, [fp, #-20]
 5546 1df0 0230A0E1 		mov	r3, r2
 5547 1df4 0331A0E1 		mov	r3, r3, asl #2
 5548 1df8 023083E0 		add	r3, r3, r2
 5549 1dfc 0333A0E1 		mov	r3, r3, asl #6
 5550 1e00 A32FA0E1 		mov	r2, r3, lsr #31
 5551 1e04 033082E0 		add	r3, r2, r3
 5552 1e08 C330A0E1 		mov	r3, r3, asr #1
 5553 1e0c C32683E2 		add	r2, r3, #204472320
 5554 1e10 962C82E2 		add	r2, r2, #38400
 5555 1e14 10301BE5 		ldr	r3, [fp, #-16]
 5556 1e18 070083E2 		add	r0, r3, #7
 5557 1e1c 000053E3 		cmp	r3, #0
 5558 1e20 0030A0B1 		movlt	r3, r0
 5559 1e24 C331A0E1 		mov	r3, r3, asr #3
 5560 1e28 0331A0E1 		mov	r3, r3, asl #2
 5561 1e2c 033082E0 		add	r3, r2, r3
 5562 1e30 000093E5 		ldr	r0, [r3, #0]
 5563 1e34 10201BE5 		ldr	r2, [fp, #-16]
 5564 1e38 C23FA0E1 		mov	r3, r2, asr #31
 5565 1e3c A33EA0E1 		mov	r3, r3, lsr #29
 5566 1e40 032082E0 		add	r2, r2, r3
 5567 1e44 072002E2 		and	r2, r2, #7
 5568 1e48 023063E0 		rsb	r3, r3, r2
 5569 1e4c 0331A0E1 		mov	r3, r3, asl #2
 5570 1e50 0F22A0E3 		mov	r2, #-268435456
 5571 1e54 3233A0E1 		mov	r3, r2, lsr r3
 5572 1e58 0330E0E1 		mvn	r3, r3
 5573 1e5c 030000E0 		and	r0, r0, r3
 5574 1e60 10201BE5 		ldr	r2, [fp, #-16]
 5575 1e64 C23FA0E1 		mov	r3, r2, asr #31
 5576 1e68 A33EA0E1 		mov	r3, r3, lsr #29
 5577 1e6c 032082E0 		add	r2, r2, r3
 5578 1e70 072002E2 		and	r2, r2, #7
 5579 1e74 023063E0 		rsb	r3, r3, r2
 5580 1e78 073063E2 		rsb	r3, r3, #7
 5581 1e7c 0331A0E1 		mov	r3, r3, asl #2
 5582 1e80 0F20A0E3 		mov	r2, #15
 5583 1e84 1233A0E1 		mov	r3, r2, asl r3
 5584 1e88 033080E1 		orr	r3, r0, r3
 5585 1e8c 003081E5 		str	r3, [r1, #0]
 663:../tp.c       ****             if (++count >= 5)
 5586              		.loc 1 663 0
 5587 1e90 34309FE5 		ldr	r3, .L114+4
 5588 1e94 003093E5 		ldr	r3, [r3, #0]
 5589 1e98 012083E2 		add	r2, r3, #1
 5590 1e9c 28309FE5 		ldr	r3, .L114+4
 5591 1ea0 002083E5 		str	r2, [r3, #0]
 5592 1ea4 20309FE5 		ldr	r3, .L114+4
 5593 1ea8 003093E5 		ldr	r3, [r3, #0]
 5594 1eac 040053E3 		cmp	r3, #4
 5595 1eb0 B2FFFFDA 		ble	.L113
 665:../tp.c       ****                 Lcd_Dma_Trans();
 5596              		.loc 1 665 0
 5597 1eb4 FEFFFFEB 		bl	Lcd_Dma_Trans
 666:../tp.c       ****                 count = 0;
 5598              		.loc 1 666 0
 5599 1eb8 0C309FE5 		ldr	r3, .L114+4
 5600 1ebc 0020A0E3 		mov	r2, #0
 5601 1ec0 002083E5 		str	r2, [r3, #0]
 5602              	.LBE4:
 5603              		.loc 1 669 0
 5604 1ec4 AEFFFFEA 		b	.L111
 5605              	.L115:
 5606              		.align	2
 5607              	.L114:
 5608 1ec8 58010000 		.word	.LC32
 5609 1ecc 2C000000 		.word	count.4622
 5610              		.cfi_endproc
 5611              	.LFE15:
 5613              		.section	.rodata
 5614              		.align	2
 5615              	.LC33:
 5616 0160 546F6361 		.ascii	"Toca un numero\000"
 5616      20756E20 
 5616      6E756D65 
 5616      726F00
 5617 016f 00       		.align	2
 5618              	.LC34:
 5619 0170 546F7175 		.ascii	"Toque detectado:\000"
 5619      65206465 
 5619      74656374 
 5619      61646F3A 
 5619      00
 5620 0181 000000   		.align	2
 5621              	.LC35:
 5622 0184 436F6F72 		.ascii	"Coordenadas guardadas\000"
 5622      64656E61 
 5622      64617320 
 5622      67756172 
 5622      64616461 
 5623 019a 0000     		.align	2
 5624              	.LC36:
 5625 019c 4E554D45 		.ascii	"NUMERO 1\000"
 5625      524F2031 
 5625      00
 5626 01a5 000000   		.align	2
 5627              	.LC37:
 5628 01a8 4E554D45 		.ascii	"NUMERO 2\000"
 5628      524F2032 
 5628      00
 5629 01b1 000000   		.align	2
 5630              	.LC38:
 5631 01b4 46756572 		.ascii	"Fuera de zona\000"
 5631      61206465 
 5631      207A6F6E 
 5631      6100
 5632 01c2 0000     		.text
 5633              		.align	2
 5634              		.global	ts_test_numeros
 5636              	ts_test_numeros:
 5637              	.LFB16:
 670:../tp.c       **** }
 671:../tp.c       **** 
 672:../tp.c       **** /*********************************************************************************************
 673:../tp.c       **** * name:     ts_test_numeros
 674:../tp.c       **** * func:     Test con dos números: muestra coordenadas al tocar
 675:../tp.c       **** *********************************************************************************************/
 676:../tp.c       **** void ts_test_numeros(void)
 677:../tp.c       **** {
 5638              		.loc 1 677 0
 5639              		.cfi_startproc
 5640              		@ Function supports interworking.
 5641              		@ args = 0, pretend = 0, frame = 40
 5642              		@ frame_needed = 1, uses_anonymous_args = 0
 5643 1ed0 0DC0A0E1 		mov	ip, sp
 5644              	.LCFI32:
 5645              		.cfi_def_cfa_register 12
 5646 1ed4 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 5647 1ed8 04B04CE2 		sub	fp, ip, #4
 5648              		.cfi_offset 14, -8
 5649              		.cfi_offset 13, -12
 5650              		.cfi_offset 11, -16
 5651              	.LCFI33:
 5652              		.cfi_def_cfa 11, 4
 5653 1edc 28D04DE2 		sub	sp, sp, #40
 678:../tp.c       ****     int x, y;
 679:../tp.c       ****     int num1_x = 60, num1_y = 100;   // Posición número 1 (izquierda)
 5654              		.loc 1 679 0
 5655 1ee0 3C30A0E3 		mov	r3, #60
 5656 1ee4 20300BE5 		str	r3, [fp, #-32]
 5657 1ee8 6430A0E3 		mov	r3, #100
 5658 1eec 24300BE5 		str	r3, [fp, #-36]
 680:../tp.c       ****     int num2_x = 220, num2_y = 100;  // Posición número 2 (derecha)
 5659              		.loc 1 680 0
 5660 1ef0 DC30A0E3 		mov	r3, #220
 5661 1ef4 28300BE5 		str	r3, [fp, #-40]
 5662 1ef8 6430A0E3 		mov	r3, #100
 5663 1efc 2C300BE5 		str	r3, [fp, #-44]
 681:../tp.c       ****     
 682:../tp.c       ****     Lcd_Init();
 5664              		.loc 1 682 0
 5665 1f00 FEFFFFEB 		bl	Lcd_Init
 683:../tp.c       ****     TS_init();
 5666              		.loc 1 683 0
 5667 1f04 FEFFFFEB 		bl	TS_init
 684:../tp.c       ****     
 685:../tp.c       ****     // Calibrar con margen de 30 píxeles (más cerca de los bordes)
 686:../tp.c       ****     ts_calibrate_5pt(SCR_XSIZE, SCR_YSIZE, 30);
 5668              		.loc 1 686 0
 5669 1f08 050DA0E3 		mov	r0, #320
 5670 1f0c F010A0E3 		mov	r1, #240
 5671 1f10 1E20A0E3 		mov	r2, #30
 5672 1f14 FEFFFFEB 		bl	ts_calibrate_5pt
 687:../tp.c       ****     
 688:../tp.c       ****     // Mostrar los dos números
 689:../tp.c       ****     Lcd_Clr();
 5673              		.loc 1 689 0
 5674 1f18 FEFFFFEB 		bl	Lcd_Clr
 690:../tp.c       ****     Lcd_DspAscII8x16(num1_x, num1_y, BLACK, (unsigned char *)"1");
 5675              		.loc 1 690 0
 5676 1f1c 20301BE5 		ldr	r3, [fp, #-32]
 5677 1f20 0338A0E1 		mov	r3, r3, asl #16
 5678 1f24 2328A0E1 		mov	r2, r3, lsr #16
 5679 1f28 24301BE5 		ldr	r3, [fp, #-36]
 5680 1f2c 0338A0E1 		mov	r3, r3, asl #16
 5681 1f30 2338A0E1 		mov	r3, r3, lsr #16
 5682 1f34 0200A0E1 		mov	r0, r2
 5683 1f38 0310A0E1 		mov	r1, r3
 5684 1f3c 0F20A0E3 		mov	r2, #15
 5685 1f40 14349FE5 		ldr	r3, .L132
 5686 1f44 FEFFFFEB 		bl	Lcd_DspAscII8x16
 691:../tp.c       ****     Lcd_DspAscII8x16(num2_x, num2_y, BLACK, (unsigned char *)"2");
 5687              		.loc 1 691 0
 5688 1f48 28301BE5 		ldr	r3, [fp, #-40]
 5689 1f4c 0338A0E1 		mov	r3, r3, asl #16
 5690 1f50 2328A0E1 		mov	r2, r3, lsr #16
 5691 1f54 2C301BE5 		ldr	r3, [fp, #-44]
 5692 1f58 0338A0E1 		mov	r3, r3, asl #16
 5693 1f5c 2338A0E1 		mov	r3, r3, lsr #16
 5694 1f60 0200A0E1 		mov	r0, r2
 5695 1f64 0310A0E1 		mov	r1, r3
 5696 1f68 0F20A0E3 		mov	r2, #15
 5697 1f6c EC339FE5 		ldr	r3, .L132+4
 5698 1f70 FEFFFFEB 		bl	Lcd_DspAscII8x16
 692:../tp.c       ****     Lcd_DspAscII6x8(60, 20, BLACK, (unsigned char *)"Toca un numero");
 5699              		.loc 1 692 0
 5700 1f74 3C00A0E3 		mov	r0, #60
 5701 1f78 1410A0E3 		mov	r1, #20
 5702 1f7c 0F20A0E3 		mov	r2, #15
 5703 1f80 DC339FE5 		ldr	r3, .L132+8
 5704 1f84 FEFFFFEB 		bl	Lcd_DspAscII6x8
 693:../tp.c       ****     Lcd_Dma_Trans();
 5705              		.loc 1 693 0
 5706 1f88 FEFFFFEB 		bl	Lcd_Dma_Trans
 5707 1f8c 000000EA 		b	.L130
 5708              	.L131:
 694:../tp.c       ****     
 695:../tp.c       ****     // Loop de detección de toques
 696:../tp.c       ****     while (1)
 697:../tp.c       ****     {
 698:../tp.c       ****         if (ts_read_calibrated(&x, &y) == 0)
 699:../tp.c       ****         {
 700:../tp.c       ****             // Limpiar zona de información
 701:../tp.c       ****             int i, j;
 702:../tp.c       ****             for (i = 0; i < 320; i++)
 703:../tp.c       ****                 for (j = 150; j < 200; j++)
 704:../tp.c       ****                     (LCD_PutPixel(i, j, 0x0));
 705:../tp.c       ****             
 706:../tp.c       ****             // Mostrar coordenadas
 707:../tp.c       ****             Lcd_DspAscII6x8(10, 160, BLACK, (unsigned char *)"Toque detectado:");
 708:../tp.c       ****             
 709:../tp.c       ****             // Mostrar X (solo texto fijo, sin sprintf)
 710:../tp.c       ****             Lcd_DspAscII6x8(10, 175, BLACK, (unsigned char *)"Coordenadas guardadas");
 711:../tp.c       ****             
 712:../tp.c       ****             // Dibujar punto donde se tocó
 713:../tp.c       ****             int px, py;
 714:../tp.c       ****             for (px = x-3; px <= x+3; px++)
 715:../tp.c       ****                 for (py = y-3; py <= y+3; py++)
 716:../tp.c       ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 717:../tp.c       ****                         (LCD_PutPixel(px, py, 0xf));
 718:../tp.c       ****             
 719:../tp.c       ****             // Detectar qué número se tocó (área más amplia para test)
 720:../tp.c       ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 721:../tp.c       ****             {
 722:../tp.c       ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 1");
 723:../tp.c       ****             }
 724:../tp.c       ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 725:../tp.c       ****             {
 726:../tp.c       ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 2");
 727:../tp.c       ****             }
 728:../tp.c       ****             else
 729:../tp.c       ****             {
 730:../tp.c       ****                 Lcd_DspAscII6x8(70, 195, BLACK, (unsigned char *)"Fuera de zona");
 731:../tp.c       ****             }
 732:../tp.c       ****             
 733:../tp.c       ****             Lcd_Dma_Trans();
 734:../tp.c       ****             Delay(50);
 735:../tp.c       ****         }
 736:../tp.c       ****     }
 5709              		.loc 1 736 0
 5710 1f90 0000A0E1 		mov	r0, r0	@ nop
 5711              	.L130:
 698:../tp.c       ****         if (ts_read_calibrated(&x, &y) == 0)
 5712              		.loc 1 698 0
 5713 1f94 30204BE2 		sub	r2, fp, #48
 5714 1f98 34304BE2 		sub	r3, fp, #52
 5715 1f9c 0200A0E1 		mov	r0, r2
 5716 1fa0 0310A0E1 		mov	r1, r3
 5717 1fa4 FEFFFFEB 		bl	ts_read_calibrated
 5718 1fa8 0030A0E1 		mov	r3, r0
 5719 1fac 000053E3 		cmp	r3, #0
 5720 1fb0 F6FFFF1A 		bne	.L131
 5721              	.LBB5:
 702:../tp.c       ****             for (i = 0; i < 320; i++)
 5722              		.loc 1 702 0
 5723 1fb4 0030A0E3 		mov	r3, #0
 5724 1fb8 10300BE5 		str	r3, [fp, #-16]
 5725 1fbc 3B0000EA 		b	.L118
 5726              	.L121:
 703:../tp.c       ****                 for (j = 150; j < 200; j++)
 5727              		.loc 1 703 0
 5728 1fc0 9630A0E3 		mov	r3, #150
 5729 1fc4 14300BE5 		str	r3, [fp, #-20]
 5730 1fc8 320000EA 		b	.L119
 5731              	.L120:
 704:../tp.c       ****                     (LCD_PutPixel(i, j, 0x0));
 5732              		.loc 1 704 0 discriminator 2
 5733 1fcc 14201BE5 		ldr	r2, [fp, #-20]
 5734 1fd0 0230A0E1 		mov	r3, r2
 5735 1fd4 0331A0E1 		mov	r3, r3, asl #2
 5736 1fd8 023083E0 		add	r3, r3, r2
 5737 1fdc 0333A0E1 		mov	r3, r3, asl #6
 5738 1fe0 A32FA0E1 		mov	r2, r3, lsr #31
 5739 1fe4 033082E0 		add	r3, r2, r3
 5740 1fe8 C330A0E1 		mov	r3, r3, asr #1
 5741 1fec C32683E2 		add	r2, r3, #204472320
 5742 1ff0 962C82E2 		add	r2, r2, #38400
 5743 1ff4 10301BE5 		ldr	r3, [fp, #-16]
 5744 1ff8 071083E2 		add	r1, r3, #7
 5745 1ffc 000053E3 		cmp	r3, #0
 5746 2000 0130A0B1 		movlt	r3, r1
 5747 2004 C331A0E1 		mov	r3, r3, asr #3
 5748 2008 0331A0E1 		mov	r3, r3, asl #2
 5749 200c 033082E0 		add	r3, r2, r3
 5750 2010 0310A0E1 		mov	r1, r3
 5751 2014 14201BE5 		ldr	r2, [fp, #-20]
 5752 2018 0230A0E1 		mov	r3, r2
 5753 201c 0331A0E1 		mov	r3, r3, asl #2
 5754 2020 023083E0 		add	r3, r3, r2
 5755 2024 0333A0E1 		mov	r3, r3, asl #6
 5756 2028 A32FA0E1 		mov	r2, r3, lsr #31
 5757 202c 033082E0 		add	r3, r2, r3
 5758 2030 C330A0E1 		mov	r3, r3, asr #1
 5759 2034 C32683E2 		add	r2, r3, #204472320
 5760 2038 962C82E2 		add	r2, r2, #38400
 5761 203c 10301BE5 		ldr	r3, [fp, #-16]
 5762 2040 070083E2 		add	r0, r3, #7
 5763 2044 000053E3 		cmp	r3, #0
 5764 2048 0030A0B1 		movlt	r3, r0
 5765 204c C331A0E1 		mov	r3, r3, asr #3
 5766 2050 0331A0E1 		mov	r3, r3, asl #2
 5767 2054 033082E0 		add	r3, r2, r3
 5768 2058 000093E5 		ldr	r0, [r3, #0]
 5769 205c 10201BE5 		ldr	r2, [fp, #-16]
 5770 2060 C23FA0E1 		mov	r3, r2, asr #31
 5771 2064 A33EA0E1 		mov	r3, r3, lsr #29
 5772 2068 032082E0 		add	r2, r2, r3
 5773 206c 072002E2 		and	r2, r2, #7
 5774 2070 023063E0 		rsb	r3, r3, r2
 5775 2074 0331A0E1 		mov	r3, r3, asl #2
 5776 2078 0F22A0E3 		mov	r2, #-268435456
 5777 207c 3233A0E1 		mov	r3, r2, lsr r3
 5778 2080 0330E0E1 		mvn	r3, r3
 5779 2084 033000E0 		and	r3, r0, r3
 5780 2088 003081E5 		str	r3, [r1, #0]
 703:../tp.c       ****                 for (j = 150; j < 200; j++)
 5781              		.loc 1 703 0 discriminator 2
 5782 208c 14301BE5 		ldr	r3, [fp, #-20]
 5783 2090 013083E2 		add	r3, r3, #1
 5784 2094 14300BE5 		str	r3, [fp, #-20]
 5785              	.L119:
 703:../tp.c       ****                 for (j = 150; j < 200; j++)
 5786              		.loc 1 703 0 is_stmt 0 discriminator 1
 5787 2098 14301BE5 		ldr	r3, [fp, #-20]
 5788 209c C70053E3 		cmp	r3, #199
 5789 20a0 C9FFFFDA 		ble	.L120
 702:../tp.c       ****             for (i = 0; i < 320; i++)
 5790              		.loc 1 702 0 is_stmt 1
 5791 20a4 10301BE5 		ldr	r3, [fp, #-16]
 5792 20a8 013083E2 		add	r3, r3, #1
 5793 20ac 10300BE5 		str	r3, [fp, #-16]
 5794              	.L118:
 702:../tp.c       ****             for (i = 0; i < 320; i++)
 5795              		.loc 1 702 0 is_stmt 0 discriminator 1
 5796 20b0 10201BE5 		ldr	r2, [fp, #-16]
 5797 20b4 AC329FE5 		ldr	r3, .L132+12
 5798 20b8 030052E1 		cmp	r2, r3
 5799 20bc BFFFFFDA 		ble	.L121
 707:../tp.c       ****             Lcd_DspAscII6x8(10, 160, BLACK, (unsigned char *)"Toque detectado:");
 5800              		.loc 1 707 0 is_stmt 1
 5801 20c0 0A00A0E3 		mov	r0, #10
 5802 20c4 A010A0E3 		mov	r1, #160
 5803 20c8 0F20A0E3 		mov	r2, #15
 5804 20cc 98329FE5 		ldr	r3, .L132+16
 5805 20d0 FEFFFFEB 		bl	Lcd_DspAscII6x8
 710:../tp.c       ****             Lcd_DspAscII6x8(10, 175, BLACK, (unsigned char *)"Coordenadas guardadas");
 5806              		.loc 1 710 0
 5807 20d4 0A00A0E3 		mov	r0, #10
 5808 20d8 AF10A0E3 		mov	r1, #175
 5809 20dc 0F20A0E3 		mov	r2, #15
 5810 20e0 88329FE5 		ldr	r3, .L132+20
 5811 20e4 FEFFFFEB 		bl	Lcd_DspAscII6x8
 714:../tp.c       ****             for (px = x-3; px <= x+3; px++)
 5812              		.loc 1 714 0
 5813 20e8 30301BE5 		ldr	r3, [fp, #-48]
 5814 20ec 033043E2 		sub	r3, r3, #3
 5815 20f0 18300BE5 		str	r3, [fp, #-24]
 5816 20f4 560000EA 		b	.L122
 5817              	.L126:
 715:../tp.c       ****                 for (py = y-3; py <= y+3; py++)
 5818              		.loc 1 715 0
 5819 20f8 34301BE5 		ldr	r3, [fp, #-52]
 5820 20fc 033043E2 		sub	r3, r3, #3
 5821 2100 1C300BE5 		str	r3, [fp, #-28]
 5822 2104 4A0000EA 		b	.L123
 5823              	.L125:
 716:../tp.c       ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 5824              		.loc 1 716 0
 5825 2108 18301BE5 		ldr	r3, [fp, #-24]
 5826 210c 000053E3 		cmp	r3, #0
 5827 2110 440000BA 		blt	.L124
 716:../tp.c       ****                     if (px >= 0 && px < SCR_XSIZE && py >= 0 && py < SCR_YSIZE)
 5828              		.loc 1 716 0 is_stmt 0 discriminator 1
 5829 2114 18201BE5 		ldr	r2, [fp, #-24]
 5830 2118 48329FE5 		ldr	r3, .L132+12
 5831 211c 030052E1 		cmp	r2, r3
 5832 2120 400000CA 		bgt	.L124
 5833 2124 1C301BE5 		ldr	r3, [fp, #-28]
 5834 2128 000053E3 		cmp	r3, #0
 5835 212c 3D0000BA 		blt	.L124
 5836 2130 1C301BE5 		ldr	r3, [fp, #-28]
 5837 2134 EF0053E3 		cmp	r3, #239
 5838 2138 3A0000CA 		bgt	.L124
 717:../tp.c       ****                         (LCD_PutPixel(px, py, 0xf));
 5839              		.loc 1 717 0 is_stmt 1
 5840 213c 1C201BE5 		ldr	r2, [fp, #-28]
 5841 2140 0230A0E1 		mov	r3, r2
 5842 2144 0331A0E1 		mov	r3, r3, asl #2
 5843 2148 023083E0 		add	r3, r3, r2
 5844 214c 0333A0E1 		mov	r3, r3, asl #6
 5845 2150 A32FA0E1 		mov	r2, r3, lsr #31
 5846 2154 033082E0 		add	r3, r2, r3
 5847 2158 C330A0E1 		mov	r3, r3, asr #1
 5848 215c C32683E2 		add	r2, r3, #204472320
 5849 2160 962C82E2 		add	r2, r2, #38400
 5850 2164 18301BE5 		ldr	r3, [fp, #-24]
 5851 2168 071083E2 		add	r1, r3, #7
 5852 216c 000053E3 		cmp	r3, #0
 5853 2170 0130A0B1 		movlt	r3, r1
 5854 2174 C331A0E1 		mov	r3, r3, asr #3
 5855 2178 0331A0E1 		mov	r3, r3, asl #2
 5856 217c 033082E0 		add	r3, r2, r3
 5857 2180 0310A0E1 		mov	r1, r3
 5858 2184 1C201BE5 		ldr	r2, [fp, #-28]
 5859 2188 0230A0E1 		mov	r3, r2
 5860 218c 0331A0E1 		mov	r3, r3, asl #2
 5861 2190 023083E0 		add	r3, r3, r2
 5862 2194 0333A0E1 		mov	r3, r3, asl #6
 5863 2198 A32FA0E1 		mov	r2, r3, lsr #31
 5864 219c 033082E0 		add	r3, r2, r3
 5865 21a0 C330A0E1 		mov	r3, r3, asr #1
 5866 21a4 C32683E2 		add	r2, r3, #204472320
 5867 21a8 962C82E2 		add	r2, r2, #38400
 5868 21ac 18301BE5 		ldr	r3, [fp, #-24]
 5869 21b0 070083E2 		add	r0, r3, #7
 5870 21b4 000053E3 		cmp	r3, #0
 5871 21b8 0030A0B1 		movlt	r3, r0
 5872 21bc C331A0E1 		mov	r3, r3, asr #3
 5873 21c0 0331A0E1 		mov	r3, r3, asl #2
 5874 21c4 033082E0 		add	r3, r2, r3
 5875 21c8 000093E5 		ldr	r0, [r3, #0]
 5876 21cc 18201BE5 		ldr	r2, [fp, #-24]
 5877 21d0 C23FA0E1 		mov	r3, r2, asr #31
 5878 21d4 A33EA0E1 		mov	r3, r3, lsr #29
 5879 21d8 032082E0 		add	r2, r2, r3
 5880 21dc 072002E2 		and	r2, r2, #7
 5881 21e0 023063E0 		rsb	r3, r3, r2
 5882 21e4 0331A0E1 		mov	r3, r3, asl #2
 5883 21e8 0F22A0E3 		mov	r2, #-268435456
 5884 21ec 3233A0E1 		mov	r3, r2, lsr r3
 5885 21f0 0330E0E1 		mvn	r3, r3
 5886 21f4 030000E0 		and	r0, r0, r3
 5887 21f8 18201BE5 		ldr	r2, [fp, #-24]
 5888 21fc C23FA0E1 		mov	r3, r2, asr #31
 5889 2200 A33EA0E1 		mov	r3, r3, lsr #29
 5890 2204 032082E0 		add	r2, r2, r3
 5891 2208 072002E2 		and	r2, r2, #7
 5892 220c 023063E0 		rsb	r3, r3, r2
 5893 2210 073063E2 		rsb	r3, r3, #7
 5894 2214 0331A0E1 		mov	r3, r3, asl #2
 5895 2218 0F20A0E3 		mov	r2, #15
 5896 221c 1233A0E1 		mov	r3, r2, asl r3
 5897 2220 033080E1 		orr	r3, r0, r3
 5898 2224 003081E5 		str	r3, [r1, #0]
 5899              	.L124:
 715:../tp.c       ****                 for (py = y-3; py <= y+3; py++)
 5900              		.loc 1 715 0
 5901 2228 1C301BE5 		ldr	r3, [fp, #-28]
 5902 222c 013083E2 		add	r3, r3, #1
 5903 2230 1C300BE5 		str	r3, [fp, #-28]
 5904              	.L123:
 715:../tp.c       ****                 for (py = y-3; py <= y+3; py++)
 5905              		.loc 1 715 0 is_stmt 0 discriminator 1
 5906 2234 34301BE5 		ldr	r3, [fp, #-52]
 5907 2238 032083E2 		add	r2, r3, #3
 5908 223c 1C301BE5 		ldr	r3, [fp, #-28]
 5909 2240 030052E1 		cmp	r2, r3
 5910 2244 AFFFFFAA 		bge	.L125
 714:../tp.c       ****             for (px = x-3; px <= x+3; px++)
 5911              		.loc 1 714 0 is_stmt 1
 5912 2248 18301BE5 		ldr	r3, [fp, #-24]
 5913 224c 013083E2 		add	r3, r3, #1
 5914 2250 18300BE5 		str	r3, [fp, #-24]
 5915              	.L122:
 714:../tp.c       ****             for (px = x-3; px <= x+3; px++)
 5916              		.loc 1 714 0 is_stmt 0 discriminator 1
 5917 2254 30301BE5 		ldr	r3, [fp, #-48]
 5918 2258 032083E2 		add	r2, r3, #3
 5919 225c 18301BE5 		ldr	r3, [fp, #-24]
 5920 2260 030052E1 		cmp	r2, r3
 5921 2264 A3FFFFAA 		bge	.L126
 720:../tp.c       ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 5922              		.loc 1 720 0 is_stmt 1
 5923 2268 20301BE5 		ldr	r3, [fp, #-32]
 5924 226c 1E2043E2 		sub	r2, r3, #30
 5925 2270 30301BE5 		ldr	r3, [fp, #-48]
 5926 2274 030052E1 		cmp	r2, r3
 5927 2278 140000CA 		bgt	.L127
 720:../tp.c       ****             if (x >= (num1_x-30) && x <= (num1_x+30) && y >= (num1_y-30) && y <= (num1_y+30))
 5928              		.loc 1 720 0 is_stmt 0 discriminator 1
 5929 227c 20301BE5 		ldr	r3, [fp, #-32]
 5930 2280 1E2083E2 		add	r2, r3, #30
 5931 2284 30301BE5 		ldr	r3, [fp, #-48]
 5932 2288 030052E1 		cmp	r2, r3
 5933 228c 0F0000BA 		blt	.L127
 5934 2290 24301BE5 		ldr	r3, [fp, #-36]
 5935 2294 1E2043E2 		sub	r2, r3, #30
 5936 2298 34301BE5 		ldr	r3, [fp, #-52]
 5937 229c 030052E1 		cmp	r2, r3
 5938 22a0 0A0000CA 		bgt	.L127
 5939 22a4 24301BE5 		ldr	r3, [fp, #-36]
 5940 22a8 1E2083E2 		add	r2, r3, #30
 5941 22ac 34301BE5 		ldr	r3, [fp, #-52]
 5942 22b0 030052E1 		cmp	r2, r3
 5943 22b4 050000BA 		blt	.L127
 722:../tp.c       ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 1");
 5944              		.loc 1 722 0 is_stmt 1
 5945 22b8 5000A0E3 		mov	r0, #80
 5946 22bc BE10A0E3 		mov	r1, #190
 5947 22c0 0F20A0E3 		mov	r2, #15
 5948 22c4 A8309FE5 		ldr	r3, .L132+24
 5949 22c8 FEFFFFEB 		bl	Lcd_DspAscII8x16
 5950 22cc 1E0000EA 		b	.L128
 5951              	.L127:
 724:../tp.c       ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 5952              		.loc 1 724 0
 5953 22d0 28301BE5 		ldr	r3, [fp, #-40]
 5954 22d4 1E2043E2 		sub	r2, r3, #30
 5955 22d8 30301BE5 		ldr	r3, [fp, #-48]
 5956 22dc 030052E1 		cmp	r2, r3
 5957 22e0 140000CA 		bgt	.L129
 724:../tp.c       ****             else if (x >= (num2_x-30) && x <= (num2_x+30) && y >= (num2_y-30) && y <= (num2_y+30))
 5958              		.loc 1 724 0 is_stmt 0 discriminator 1
 5959 22e4 28301BE5 		ldr	r3, [fp, #-40]
 5960 22e8 1E2083E2 		add	r2, r3, #30
 5961 22ec 30301BE5 		ldr	r3, [fp, #-48]
 5962 22f0 030052E1 		cmp	r2, r3
 5963 22f4 0F0000BA 		blt	.L129
 5964 22f8 2C301BE5 		ldr	r3, [fp, #-44]
 5965 22fc 1E2043E2 		sub	r2, r3, #30
 5966 2300 34301BE5 		ldr	r3, [fp, #-52]
 5967 2304 030052E1 		cmp	r2, r3
 5968 2308 0A0000CA 		bgt	.L129
 5969 230c 2C301BE5 		ldr	r3, [fp, #-44]
 5970 2310 1E2083E2 		add	r2, r3, #30
 5971 2314 34301BE5 		ldr	r3, [fp, #-52]
 5972 2318 030052E1 		cmp	r2, r3
 5973 231c 050000BA 		blt	.L129
 726:../tp.c       ****                 Lcd_DspAscII8x16(80, 190, BLACK, (unsigned char *)"NUMERO 2");
 5974              		.loc 1 726 0 is_stmt 1
 5975 2320 5000A0E3 		mov	r0, #80
 5976 2324 BE10A0E3 		mov	r1, #190
 5977 2328 0F20A0E3 		mov	r2, #15
 5978 232c 44309FE5 		ldr	r3, .L132+28
 5979 2330 FEFFFFEB 		bl	Lcd_DspAscII8x16
 5980 2334 040000EA 		b	.L128
 5981              	.L129:
 730:../tp.c       ****                 Lcd_DspAscII6x8(70, 195, BLACK, (unsigned char *)"Fuera de zona");
 5982              		.loc 1 730 0
 5983 2338 4600A0E3 		mov	r0, #70
 5984 233c C310A0E3 		mov	r1, #195
 5985 2340 0F20A0E3 		mov	r2, #15
 5986 2344 30309FE5 		ldr	r3, .L132+32
 5987 2348 FEFFFFEB 		bl	Lcd_DspAscII6x8
 5988              	.L128:
 733:../tp.c       ****             Lcd_Dma_Trans();
 5989              		.loc 1 733 0
 5990 234c FEFFFFEB 		bl	Lcd_Dma_Trans
 734:../tp.c       ****             Delay(50);
 5991              		.loc 1 734 0
 5992 2350 3200A0E3 		mov	r0, #50
 5993 2354 FEFFFFEB 		bl	Delay
 5994              	.LBE5:
 5995              		.loc 1 736 0
 5996 2358 0DFFFFEA 		b	.L130
 5997              	.L133:
 5998              		.align	2
 5999              	.L132:
 6000 235c 04000000 		.word	.LC1
 6001 2360 08000000 		.word	.LC2
 6002 2364 60010000 		.word	.LC33
 6003 2368 3F010000 		.word	319
 6004 236c 70010000 		.word	.LC34
 6005 2370 84010000 		.word	.LC35
 6006 2374 9C010000 		.word	.LC36
 6007 2378 A8010000 		.word	.LC37
 6008 237c B4010000 		.word	.LC38
 6009              		.cfi_endproc
 6010              	.LFE16:
 6012              		.bss
 6013              		.align	2
 6014              	count.4622:
 6015 002c 00000000 		.space	4
 6016              		.text
 6017              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 tp.c
                            *COM*:00000004 CheckTSP
                            *COM*:00000004 oneTouch
                            *COM*:00000004 Vx
                            *COM*:00000004 Vy
                            *COM*:00000004 Xmax
                            *COM*:00000004 Ymax
                            *COM*:00000004 Xmin
                            *COM*:00000004 Ymin
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2723   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2724   .bss:00000000 g_swap_xy
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2727   .bss:00000004 g_kx_fp
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2730   .bss:00000008 g_ky_fp
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2733   .bss:0000000c g_ts_xc
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2736   .bss:00000010 g_ts_yc
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2739   .bss:00000014 g_lcd_xc
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2742   .bss:00000018 g_lcd_yc
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2745   .bss:0000001c g_ts_ready
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2748   .bss:00000020 g_ts_raw_x
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2751   .bss:00000024 g_ts_raw_y
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2754   .bss:00000028 g_last_touch_time
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2757   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2760   .text:00000000 TS_Test
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3456   .text:00000710 Lcd_TC
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3269   .text:000005e4 TS_init
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3856   .text:00000bbc Check_Sel
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:2794   .text:00000024 TSInt
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4233   .text:00000ff0 report_touch_data
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3739   .text:00000a88 DesignREC
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3253   .text:000005bc $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3266   .text:000005e4 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3346   .text:000006a0 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3361   .text:000006d0 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3364   .text:000006d0 TS_close
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3398   .text:00000708 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3404   .rodata:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3453   .text:00000710 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3716   .text:00000a44 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3736   .text:00000a88 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3842   .text:00000b9c $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3853   .text:00000bbc $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3946   .text:00000ca0 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3958   .text:00000cc4 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:3960   .text:00000cc4 clamp
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4012   .text:00000d24 draw_cross
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4226   .text:00000fec $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4230   .text:00000ff0 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4313   .text:000010b4 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4321   .text:000010c8 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4323   .text:000010c8 ts_wait_for_touch
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4359   .text:00001100 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4363   .text:00001104 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4365   .text:00001104 ts_read_raw
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4404   .text:0000114c $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4409   .text:00001154 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4411   .text:00001154 get_cal_point
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:4768   .text:000014f4 ts_calibrate_5pt
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5245   .text:00001ab4 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5271   .text:00001b10 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5274   .text:00001b10 ts_read_calibrated
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5440   .text:00001cf0 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5459   .text:00001d1c $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5462   .text:00001d1c ts_test_calibracion
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5608   .text:00001ec8 $d
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:6014   .bss:0000002c count.4622
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5633   .text:00001ed0 $a
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:5636   .text:00001ed0 ts_test_numeros
C:\Users\jaime\AppData\Local\Temp\ccIWihAW.s:6000   .text:0000235c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_uidiv
DelayTime
Lcd_Init
Lcd_Clr
Lcd_Active_Clr
Lcd_Draw_Box
Lcd_DspAscII6x8
Lcd_Dma_Trans
Delay
timer2_count
__aeabi_ldivmod
Lcd_DspAscII8x16
