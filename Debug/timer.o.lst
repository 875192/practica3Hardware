   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"timer.c"
  21              	.Ltext0:
  22              		.file 1 "../timer.c"
 1891              		.align	2
 1894              	switch_leds:
 1895 0000 00000000 		.space	4
 1896              		.text
 1897              		.align	2
 1898              		.global	timer_ISR
 1900              	timer_ISR:
 1901              	.LFB0:
   1:../timer.c    **** /*********************************************************************************************
   2:../timer.c    **** * Fichero:		timer.c
   3:../timer.c    **** * Autor:
   4:../timer.c    **** * Descrip:		funciones de control del timer0 del s3c44b0x
   5:../timer.c    **** * Version:
   6:../timer.c    **** *********************************************************************************************/
   7:../timer.c    **** 
   8:../timer.c    **** /*--- ficheros de cabecera ---*/
   9:../timer.c    **** #include "timer.h"
  10:../timer.c    **** #include "44b.h"
  11:../timer.c    **** #include "44blib.h"
  12:../timer.c    **** #include "led.h"
  13:../timer.c    **** 
  14:../timer.c    **** /*--- variables globales ---*/
  15:../timer.c    **** int switch_leds = 0;
  16:../timer.c    **** 
  17:../timer.c    **** /* declaraci�n de funci�n que es rutina de servicio de interrupci�n
  18:../timer.c    ****  * https://gcc.gnu.org/onlinedocs/gcc/ARM-Function-Attributes.html */
  19:../timer.c    **** void timer_ISR(void) __attribute__((interrupt("IRQ")));
  20:../timer.c    **** 
  21:../timer.c    **** /*--- codigo de las funciones ---*/
  22:../timer.c    **** void timer_ISR(void)
  23:../timer.c    **** {
 1902              		.loc 1 23 0
 1903              		.cfi_startproc
 1904              		@ Interrupt Service Routine.
 1905              		@ args = 0, pretend = 0, frame = 0
 1906              		@ frame_needed = 1, uses_anonymous_args = 0
 1907 0000 04C02DE5 		str	ip, [sp, #-4]!
 1908 0004 0DC0A0E1 		mov	ip, sp
 1909              	.LCFI0:
 1910              		.cfi_def_cfa_register 12
 1911 0008 0CD82DE9 		stmfd	sp!, {r2, r3, fp, ip, lr, pc}
 1912 000c 04B04CE2 		sub	fp, ip, #4
 1913              		.cfi_offset 14, -8
 1914              		.cfi_offset 13, -12
 1915              		.cfi_offset 11, -16
 1916              		.cfi_offset 3, -20
 1917              		.cfi_offset 2, -24
 1918              	.LCFI1:
 1919              		.cfi_def_cfa 11, 4
  24:../timer.c    **** 	switch_leds = 1;
 1920              		.loc 1 24 0
 1921 0010 28309FE5 		ldr	r3, .L2
 1922 0014 0120A0E3 		mov	r2, #1
 1923 0018 002083E5 		str	r2, [r3, #0]
  25:../timer.c    **** 
  26:../timer.c    **** 	/* borrar bit en I_ISPC para desactivar la solicitud de interrupci�n*/
  27:../timer.c    **** 	rI_ISPC |= BIT_TIMER0; // BIT_TIMER0 est� definido en 44b.h y pone un uno en el bit 13 que corre
 1924              		.loc 1 27 0
 1925 001c 20309FE5 		ldr	r3, .L2+4
 1926 0020 1C209FE5 		ldr	r2, .L2+4
 1927 0024 002092E5 		ldr	r2, [r2, #0]
 1928 0028 022A82E3 		orr	r2, r2, #8192
 1929 002c 002083E5 		str	r2, [r3, #0]
  28:../timer.c    **** }
 1930              		.loc 1 28 0
 1931 0030 14D04BE2 		sub	sp, fp, #20
 1932 0034 0C689DE8 		ldmfd	sp, {r2, r3, fp, sp, lr}
 1933 0038 04C09DE4 		ldmfd	sp!, {ip}
 1934 003c 04F05EE2 		subs	pc, lr, #4
 1935              	.L3:
 1936              		.align	2
 1937              	.L2:
 1938 0040 00000000 		.word	switch_leds
 1939 0044 2400E001 		.word	31457316
 1940              		.cfi_endproc
 1941              	.LFE0:
 1943              		.align	2
 1944              		.global	timer_init
 1946              	timer_init:
 1947              	.LFB1:
  29:../timer.c    **** 
  30:../timer.c    **** void timer_init(void)
  31:../timer.c    **** {
 1948              		.loc 1 31 0
 1949              		.cfi_startproc
 1950              		@ Function supports interworking.
 1951              		@ args = 0, pretend = 0, frame = 0
 1952              		@ frame_needed = 1, uses_anonymous_args = 0
 1953 0048 0DC0A0E1 		mov	ip, sp
 1954              	.LCFI2:
 1955              		.cfi_def_cfa_register 12
 1956 004c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 1957 0050 04B04CE2 		sub	fp, ip, #4
 1958              		.cfi_offset 14, -8
 1959              		.cfi_offset 13, -12
 1960              		.cfi_offset 11, -16
 1961              	.LCFI3:
 1962              		.cfi_def_cfa 11, 4
  32:../timer.c    **** 	/* Configuracion controlador de interrupciones */
  33:../timer.c    **** 	rINTMOD = 0x0; // Configura las lineas como de tipo IRQ
 1963              		.loc 1 33 0
 1964 0054 84309FE5 		ldr	r3, .L5
 1965 0058 0020A0E3 		mov	r2, #0
 1966 005c 002083E5 		str	r2, [r3, #0]
  34:../timer.c    **** 	rINTCON = 0x1; // Habilita int. vectorizadas y la linea IRQ (FIQ no)
 1967              		.loc 1 34 0
 1968 0060 1E36A0E3 		mov	r3, #31457280
 1969 0064 0120A0E3 		mov	r2, #1
 1970 0068 002083E5 		str	r2, [r3, #0]
  35:../timer.c    **** 	rINTMSK &= ~(BIT_TIMER0); // habilitamos en vector de mascaras de interrupcion el Timer0 (bits 26 
 1971              		.loc 1 35 0
 1972 006c 70309FE5 		ldr	r3, .L5+4
 1973 0070 6C209FE5 		ldr	r2, .L5+4
 1974 0074 002092E5 		ldr	r2, [r2, #0]
 1975 0078 022AC2E3 		bic	r2, r2, #8192
 1976 007c 002083E5 		str	r2, [r3, #0]
  36:../timer.c    **** 
  37:../timer.c    **** 	/* Establece la rutina de servicio para TIMER0 */
  38:../timer.c    **** 	pISR_TIMER0 = (unsigned) timer_ISR;
 1977              		.loc 1 38 0
 1978 0080 60309FE5 		ldr	r3, .L5+8
 1979 0084 60209FE5 		ldr	r2, .L5+12
 1980 0088 002083E5 		str	r2, [r3, #0]
  39:../timer.c    **** 
  40:../timer.c    **** 	/* Configura el Timer0 */
  41:../timer.c    **** 	rTCFG0 = 255; // ajusta el preescalado
 1981              		.loc 1 41 0
 1982 008c 5C309FE5 		ldr	r3, .L5+16
 1983 0090 FF20A0E3 		mov	r2, #255
 1984 0094 002083E5 		str	r2, [r3, #0]
  42:../timer.c    **** 	rTCFG1 = 0x0; // selecciona la entrada del mux que proporciona el reloj. La 00 corresponde a un di
 1985              		.loc 1 42 0
 1986 0098 54309FE5 		ldr	r3, .L5+20
 1987 009c 0020A0E3 		mov	r2, #0
 1988 00a0 002083E5 		str	r2, [r3, #0]
  43:../timer.c    **** 	rTCNTB0 = 65535;// valor inicial de cuenta (la cuenta es descendente)
 1989              		.loc 1 43 0
 1990 00a4 4C309FE5 		ldr	r3, .L5+24
 1991 00a8 4C209FE5 		ldr	r2, .L5+28
 1992 00ac 002083E5 		str	r2, [r3, #0]
  44:../timer.c    **** 	rTCMPB0 = 12800;// valor de comparaci�n
 1993              		.loc 1 44 0
 1994 00b0 48309FE5 		ldr	r3, .L5+32
 1995 00b4 322CA0E3 		mov	r2, #12800
 1996 00b8 002083E5 		str	r2, [r3, #0]
  45:../timer.c    **** 	/* establecer update=manual (bit 1) + inverter=on (�? ser� inverter off un cero en el bit 2 po
  46:../timer.c    **** 	rTCON = 0x2;
 1997              		.loc 1 46 0
 1998 00bc 40309FE5 		ldr	r3, .L5+36
 1999 00c0 0220A0E3 		mov	r2, #2
 2000 00c4 002083E5 		str	r2, [r3, #0]
  47:../timer.c    **** 	/* iniciar timer (bit 0) con auto-reload (bit 3)*/
  48:../timer.c    **** 	rTCON = 0x09;
 2001              		.loc 1 48 0
 2002 00c8 34309FE5 		ldr	r3, .L5+36
 2003 00cc 0920A0E3 		mov	r2, #9
 2004 00d0 002083E5 		str	r2, [r3, #0]
  49:../timer.c    **** }...
 2005              		.loc 1 49 0
 2006 00d4 0CD04BE2 		sub	sp, fp, #12
 2007 00d8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2008 00dc 1EFF2FE1 		bx	lr
 2009              	.L6:
 2010              		.align	2
 2011              	.L5:
 2012 00e0 0800E001 		.word	31457288
 2013 00e4 0C00E001 		.word	31457292
 2014 00e8 54FF7F0C 		.word	209715028
 2015 00ec 00000000 		.word	timer_ISR
 2016 00f0 0000D501 		.word	30736384
 2017 00f4 0400D501 		.word	30736388
 2018 00f8 0C00D501 		.word	30736396
 2019 00fc FFFF0000 		.word	65535
 2020 0100 1000D501 		.word	30736400
 2021 0104 0800D501 		.word	30736392
 2022              		.cfi_endproc
 2023              	.LFE1:
 2025              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 timer.c
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1894   .bss:00000000 switch_leds
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1891   .bss:00000000 $d
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1897   .text:00000000 $a
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1900   .text:00000000 timer_ISR
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1938   .text:00000040 $d
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1943   .text:00000048 $a
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:1946   .text:00000048 timer_init
C:\Users\jaime\AppData\Local\Temp\ccX0SdbT.s:2012   .text:000000e0 $d
                     .debug_frame:00000010 $d

NO UNDEFINED SYMBOLS
